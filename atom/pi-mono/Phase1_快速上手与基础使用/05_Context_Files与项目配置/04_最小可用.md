# 最小可用知识

> 掌握这 20% 的核心知识，解决 80% 的 Context Files 配置问题

---

## 核心理念

**不需要学习所有配置选项，只需要掌握三个文件的基本用法，就能让 Pi Agent 在你的项目中高效工作。**

---

## 一、AGENTS.md：项目说明书（必学）

### 最小可用模板

```markdown
# 项目概述
这是一个 TypeScript + React 项目，使用 pnpm 管理依赖。

# 开发规范
- 使用 TypeScript，严格模式
- 组件放在 src/components/
- 工具函数放在 src/utils/
- 遵循 ESLint 和 Prettier 规则

# 常用命令
- `pnpm dev` - 启动开发服务器
- `pnpm build` - 构建生产版本
- `pnpm test` - 运行测试
- `pnpm lint` - 代码检查

# 注意事项
- 不要修改 src/legacy/ 目录下的代码
- API 调用统一使用 src/api/client.ts
```

### 放在哪里？

```bash
# 项目根目录
your-project/
├── AGENTS.md          # ← 放这里（团队共享）
├── src/
├── package.json
└── ...
```

### 何时使用？

- ✅ 新项目启动时（第一件事）
- ✅ 团队协作项目（提交到 Git）
- ✅ 有特殊规范的项目（自定义工作流）

---

## 二、settings.json：配置中心（按需学）

### 最小可用配置

```json
{
  "defaultModel": "claude-opus-4",
  "theme": "dark",
  "quietStartup": true
}
```

### 放在哪里？

```bash
# 项目级配置（推荐）
your-project/
└── .pi/
    └── settings.json  # ← 放这里（覆盖全局配置）

# 全局配置（所有项目生效）
~/.pi/agent/settings.json
```

### 常用配置项

| 配置项 | 作用 | 示例值 |
|--------|------|--------|
| `defaultModel` | 默认模型 | `"claude-opus-4"` |
| `theme` | 主题 | `"dark"` / `"light"` |
| `quietStartup` | 安静启动 | `true` / `false` |
| `compaction.enabled` | 自动压缩对话 | `true` / `false` |

### 何时使用？

- ✅ 需要切换模型（不同项目用不同模型）
- ✅ 个性化 UI（主题、启动行为）
- ✅ 性能优化（压缩设置）

---

## 三、SYSTEM.md：AI 人设（高级）

### 最小可用示例

```markdown
# 角色定位
你是一个专注于 TypeScript 开发的 AI 助手。

# 工作风格
- 代码优先，少说多做
- 遵循函数式编程风格
- 优先使用 TypeScript 类型推导

# 禁止行为
- 不要使用 any 类型
- 不要修改 package.json 的依赖版本
```

### 放在哪里？

```bash
# 项目级（推荐）
your-project/
└── .pi/
    └── APPEND_SYSTEM.md  # ← 追加到默认提示词

# 全局级（所有项目生效）
~/.pi/agent/APPEND_SYSTEM.md
```

### 何时使用？

- ✅ 需要特定的代码风格（函数式 vs 面向对象）
- ✅ 有严格的安全要求（禁止某些操作）
- ✅ 定制 AI 的沟通方式（简洁 vs 详细）

---

## 四、快速决策树

```
需要配置 Context Files？
│
├─ 团队协作项目？
│  └─ 是 → 创建 AGENTS.md（提交到 Git）
│
├─ 需要切换模型？
│  └─ 是 → 创建 .pi/settings.json
│
├─ 需要定制 AI 行为？
│  └─ 是 → 创建 .pi/APPEND_SYSTEM.md
│
└─ 个人小项目？
   └─ 只需要 AGENTS.md（可选）
```

---

## 五、30 秒快速上手

```bash
# 1. 创建 AGENTS.md（项目说明书）
cat > AGENTS.md << 'EOF'
# 项目规范
- TypeScript + React
- 使用 pnpm
- 遵循 ESLint
EOF

# 2. 创建项目配置（可选）
mkdir -p .pi
echo '{"defaultModel": "claude-opus-4"}' > .pi/settings.json

# 3. 启动 Pi（自动加载配置）
pi
```

---

## 六、常见场景速查

### 场景 1：新项目启动

```bash
# 只需要 AGENTS.md
echo "# 项目规范\n\n- 使用 TypeScript\n- 遵循 ESLint" > AGENTS.md
```

### 场景 2：团队协作

```bash
# AGENTS.md + .gitignore
echo "# 团队规范\n\n- 代码风格：Prettier\n- 提交规范：Conventional Commits" > AGENTS.md
echo ".pi/settings.json" >> .gitignore  # 个人配置不提交
```

### 场景 3：多项目切换

```bash
# 每个项目一个 .pi/settings.json
cd project-a && echo '{"defaultModel": "claude-opus-4"}' > .pi/settings.json
cd project-b && echo '{"defaultModel": "claude-sonnet-4"}' > .pi/settings.json
```

---

## 七、记住这三句话

1. **AGENTS.md 是必需的** - 告诉 AI 项目规则
2. **settings.json 是可选的** - 按需配置模型和 UI
3. **SYSTEM.md 是高级的** - 定制 AI 行为和风格

---

## 八、下一步学习路径

- **已掌握最小可用？** → 阅读【核心概念】深入理解三个文件
- **需要实战案例？** → 阅读【实战代码】查看完整示例
- **遇到问题？** → 阅读【反直觉点】避免常见误区

---

**记住：** 80% 的情况下，只需要一个简单的 AGENTS.md 就够了！
