# å®æˆ˜ä»£ç  5ï¼šé”™è¯¯å¤„ç†ä¸­é—´ä»¶

æœ¬æ–‡æä¾›å®Œæ•´çš„é”™è¯¯å¤„ç†ä¸­é—´ä»¶å®ç°ï¼ŒåŒ…æ‹¬ç»Ÿä¸€é”™è¯¯å“åº”ã€å¼‚å¸¸æ•è·å’Œé”™è¯¯æ—¥å¿—è®°å½•ã€‚

---

## 1. åŸºç¡€é”™è¯¯å¤„ç†

### 1.1 ç®€å•é”™è¯¯å¤„ç†ä¸­é—´ä»¶

```python
"""
åŸºç¡€é”™è¯¯å¤„ç†ä¸­é—´ä»¶
æ¼”ç¤ºï¼šæ•è·æ‰€æœ‰å¼‚å¸¸ï¼Œè¿”å›ç»Ÿä¸€çš„é”™è¯¯å“åº”
"""

from fastapi import FastAPI, Request
from fastapi.responses import JSONResponse
import traceback

app = FastAPI()

@app.middleware("http")
async def error_handler(request: Request, call_next):
    try:
        response = await call_next(request)
        return response
    except Exception as e:
        # è®°å½•é”™è¯¯
        print(f"Error: {e}")
        print(traceback.format_exc())

        # è¿”å›ç»Ÿä¸€çš„é”™è¯¯å“åº”
        return JSONResponse(
            {"error": "Internal server error"},
            status_code=500
        )

@app.get("/")
async def root():
    return {"message": "Hello World"}

@app.get("/error")
async def error_endpoint():
    raise ValueError("Something went wrong")

if __name__ == "__main__":
    import uvicorn
    uvicorn.run(app, host="0.0.0.0", port=8000)
```

**æµ‹è¯•ï¼š**

```bash
# æ­£å¸¸è¯·æ±‚
$ curl http://localhost:8000/
{"message":"Hello World"}

# é”™è¯¯è¯·æ±‚
$ curl http://localhost:8000/error
{"error":"Internal server error"}

# æœåŠ¡å™¨æ—¥å¿—ï¼š
Error: Something went wrong
Traceback (most recent call last):
  ...
ValueError: Something went wrong
```

---

## 2. åˆ†ç±»é”™è¯¯å¤„ç†

### 2.1 æ ¹æ®å¼‚å¸¸ç±»å‹è¿”å›ä¸åŒå“åº”

```python
"""
åˆ†ç±»é”™è¯¯å¤„ç†ä¸­é—´ä»¶
æ¼”ç¤ºï¼šæ ¹æ®å¼‚å¸¸ç±»å‹è¿”å›ä¸åŒçš„é”™è¯¯å“åº”
"""

from fastapi import FastAPI, Request, HTTPException
from fastapi.responses import JSONResponse
import traceback

app = FastAPI()

@app.middleware("http")
async def typed_error_handler(request: Request, call_next):
    try:
        response = await call_next(request)
        return response
    except HTTPException as e:
        # FastAPI çš„ HTTPException
        return JSONResponse(
            {"error": e.detail},
            status_code=e.status_code
        )
    except ValueError as e:
        # å€¼é”™è¯¯ï¼ˆ400 Bad Requestï¼‰
        return JSONResponse(
            {"error": f"Invalid value: {str(e)}"},
            status_code=400
        )
    except KeyError as e:
        # é”®é”™è¯¯ï¼ˆ404 Not Foundï¼‰
        return JSONResponse(
            {"error": f"Resource not found: {str(e)}"},
            status_code=404
        )
    except PermissionError as e:
        # æƒé™é”™è¯¯ï¼ˆ403 Forbiddenï¼‰
        return JSONResponse(
            {"error": f"Permission denied: {str(e)}"},
            status_code=403
        )
    except Exception as e:
        # å…¶ä»–å¼‚å¸¸ï¼ˆ500 Internal Server Errorï¼‰
        print(f"Unexpected error: {e}")
        print(traceback.format_exc())

        return JSONResponse(
            {"error": "Internal server error"},
            status_code=500
        )

@app.get("/value-error")
async def value_error():
    raise ValueError("Invalid input")

@app.get("/key-error")
async def key_error():
    data = {"name": "Alice"}
    return {"age": data["age"]}  # KeyError

@app.get("/permission-error")
async def permission_error():
    raise PermissionError("Access denied")

@app.get("/http-exception")
async def http_exception():
    raise HTTPException(status_code=401, detail="Unauthorized")

if __name__ == "__main__":
    import uvicorn
    uvicorn.run(app, host="0.0.0.0", port=8000)
```

---

## 3. å¸¦è¯·æ±‚ ID çš„é”™è¯¯å¤„ç†

### 3.1 é”™è¯¯è¿½è¸ªä¸­é—´ä»¶

```python
"""
å¸¦è¯·æ±‚ ID çš„é”™è¯¯å¤„ç†ä¸­é—´ä»¶
æ¼”ç¤ºï¼šä¸ºæ¯ä¸ªé”™è¯¯æ·»åŠ è¯·æ±‚ IDï¼Œä¾¿äºè¿½è¸ª
"""

from fastapi import FastAPI, Request
from fastapi.responses import JSONResponse
import uuid
import traceback
from datetime import datetime

app = FastAPI()

@app.middleware("http")
async def error_tracking(request: Request, call_next):
    # ç”Ÿæˆè¯·æ±‚ ID
    request_id = str(uuid.uuid4())[:8]
    request.state.request_id = request_id

    try:
        response = await call_next(request)
        return response
    except Exception as e:
        # è®°å½•é”™è¯¯è¯¦æƒ…
        timestamp = datetime.now().strftime("%Y-%m-%d %H:%M:%S")
        print(f"\n{'='*60}")
        print(f"[{timestamp}] [{request_id}] ERROR")
        print(f"Path: {request.method} {request.url.path}")
        print(f"Client: {request.client.host}")
        print(f"Error: {type(e).__name__}: {str(e)}")
        print(f"Traceback:")
        print(traceback.format_exc())
        print(f"{'='*60}\n")

        # è¿”å›é”™è¯¯å“åº”
        return JSONResponse(
            {
                "error": "Internal server error",
                "request_id": request_id,
                "message": "Please contact support with this request ID"
            },
            status_code=500,
            headers={"X-Request-ID": request_id}
        )

@app.get("/error")
async def error_endpoint():
    raise ValueError("Something went wrong")

if __name__ == "__main__":
    import uvicorn
    uvicorn.run(app, host="0.0.0.0", port=8000)
```

**è¿è¡Œè¾“å‡ºï¼š**

```
============================================================
[2026-02-11 10:30:15] [a1b2c3d4] ERROR
Path: GET /error
Client: 127.0.0.1
Error: ValueError: Something went wrong
Traceback:
Traceback (most recent call last):
  ...
ValueError: Something went wrong
============================================================
```

---

## 4. å¼€å‘ç¯å¢ƒ vs ç”Ÿäº§ç¯å¢ƒ

### 4.1 ç¯å¢ƒæ„ŸçŸ¥çš„é”™è¯¯å¤„ç†

```python
"""
ç¯å¢ƒæ„ŸçŸ¥çš„é”™è¯¯å¤„ç†ä¸­é—´ä»¶
æ¼”ç¤ºï¼šå¼€å‘ç¯å¢ƒè¿”å›è¯¦ç»†é”™è¯¯ï¼Œç”Ÿäº§ç¯å¢ƒè¿”å›ç®€åŒ–é”™è¯¯
"""

from fastapi import FastAPI, Request
from fastapi.responses import JSONResponse
import os
import traceback

app = FastAPI()

# ç¯å¢ƒé…ç½®
ENV = os.getenv("ENV", "development")  # development or production

@app.middleware("http")
async def env_aware_error_handler(request: Request, call_next):
    try:
        response = await call_next(request)
        return response
    except Exception as e:
        # è®°å½•é”™è¯¯
        print(f"Error: {e}")
        print(traceback.format_exc())

        if ENV == "development":
            # å¼€å‘ç¯å¢ƒï¼šè¿”å›è¯¦ç»†é”™è¯¯ä¿¡æ¯
            return JSONResponse(
                {
                    "error": type(e).__name__,
                    "message": str(e),
                    "traceback": traceback.format_exc().split("\n"),
                    "path": request.url.path,
                    "method": request.method
                },
                status_code=500
            )
        else:
            # ç”Ÿäº§ç¯å¢ƒï¼šè¿”å›ç®€åŒ–é”™è¯¯ä¿¡æ¯
            return JSONResponse(
                {
                    "error": "Internal server error",
                    "message": "An unexpected error occurred"
                },
                status_code=500
            )

@app.get("/error")
async def error_endpoint():
    raise ValueError("Something went wrong")

if __name__ == "__main__":
    import uvicorn
    uvicorn.run(app, host="0.0.0.0", port=8000)
```

**æµ‹è¯•ï¼š**

```bash
# å¼€å‘ç¯å¢ƒ
$ ENV=development python error_middleware.py
$ curl http://localhost:8000/error
{
  "error": "ValueError",
  "message": "Something went wrong",
  "traceback": ["Traceback (most recent call last):", "  ...", "ValueError: Something went wrong"],
  "path": "/error",
  "method": "GET"
}

# ç”Ÿäº§ç¯å¢ƒ
$ ENV=production python error_middleware.py
$ curl http://localhost:8000/error
{
  "error": "Internal server error",
  "message": "An unexpected error occurred"
}
```

---

## 5. é”™è¯¯é€šçŸ¥

### 5.1 é”™è¯¯é€šçŸ¥ä¸­é—´ä»¶

```python
"""
é”™è¯¯é€šçŸ¥ä¸­é—´ä»¶
æ¼”ç¤ºï¼šå‘ç”Ÿé”™è¯¯æ—¶å‘é€é€šçŸ¥ï¼ˆé‚®ä»¶ã€Slack ç­‰ï¼‰
"""

from fastapi import FastAPI, Request
from fastapi.responses import JSONResponse
import traceback
from datetime import datetime

app = FastAPI()

def send_error_notification(error_info: dict):
    """å‘é€é”™è¯¯é€šçŸ¥ï¼ˆç¤ºä¾‹ï¼‰"""
    print(f"\nğŸš¨ ERROR NOTIFICATION ğŸš¨")
    print(f"Time: {error_info['timestamp']}")
    print(f"Error: {error_info['error']}")
    print(f"Path: {error_info['path']}")
    print(f"Client: {error_info['client']}")
    print(f"Request ID: {error_info['request_id']}")
    print()

    # å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œå¯ä»¥ï¼š
    # - å‘é€é‚®ä»¶
    # - å‘é€ Slack æ¶ˆæ¯
    # - å‘é€é’‰é’‰æ¶ˆæ¯
    # - è®°å½•åˆ°é”™è¯¯è¿½è¸ªç³»ç»Ÿï¼ˆSentryã€Rollbar ç­‰ï¼‰

@app.middleware("http")
async def error_notification(request: Request, call_next):
    import uuid

    request_id = str(uuid.uuid4())[:8]
    request.state.request_id = request_id

    try:
        response = await call_next(request)
        return response
    except Exception as e:
        # æ„å»ºé”™è¯¯ä¿¡æ¯
        error_info = {
            "timestamp": datetime.now().isoformat(),
            "request_id": request_id,
            "error": f"{type(e).__name__}: {str(e)}",
            "path": f"{request.method} {request.url.path}",
            "client": request.client.host,
            "traceback": traceback.format_exc()
        }

        # å‘é€é€šçŸ¥
        send_error_notification(error_info)

        # è¿”å›é”™è¯¯å“åº”
        return JSONResponse(
            {
                "error": "Internal server error",
                "request_id": request_id
            },
            status_code=500
        )

@app.get("/error")
async def error_endpoint():
    raise ValueError("Critical error occurred")

if __name__ == "__main__":
    import uvicorn
    uvicorn.run(app, host="0.0.0.0", port=8000)
```

---

## 6. é”™è¯¯é‡è¯•æœºåˆ¶

### 6.1 è‡ªåŠ¨é‡è¯•ä¸­é—´ä»¶

```python
"""
é”™è¯¯é‡è¯•ä¸­é—´ä»¶
æ¼”ç¤ºï¼šå¯¹ç‰¹å®šé”™è¯¯è‡ªåŠ¨é‡è¯•
"""

from fastapi import FastAPI, Request
from fastapi.responses import JSONResponse
import asyncio

app = FastAPI()

# å¯é‡è¯•çš„å¼‚å¸¸ç±»å‹
RETRYABLE_EXCEPTIONS = (ConnectionError, TimeoutError)

# é‡è¯•é…ç½®
MAX_RETRIES = 3
RETRY_DELAY = 1  # ç§’

@app.middleware("http")
async def retry_middleware(request: Request, call_next):
    retries = 0

    while retries <= MAX_RETRIES:
        try:
            response = await call_next(request)
            return response
        except RETRYABLE_EXCEPTIONS as e:
            retries += 1

            if retries > MAX_RETRIES:
                # è¶…è¿‡æœ€å¤§é‡è¯•æ¬¡æ•°
                print(f"Max retries exceeded for {request.url.path}")
                return JSONResponse(
                    {
                        "error": "Service temporarily unavailable",
                        "message": f"Failed after {MAX_RETRIES} retries"
                    },
                    status_code=503
                )

            # ç­‰å¾…åé‡è¯•
            print(f"Retry {retries}/{MAX_RETRIES} for {request.url.path}")
            await asyncio.sleep(RETRY_DELAY)

        except Exception as e:
            # ä¸å¯é‡è¯•çš„å¼‚å¸¸
            print(f"Non-retryable error: {e}")
            return JSONResponse(
                {"error": "Internal server error"},
                status_code=500
            )

@app.get("/flaky")
async def flaky_endpoint():
    import random
    if random.random() < 0.7:  # 70% å¤±è´¥ç‡
        raise ConnectionError("Connection failed")
    return {"message": "Success"}

if __name__ == "__main__":
    import uvicorn
    uvicorn.run(app, host="0.0.0.0", port=8000)
```

---

## 7. ç”Ÿäº§çº§é”™è¯¯å¤„ç†ä¸­é—´ä»¶ï¼ˆå®Œæ•´ç‰ˆï¼‰

### 7.1 å®Œæ•´çš„ç”Ÿäº§çº§é”™è¯¯å¤„ç†ä¸­é—´ä»¶

```python
"""
ç”Ÿäº§çº§é”™è¯¯å¤„ç†ä¸­é—´ä»¶
æ¼”ç¤ºï¼šå®Œæ•´çš„é”™è¯¯å¤„ç†åŠŸèƒ½
"""

from fastapi import FastAPI, Request, HTTPException
from fastapi.responses import JSONResponse
import os
import uuid
import traceback
from datetime import datetime
from typing import Optional
from starlette.middleware.base import BaseHTTPMiddleware

app = FastAPI()

class ErrorHandlerMiddleware(BaseHTTPMiddleware):
    """ç”Ÿäº§çº§é”™è¯¯å¤„ç†ä¸­é—´ä»¶"""

    def __init__(
        self,
        app,
        env: str = "production",
        enable_notifications: bool = False,
        enable_retry: bool = False,
    ):
        super().__init__(app)
        self.env = env
        self.enable_notifications = enable_notifications
        self.enable_retry = enable_retry

    async def dispatch(self, request: Request, call_next):
        # ç”Ÿæˆè¯·æ±‚ ID
        request_id = str(uuid.uuid4())
        request.state.request_id = request_id

        try:
            response = await call_next(request)
            return response

        except HTTPException as e:
            # FastAPI çš„ HTTPException
            return self._handle_http_exception(e, request_id)

        except ValueError as e:
            # å€¼é”™è¯¯
            return self._handle_value_error(e, request, request_id)

        except KeyError as e:
            # é”®é”™è¯¯
            return self._handle_key_error(e, request, request_id)

        except PermissionError as e:
            # æƒé™é”™è¯¯
            return self._handle_permission_error(e, request, request_id)

        except Exception as e:
            # å…¶ä»–å¼‚å¸¸
            return self._handle_unexpected_error(e, request, request_id)

    def _handle_http_exception(self, e: HTTPException, request_id: str) -> JSONResponse:
        """å¤„ç† HTTPException"""
        return JSONResponse(
            {
                "error": e.detail,
                "request_id": request_id
            },
            status_code=e.status_code,
            headers={"X-Request-ID": request_id}
        )

    def _handle_value_error(self, e: ValueError, request: Request, request_id: str) -> JSONResponse:
        """å¤„ç† ValueError"""
        self._log_error(e, request, request_id, "ValueError")

        return JSONResponse(
            {
                "error": "Invalid value",
                "message": str(e) if self.env == "development" else "Invalid input provided",
                "request_id": request_id
            },
            status_code=400,
            headers={"X-Request-ID": request_id}
        )

    def _handle_key_error(self, e: KeyError, request: Request, request_id: str) -> JSONResponse:
        """å¤„ç† KeyError"""
        self._log_error(e, request, request_id, "KeyError")

        return JSONResponse(
            {
                "error": "Resource not found",
                "message": f"Key not found: {str(e)}" if self.env == "development" else "Resource not found",
                "request_id": request_id
            },
            status_code=404,
            headers={"X-Request-ID": request_id}
        )

    def _handle_permission_error(self, e: PermissionError, request: Request, request_id: str) -> JSONResponse:
        """å¤„ç† PermissionError"""
        self._log_error(e, request, request_id, "PermissionError")

        return JSONResponse(
            {
                "error": "Permission denied",
                "message": str(e) if self.env == "development" else "You don't have permission to access this resource",
                "request_id": request_id
            },
            status_code=403,
            headers={"X-Request-ID": request_id}
        )

    def _handle_unexpected_error(self, e: Exception, request: Request, request_id: str) -> JSONResponse:
        """å¤„ç†æœªé¢„æœŸçš„å¼‚å¸¸"""
        self._log_error(e, request, request_id, "UnexpectedError")

        # å‘é€é€šçŸ¥
        if self.enable_notifications:
            self._send_notification(e, request, request_id)

        # æ„å»ºå“åº”
        if self.env == "development":
            return JSONResponse(
                {
                    "error": type(e).__name__,
                    "message": str(e),
                    "traceback": traceback.format_exc().split("\n"),
                    "request_id": request_id,
                    "path": request.url.path,
                    "method": request.method
                },
                status_code=500,
                headers={"X-Request-ID": request_id}
            )
        else:
            return JSONResponse(
                {
                    "error": "Internal server error",
                    "message": "An unexpected error occurred. Please contact support with the request ID.",
                    "request_id": request_id
                },
                status_code=500,
                headers={"X-Request-ID": request_id}
            )

    def _log_error(self, e: Exception, request: Request, request_id: str, error_type: str):
        """è®°å½•é”™è¯¯æ—¥å¿—"""
        timestamp = datetime.now().strftime("%Y-%m-%d %H:%M:%S")
        print(f"\n{'='*60}")
        print(f"[{timestamp}] [{request_id}] {error_type}")
        print(f"Path: {request.method} {request.url.path}")
        print(f"Client: {request.client.host}")
        print(f"Error: {type(e).__name__}: {str(e)}")

        if self.env == "development":
            print(f"Traceback:")
            print(traceback.format_exc())

        print(f"{'='*60}\n")

    def _send_notification(self, e: Exception, request: Request, request_id: str):
        """å‘é€é”™è¯¯é€šçŸ¥"""
        print(f"\nğŸš¨ ERROR NOTIFICATION ğŸš¨")
        print(f"Request ID: {request_id}")
        print(f"Error: {type(e).__name__}: {str(e)}")
        print(f"Path: {request.method} {request.url.path}")
        print(f"Client: {request.client.host}")
        print()

# ä½¿ç”¨ä¸­é—´ä»¶
app.add_middleware(
    ErrorHandlerMiddleware,
    env=os.getenv("ENV", "development"),
    enable_notifications=True,
    enable_retry=False,
)

# æµ‹è¯•ç«¯ç‚¹
@app.get("/")
async def root():
    return {"message": "Hello World"}

@app.get("/value-error")
async def value_error():
    raise ValueError("Invalid input")

@app.get("/key-error")
async def key_error():
    data = {"name": "Alice"}
    return {"age": data["age"]}

@app.get("/permission-error")
async def permission_error():
    raise PermissionError("Access denied")

@app.get("/unexpected-error")
async def unexpected_error():
    raise RuntimeError("Something went wrong")

if __name__ == "__main__":
    import uvicorn
    uvicorn.run(app, host="0.0.0.0", port=8000)
```

---

## 8. åœ¨ AI Agent åç«¯ä¸­çš„åº”ç”¨

### 8.1 AI Agent é”™è¯¯å¤„ç†ä¸­é—´ä»¶

```python
"""
AI Agent åç«¯é”™è¯¯å¤„ç†ä¸­é—´ä»¶
æ¼”ç¤ºï¼šå¤„ç† LLM API è°ƒç”¨çš„é”™è¯¯
"""

from fastapi import FastAPI, Request
from fastapi.responses import JSONResponse
import uuid
import traceback
from datetime import datetime

app = FastAPI()

@app.middleware("http")
async def ai_agent_error_handler(request: Request, call_next):
    request_id = str(uuid.uuid4())[:8]
    request.state.request_id = request_id

    try:
        response = await call_next(request)
        return response

    except ConnectionError as e:
        # LLM API è¿æ¥é”™è¯¯
        print(f"[{request_id}] LLM API connection error: {e}")

        return JSONResponse(
            {
                "error": "LLM API unavailable",
                "message": "Unable to connect to AI service. Please try again later.",
                "request_id": request_id
            },
            status_code=503,
            headers={"X-Request-ID": request_id}
        )

    except TimeoutError as e:
        # LLM API è¶…æ—¶
        print(f"[{request_id}] LLM API timeout: {e}")

        return JSONResponse(
            {
                "error": "Request timeout",
                "message": "AI service took too long to respond. Please try again.",
                "request_id": request_id
            },
            status_code=504,
            headers={"X-Request-ID": request_id}
        )

    except ValueError as e:
        # è¾“å…¥éªŒè¯é”™è¯¯
        print(f"[{request_id}] Input validation error: {e}")

        return JSONResponse(
            {
                "error": "Invalid input",
                "message": str(e),
                "request_id": request_id
            },
            status_code=400,
            headers={"X-Request-ID": request_id}
        )

    except Exception as e:
        # å…¶ä»–é”™è¯¯
        timestamp = datetime.now().strftime("%Y-%m-%d %H:%M:%S")
        print(f"\n{'='*60}")
        print(f"[{timestamp}] [{request_id}] AI Agent Error")
        print(f"Path: {request.method} {request.url.path}")
        print(f"User: {getattr(request.state, 'user_id', 'unknown')}")
        print(f"Error: {type(e).__name__}: {str(e)}")
        print(f"Traceback:")
        print(traceback.format_exc())
        print(f"{'='*60}\n")

        return JSONResponse(
            {
                "error": "Internal server error",
                "message": "An error occurred while processing your request. Please contact support.",
                "request_id": request_id
            },
            status_code=500,
            headers={"X-Request-ID": request_id}
        )

@app.post("/api/agent/chat")
async def chat(request: Request, message: str):
    # æ¨¡æ‹Ÿ LLM API è°ƒç”¨
    if len(message) < 3:
        raise ValueError("Message too short (minimum 3 characters)")

    # æ¨¡æ‹Ÿè¿æ¥é”™è¯¯
    # raise ConnectionError("Unable to connect to LLM API")

    # æ¨¡æ‹Ÿè¶…æ—¶
    # raise TimeoutError("LLM API timeout")

    return {
        "request_id": request.state.request_id,
        "response": f"Echo: {message}"
    }

if __name__ == "__main__":
    import uvicorn
    uvicorn.run(app, host="0.0.0.0", port=8000)
```

---

## æ€»ç»“

**é”™è¯¯å¤„ç†ä¸­é—´ä»¶çš„æ ¸å¿ƒè¦ç‚¹ï¼š**

1. **ç»Ÿä¸€é”™è¯¯å“åº”**ï¼šæ‰€æœ‰é”™è¯¯è¿”å›ç»Ÿä¸€æ ¼å¼
2. **åˆ†ç±»å¤„ç†**ï¼šæ ¹æ®å¼‚å¸¸ç±»å‹è¿”å›ä¸åŒå“åº”
3. **è¯·æ±‚è¿½è¸ª**ï¼šä¸ºæ¯ä¸ªé”™è¯¯æ·»åŠ è¯·æ±‚ ID
4. **ç¯å¢ƒæ„ŸçŸ¥**ï¼šå¼€å‘ç¯å¢ƒè¿”å›è¯¦ç»†é”™è¯¯ï¼Œç”Ÿäº§ç¯å¢ƒè¿”å›ç®€åŒ–é”™è¯¯
5. **é”™è¯¯é€šçŸ¥**ï¼šå‘ç”Ÿé”™è¯¯æ—¶å‘é€é€šçŸ¥
6. **é”™è¯¯é‡è¯•**ï¼šå¯¹ç‰¹å®šé”™è¯¯è‡ªåŠ¨é‡è¯•
7. **ç”Ÿäº§çº§å¤„ç†**ï¼šå®Œæ•´çš„é”™è¯¯å¤„ç†åŠŸèƒ½
8. **AI Agent åº”ç”¨**ï¼šå¤„ç† LLM API è°ƒç”¨çš„é”™è¯¯

**æœ€ä½³å®è·µï¼š**
- æ•è·æ‰€æœ‰å¼‚å¸¸ï¼Œé¿å…æœåŠ¡å´©æºƒ
- è®°å½•è¯¦ç»†çš„é”™è¯¯æ—¥å¿—
- ç”Ÿäº§ç¯å¢ƒä¸æš´éœ²æ•æ„Ÿä¿¡æ¯
- ä¸ºæ¯ä¸ªé”™è¯¯ç”Ÿæˆè¯·æ±‚ ID
- å¯¹å…³é”®é”™è¯¯å‘é€é€šçŸ¥
- åœ¨ AI Agent åç«¯ä¸­ç‰¹åˆ«å¤„ç† LLM API é”™è¯¯

**å®Œæˆï¼** ä¸­é—´ä»¶ç³»ç»Ÿçš„æ‰€æœ‰æ–‡æ¡£å·²ç”Ÿæˆå®Œæ¯•ã€‚
