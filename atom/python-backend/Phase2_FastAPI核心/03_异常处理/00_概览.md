# FastAPI 异常处理 - 概览

> 统一错误处理机制，类似 Express 错误中间件

---

## 文档结构

本知识点按照10个维度组织，帮助你全面掌握 FastAPI 异常处理：

### 基础维度
- **01_30字核心.md** - 一句话理解异常处理的本质
- **02_第一性原理.md** - 从根本问题思考为什么需要异常处理
- **10_一句话总结.md** - 整个知识点的精华总结

### 核心概念（3个独立文件）
- **03_核心概念_01_HTTPException基础.md** - FastAPI 内置异常的使用
- **03_核心概念_02_自定义异常处理器.md** - exception_handler 装饰器
- **03_核心概念_03_全局异常中间件.md** - 统一错误处理架构

### 实战应用
- **04_最小可用.md** - 20%核心知识解决80%问题
- **05_双重类比.md** - 前端开发类比 + 日常生活类比
- **06_反直觉点.md** - 3个最常见的误区
- **08_面试必问.md** - 高频面试问题与出彩回答

### 实战代码（多个场景文件）
- **07_实战代码_01_基础异常处理.md** - HTTPException 基础用法
- **07_实战代码_02_自定义异常类.md** - 业务异常的封装
- **07_实战代码_03_全局异常处理器.md** - 统一错误响应格式
- **07_实战代码_04_AI_Agent场景.md** - LLM 调用失败处理

### 深度学习
- **09_化骨绵掌.md** - 10个2分钟知识卡片

---

## 学习路径

```
HTTPException基础 → 自定义异常处理器 → 全局异常中间件
      ↓                    ↓                    ↓
   快速抛错          精细化处理           统一架构
```

---

## 与 Express 的对比

| Express | FastAPI | 说明 |
|---------|---------|------|
| `throw new Error()` | `raise HTTPException()` | 抛出异常 |
| 错误中间件 `app.use((err, req, res, next) => {})` | `@app.exception_handler()` | 捕获异常 |
| `next(err)` | 自动传播异常 | 异常传递 |
| 手动设置状态码 | 自动设置状态码 | 响应处理 |

---

## 在 AI Agent 开发中的应用

- **LLM 调用失败**：OpenAI API 超时、限流、余额不足
- **数据库异常**：连接失败、查询超时、事务回滚
- **业务逻辑错误**：用户未授权、资源不存在、参数验证失败
- **第三方服务异常**：向量数据库连接失败、文档解析错误

---

## 前置知识

- ✅ Python 基础（异常处理 try/except）
- ✅ FastAPI 路由与依赖注入
- ✅ Pydantic 数据验证
- ✅ Express 错误中间件概念（可选）

---

## 学习目标

完成本知识点后，你将能够：

- [ ] 使用 HTTPException 抛出标准 HTTP 错误
- [ ] 创建自定义异常类封装业务错误
- [ ] 使用 @app.exception_handler() 捕获特定异常
- [ ] 实现全局异常处理器统一错误响应格式
- [ ] 处理 AI Agent 开发中的常见异常场景
- [ ] 设计生产级的错误处理架构

---

**版本：** v1.0
**最后更新：** 2026-02-11
**预计学习时间：** 60分钟
