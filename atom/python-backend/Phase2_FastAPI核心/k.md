# Phase2_FastAPI核心 知识点列表

> 掌握 FastAPI 核心特性，从 Express 平滑过渡到现代 Python Web 框架

---

## 知识点清单

1. **路由与依赖注入** - 定义 API 端点和依赖管理，类似 Express 路由 + 中间件
2. **请求体验证** - 自动验证和解析请求数据，比 express-validator 更强大
3. **异常处理** - 统一错误处理机制，类似 Express 错误中间件
4. **后台任务** - 异步后台任务处理，类似任务队列
5. **流式响应** - 实时数据流，用于 AI 生成的流式输出
6. **中间件系统** - 请求/响应拦截器，类似 Express 中间件

---

## 学习顺序建议

```
路由与依赖注入 → 请求体验证 → 异常处理 → 中间件系统 → 后台任务 → 流式响应
      ↓             ↓            ↓          ↓           ↓          ↓
   API基础       数据验证      错误管理    请求拦截    异步处理    实时输出
```

**为什么是这个顺序？**

1. **路由与依赖注入（1）**：FastAPI 的核心，定义 API 的基础
2. **请求体验证（2）**：基于 Pydantic 的自动验证，API 开发必备
3. **异常处理（3）**：统一错误处理，提升 API 健壮性
4. **中间件系统（4）**：请求拦截、日志、认证等横切关注点
5. **后台任务（5）**：处理耗时操作，不阻塞响应
6. **流式响应（6）**：AI Agent 的实时输出，用户体验关键

---

## 与 AI Agent 开发的关系

| 知识点 | 在 AI Agent 后端中的应用 | 关键产出 |
|--------|-------------------------|----------|
| 路由与依赖注入 | API 端点定义、数据库连接注入 | 模块化的 API 结构 |
| 请求体验证 | Agent 请求参数验证 | 类型安全的 API |
| 异常处理 | LLM 调用失败处理 | 友好的错误响应 |
| 后台任务 | 文档处理、Embedding 生成 | 快速响应 + 后台处理 |
| 流式响应 | Agent 实时输出 | 流式 AI 对话 |
| 中间件系统 | 认证、日志、限流 | 生产级 API |

---

## 前置知识

- ✅ Phase1_Python基础强化（类型注解、Pydantic、装饰器、异步编程）
- ✅ Express 路由和中间件概念
- ✅ RESTful API 设计原则

## 后续学习

- → Phase3_数据库层（SQLAlchemy、PostgreSQL）
- → Phase4_AI_Agent开发（LangChain 集成）
- → Phase5_生产级实践（认证、日志、缓存）

---

## 学习检查清单

完成本阶段后，你应该能够：

- [ ] 定义 GET/POST/PUT/DELETE 路由
- [ ] 使用 Depends() 实现依赖注入
- [ ] 用 Pydantic 模型验证请求体
- [ ] 自定义异常处理器
- [ ] 添加中间件（CORS、日志等）
- [ ] 使用 BackgroundTasks 处理后台任务
- [ ] 实现 StreamingResponse 流式输出

---

**版本：** v1.0
**最后更新：** 2026-02-10
