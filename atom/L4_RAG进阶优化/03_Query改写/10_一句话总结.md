# 一句话总结

**Query改写是通过 LLM 将用户原始查询转换为更适合检索的形式（如 HyDE 假设答案、Multi-Query 多变体），弥补用户表达与文档表达之间的语义鸿沟，在 RAG 系统中显著提升检索召回率和相关性。**

---

## 拆解理解

| 关键词 | 含义 |
|-------|------|
| **LLM 转换** | 利用大语言模型的语言理解能力进行改写 |
| **HyDE 假设答案** | 生成假设答案，用答案检索答案 |
| **Multi-Query 多变体** | 生成多个查询变体，扩大搜索范围 |
| **语义鸿沟** | 用户口语化表达与文档专业表达的差异 |
| **召回率和相关性** | 找到更多相关文档，排序更准确 |

---

## 记忆口诀

```
Query改写三板斧：
HyDE 用答案找答案，
Multi 多变体扩范围，
Decompose 拆问题分而治之。

记住一条：
精确不改，模糊才改，
改写是锦上添花，基础要先打好。
```

---

## 快速回顾

```
Query改写 = 翻译官

用户说的话 ──→ [Query改写] ──→ 文档能理解的语言
  口语化              ↓              专业术语
  不完整           HyDE              完整表达
  模糊            Multi-Query         精确
              Decomposition
```

---

## 学习检查清单

- [ ] 理解 Query改写解决的核心问题（语义鸿沟）
- [ ] 掌握 HyDE 的原理和实现
- [ ] 掌握 Multi-Query 的原理和实现
- [ ] 了解 Query Decomposition 的适用场景
- [ ] 知道何时需要改写、何时不需要
- [ ] 理解 Query改写与 ReRank 的关系
- [ ] 能够实现智能路由选择改写策略

---

## 下一步学习

- → [04_长文档处理策略](../04_长文档处理策略/) - 处理超长文档的分层索引与摘要链
- → [05_对话式RAG](../05_对话式RAG/) - 多轮对话的上下文管理

---

## 参考资源

- [HyDE 论文](https://arxiv.org/abs/2212.10496) - Precise Zero-Shot Dense Retrieval without Relevance Labels
- [LangChain Query Transformations](https://python.langchain.com/docs/how_to/#query-analysis) - LangChain 官方文档
- [LlamaIndex Query Transformations](https://docs.llamaindex.ai/en/stable/optimizing/production_rag/) - LlamaIndex 官方文档

---

**恭喜完成 Query改写 的学习！** 🎉
