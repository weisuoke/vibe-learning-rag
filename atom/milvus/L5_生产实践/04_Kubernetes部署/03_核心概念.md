# 核心概念

本知识点的核心概念分为3个独立文件，每个文件详细讲解一个技术：

## 📚 学习路径

```
Helm Charts部署 → Milvus Operator部署 → 集群配置与扩缩容
      ↓                  ↓                      ↓
   包管理工具         自动化运维              弹性伸缩
```

---

## 核心概念1：Helm Charts 部署

**文件：** [01_Helm_Charts部署.md](./03_核心概念/01_Helm_Charts部署.md)

**内容概要：**
- Helm是什么？为什么需要Helm？
- Helm的核心概念（Chart、Release、Repository）
- Helm模板引擎和变量替换
- 使用Helm部署Milvus的完整流程
- 多环境配置管理（开发/测试/生产）
- Helm最佳实践

**学习时间：** 30分钟

**适合：** 需要快速部署和配置管理的场景

---

## 核心概念2：Milvus Operator 部署

**文件：** [02_Milvus_Operator部署.md](./03_核心概念/02_Milvus_Operator部署.md)

**内容概要：**
- Operator模式的核心思想
- Operator vs Helm的区别
- 自定义资源（CRD）和控制器
- 使用Operator部署Milvus
- Operator的自动化能力（故障恢复、自动扩缩容、自动备份）
- Operator最佳实践

**学习时间：** 30分钟

**适合：** 大规模生产环境，需要自动化运维的场景

---

## 核心概念3：集群配置与扩缩容

**文件：** [03_集群配置与扩缩容.md](./03_核心概念/03_集群配置与扩缩容.md)

**内容概要：**
- 资源配置（CPU、内存、存储）
- 副本配置和Pod反亲和性
- 水平扩缩容（HPA）
- 垂直扩缩容（VPA）
- 手动扩缩容操作
- 在RAG系统中的应用场景

**学习时间：** 30分钟

**适合：** 需要优化资源利用率和应对流量波动的场景

---

## 学习建议

### 快速入门（1小时）
1. 阅读 Helm Charts 部署（30分钟）
2. 实践：使用Helm部署Milvus（30分钟）

### 完整学习（2小时）
1. 阅读所有3个核心概念文件（1.5小时）
2. 对比理解：Helm vs Operator（30分钟）

### 深度掌握（4小时）
1. 阅读所有3个核心概念文件（1.5小时）
2. 实践：Helm部署 + Operator部署（1.5小时）
3. 实践：配置HPA自动扩缩容（1小时）

---

## 核心概念对比

| 维度 | Helm Charts | Milvus Operator | 集群配置与扩缩容 |
|------|------------|----------------|----------------|
| **定位** | 包管理工具 | 自动化运维工具 | 资源管理 |
| **复杂度** | 低 | 中 | 中 |
| **学习成本** | 1天 | 2-3天 | 2天 |
| **适用场景** | 快速部署 | 大规模生产 | 性能优化 |
| **自动化程度** | 低（一次性） | 高（持续监控） | 中（自动扩缩容） |
| **配置灵活性** | 高 | 中 | 高 |

---

## 技术选型建议

### 场景1：开发/测试环境
**推荐：** Helm Charts
- 快速部署
- 配置简单
- 易于重建

### 场景2：小规模生产（<10节点）
**推荐：** Helm Charts + 手动运维
- 部署简单
- 手动运维可接受
- 成本低

### 场景3：大规模生产（>10节点）
**推荐：** Helm + Operator + HPA
- Helm安装Operator
- Operator管理Milvus
- HPA自动扩缩容
- 自动化运维

### 场景4：多集群管理
**推荐：** Operator + GitOps
- 统一管理多个集群
- 声明式配置
- 自动同步

---

## 常见问题

### Q1: Helm和Operator必须二选一吗？

**不是！** 推荐组合使用：
```bash
# 1. 用Helm安装Operator
helm install milvus-operator milvus-operator/milvus-operator

# 2. 用Operator管理Milvus
kubectl apply -f milvus-cluster.yaml
```

### Q2: 什么时候需要配置HPA？

**满足以下条件之一：**
- 流量波动大（白天vs夜间差异>3倍）
- 需要成本优化（节省60-80%）
- 需要自动应对突发流量
- 7x24小时运行的服务

### Q3: 如何选择副本数？

**推荐配置：**
- **Proxy**: 3个（支持故障转移）
- **QueryNode**: 5-10个（根据负载调整）
- **DataNode**: 3个（平衡性能和成本）
- **Coordinator**: 1个（通过etcd保证高可用）

---

## 下一步学习

完成核心概念学习后，继续学习：
- **最小可用**：掌握基本操作
- **实战代码**：完整的部署和运维脚本
- **化骨绵掌**：10个知识卡片系统学习

---

**开始学习：** [01_Helm_Charts部署.md](./03_核心概念/01_Helm_Charts部署.md)
