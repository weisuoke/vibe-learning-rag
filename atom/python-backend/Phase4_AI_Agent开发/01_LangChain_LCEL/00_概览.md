# LangChain LCEL - 概览

> LangChain 表达式语言，链式调用 LLM 和工具的现代化方式

---

## 文档结构

本知识点按照原子化学习模板组织，包含以下10个维度：

### 基础维度

1. **01_30字核心.md** - 用一句话说清 LCEL 的本质
2. **02_第一性原理.md** - 从最基础的真理理解 LCEL
3. **04_最小可用.md** - 20%核心知识解决80%问题
4. **05_双重类比.md** - 前端开发 + 日常生活类比
5. **06_反直觉点.md** - 3个最常见的误区
6. **08_面试必问.md** - 高频面试问题与出彩回答
7. **10_一句话总结.md** - 整个知识点的精华总结

### 核心概念（拆分为3个文件）

3. **03_核心概念_01_LCEL基础语法.md** - 管道操作符、Runnable 接口、链式调用
4. **03_核心概念_02_常用组件.md** - PromptTemplate、ChatModel、OutputParser
5. **03_核心概念_03_高级特性.md** - 并行执行、条件分支、错误处理

### 实战代码（拆分为5个场景）

7. **07_实战代码_01_基础链.md** - Prompt → LLM → Parser 的基础链
8. **07_实战代码_02_RAG链.md** - Retriever → Prompt → LLM 的检索链
9. **07_实战代码_03_多链组合.md** - 并行执行、条件分支的复杂链
10. **07_实战代码_04_流式输出.md** - 实时返回 LLM 生成内容
11. **07_实战代码_05_错误处理.md** - 重试、降级策略

### 深度学习

9. **09_化骨绵掌.md** - 10个2分钟知识卡片，形成完整体系

---

## 学习路径

```
01_30字核心 → 02_第一性原理 → 03_核心概念（3个文件） → 04_最小可用
     ↓
05_双重类比 → 06_反直觉点 → 07_实战代码（5个场景） → 08_面试必问
     ↓
09_化骨绵掌 → 10_一句话总结
```

**推荐学习顺序：**

1. **快速入门**（30分钟）
   - 01_30字核心
   - 04_最小可用
   - 07_实战代码_01_基础链

2. **深入理解**（2小时）
   - 02_第一性原理
   - 03_核心概念（3个文件）
   - 05_双重类比

3. **实战应用**（3小时）
   - 07_实战代码（5个场景）
   - 06_反直觉点

4. **面试准备**（1小时）
   - 08_面试必问
   - 09_化骨绵掌
   - 10_一句话总结

---

## 与 AI Agent 开发的关系

**LangChain LCEL 在 AI Agent 后端中的核心作用：**

| 应用场景 | LCEL 的作用 | 对应文件 |
|---------|------------|---------|
| **简单问答** | Prompt → LLM → Parser | 07_实战代码_01_基础链 |
| **文档检索** | Retriever → Prompt → LLM | 07_实战代码_02_RAG链 |
| **复杂流程** | 多链组合、条件分支 | 07_实战代码_03_多链组合 |
| **实时响应** | 流式输出 | 07_实战代码_04_流式输出 |
| **生产环境** | 错误处理、重试 | 07_实战代码_05_错误处理 |

---

## 前置知识

在学习本知识点前，你应该掌握：

- ✅ **Python 基础**：异步编程（async/await）、类型注解
- ✅ **FastAPI 核心**：路由、依赖注入、流式响应
- ✅ **LLM 基础**：Prompt Engineering、API 调用
- ✅ **RAG 基础**：Embedding、向量检索（如需学习 RAG 链）

---

## 后续学习

完成本知识点后，你可以继续学习：

- → **02_Agent执行器** - 自主调用工具的智能 Agent
- → **03_对话记忆管理** - 多轮对话上下文维护
- → **04_RAG检索链** - 完整的 RAG 系统实现
- → **05_流式输出集成** - 将 LCEL 流式输出集成到 FastAPI
- → **06_自定义Tool** - 为 Agent 创建自定义工具

---

## 学习检查清单

完成本知识点后，你应该能够：

- [ ] 理解 LCEL 的核心概念和设计理念
- [ ] 使用管道操作符 `|` 构建基础链
- [ ] 掌握 PromptTemplate、ChatModel、OutputParser 的使用
- [ ] 实现 Prompt → LLM → Parser 的基础链
- [ ] 实现 Retriever → Prompt → LLM 的 RAG 链
- [ ] 使用 RunnableParallel 实现并行执行
- [ ] 使用 RunnableBranch 实现条件分支
- [ ] 实现流式输出（astream）
- [ ] 添加错误处理和重试机制
- [ ] 将 LCEL 链集成到 FastAPI 端点

---

## 文档版本

- **版本**: v1.0
- **最后更新**: 2026-02-12
- **维护者**: Claude Code
- **适用于**: Python 3.13+, LangChain 0.1.0+

---

## 快速开始

如果你想快速上手，可以直接阅读：

1. **01_30字核心.md** - 了解 LCEL 是什么
2. **04_最小可用.md** - 掌握最核心的用法
3. **07_实战代码_01_基础链.md** - 运行第一个 LCEL 链

**预计时间**: 30分钟

---

**开始学习吧！** 🚀
