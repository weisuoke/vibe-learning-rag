# åŒé‡ç±»æ¯”

> é€šè¿‡ TypeScript/Node.js å’Œæ—¥å¸¸ç”Ÿæ´»çš„åŒé‡ç±»æ¯”ï¼Œæ·±å…¥ç†è§£ Pi çš„ 4 ä¸ªåŸºç¡€å·¥å…·

---

## ç±»æ¯”çš„ä»·å€¼

ç±»æ¯”å¸®åŠ©æˆ‘ä»¬ï¼š
- å°†é™Œç”Ÿæ¦‚å¿µä¸ç†Ÿæ‚‰äº‹ç‰©è”ç³»
- å¿«é€Ÿå»ºç«‹ç›´è§‰ç†è§£
- è®°å¿†æ›´æ·±åˆ»æŒä¹…

æœ¬æ–‡æä¾›**åŒé‡ç±»æ¯”**ï¼š
1. **TypeScript/Node.js ç±»æ¯”** - æŠ€æœ¯è§†è§’
2. **æ—¥å¸¸ç”Ÿæ´»ç±»æ¯”** - ç›´è§‰è§†è§’

---

## ç±»æ¯” 1ï¼šread å·¥å…·

### TypeScript/Node.js ç±»æ¯”

**read â‰ˆ `fs.readFileSync()` + æ™ºèƒ½ç¼“å­˜**

```typescript
// Node.js åŸç”Ÿæ–¹å¼
import fs from 'fs'
const content = fs.readFileSync('src/app.ts', 'utf-8')

// Pi çš„ read å·¥å…·ï¼ˆæ¦‚å¿µä¸Šï¼‰
const content = await read('src/app.ts')
```

**ç›¸ä¼¼æ€§ï¼š**
- éƒ½æ˜¯åŒæ­¥è¯»å–æ–‡ä»¶å†…å®¹
- éƒ½è¿”å›å­—ç¬¦ä¸²
- éƒ½æ”¯æŒæŒ‡å®šè·¯å¾„

**å·®å¼‚ï¼š**
- Pi çš„ read æ”¯æŒè¡ŒèŒƒå›´ï¼ˆç±»ä¼¼ `head`/`tail`ï¼‰
- Pi çš„ read æ”¯æŒå›¾ç‰‡ï¼ˆè¿”å› base64ï¼‰
- Pi çš„ read æœ‰å†…éƒ¨ URL schemeï¼ˆ`pi-internal://`ï¼‰

**æ›´ç²¾ç¡®çš„ç±»æ¯”ï¼š**

```typescript
// Pi çš„ read æ›´åƒä¸€ä¸ªå¢å¼ºç‰ˆçš„æ–‡ä»¶è¯»å–å™¨
class PiReadTool {
  async read(path: string, options?: {
    startLine?: number
    endLine?: number
  }): Promise<string> {
    const content = fs.readFileSync(path, 'utf-8')

    if (options?.startLine || options?.endLine) {
      const lines = content.split('\n')
      return lines
        .slice(options.startLine, options.endLine)
        .join('\n')
    }

    return content
  }
}
```

---

### æ—¥å¸¸ç”Ÿæ´»ç±»æ¯”

**read â‰ˆ æ‰“å¼€ä¹¦æœ¬æŸ¥çœ‹å†…å®¹**

**åœºæ™¯ï¼š** ä½ åœ¨å›¾ä¹¦é¦†æŸ¥èµ„æ–™

```
1. æ‰¾åˆ°ä¹¦æ¶ä¸Šçš„ä¹¦ï¼ˆæŒ‡å®šæ–‡ä»¶è·¯å¾„ï¼‰
2. æ‰“å¼€ä¹¦æœ¬ï¼ˆè¯»å–æ–‡ä»¶ï¼‰
3. æŸ¥çœ‹ç‰¹å®šç« èŠ‚ï¼ˆè¡ŒèŒƒå›´ï¼‰
4. è®°ä½å†…å®¹ï¼ˆAgent ç†è§£ä»£ç ï¼‰
```

**ç‰¹ç‚¹ï¼š**
- ğŸ“– åªæ˜¯æŸ¥çœ‹ï¼Œä¸ä¼šä¿®æ”¹ä¹¦æœ¬
- ğŸ” å¯ä»¥åªçœ‹ç‰¹å®šé¡µç ï¼ˆè¡ŒèŒƒå›´ï¼‰
- ğŸ“· å¯ä»¥çœ‹å›¾ç‰‡ï¼ˆå›¾ç‰‡æ–‡ä»¶ï¼‰
- ğŸ”„ å¯ä»¥åå¤æŸ¥çœ‹ï¼ˆå¤šæ¬¡è¯»å–ï¼‰

**ç±»æ¯”å»¶ä¼¸ï¼š**
- **read å¤šä¸ªæ–‡ä»¶** = åŒæ—¶ç¿»é˜…å¤šæœ¬ä¹¦
- **read å¤§æ–‡ä»¶** = é˜…è¯»åšé‡çš„ç™¾ç§‘å…¨ä¹¦
- **read é…ç½®æ–‡ä»¶** = æŸ¥çœ‹è¯´æ˜ä¹¦

---

## ç±»æ¯” 2ï¼šwrite å·¥å…·

### TypeScript/Node.js ç±»æ¯”

**write â‰ˆ `fs.writeFileSync()` + åŸå­æ“ä½œ**

```typescript
// Node.js åŸç”Ÿæ–¹å¼
import fs from 'fs'
fs.writeFileSync('src/new.ts', content, 'utf-8')

// Pi çš„ write å·¥å…·ï¼ˆæ¦‚å¿µä¸Šï¼‰
await write('src/new.ts', content)
```

**ç›¸ä¼¼æ€§ï¼š**
- éƒ½æ˜¯åˆ›å»ºæˆ–è¦†ç›–æ–‡ä»¶
- éƒ½å†™å…¥å®Œæ•´å†…å®¹
- éƒ½æ˜¯åŒæ­¥æ“ä½œ

**å·®å¼‚ï¼š**
- Pi çš„ write æ˜¯åŸå­æ“ä½œï¼ˆè¦ä¹ˆæˆåŠŸï¼Œè¦ä¹ˆå¤±è´¥ï¼‰
- Pi çš„ write å¯èƒ½è§¦å‘ LSP è¯Šæ–­ï¼ˆoh-my-piï¼‰
- Pi çš„ write å¯èƒ½è§¦å‘ Extension hooks

**æ›´ç²¾ç¡®çš„ç±»æ¯”ï¼š**

```typescript
// Pi çš„ write æ›´åƒä¸€ä¸ªå¸¦é’©å­çš„æ–‡ä»¶å†™å…¥å™¨
class PiWriteTool {
  async write(path: string, content: string): Promise<void> {
    // 1. è§¦å‘ beforeWrite hooks
    await this.hooks.beforeWrite(path, content)

    // 2. åŸå­å†™å…¥
    const tempPath = `${path}.tmp`
    fs.writeFileSync(tempPath, content, 'utf-8')
    fs.renameSync(tempPath, path)  // åŸå­æ“ä½œ

    // 3. è§¦å‘ afterWrite hooksï¼ˆå¦‚ LSP è¯Šæ–­ï¼‰
    await this.hooks.afterWrite(path)
  }
}
```

---

### æ—¥å¸¸ç”Ÿæ´»ç±»æ¯”

**write â‰ˆ åœ¨ç©ºç™½çº¸ä¸Šå†™å­— æˆ– å®Œå…¨æ“¦é™¤é‡å†™**

**åœºæ™¯ï¼š** ä½ åœ¨å†™ç¬”è®°

```
1. æ‹¿å‡ºä¸€å¼ æ–°çº¸ï¼ˆåˆ›å»ºæ–°æ–‡ä»¶ï¼‰
   æˆ– æ“¦é™¤æ—§çº¸ä¸Šçš„æ‰€æœ‰å†…å®¹ï¼ˆè¦†ç›–ç°æœ‰æ–‡ä»¶ï¼‰
2. ä»å¤´å¼€å§‹å†™ï¼ˆå†™å…¥å®Œæ•´å†…å®¹ï¼‰
3. å†™å®Œåæ”¾å›æ–‡ä»¶å¤¹ï¼ˆä¿å­˜æ–‡ä»¶ï¼‰
```

**ç‰¹ç‚¹ï¼š**
- ğŸ“ ä»é›¶å¼€å§‹å†™ï¼Œä¸ä¿ç•™æ—§å†…å®¹
- âš ï¸ è¦†ç›–ä¼šä¸¢å¤±åŸæœ‰å†…å®¹
- âœ… é€‚åˆåˆ›å»ºæ–°æ–‡ä»¶
- âŒ ä¸é€‚åˆä¿®æ”¹ç°æœ‰æ–‡ä»¶ï¼ˆåº”è¯¥ç”¨ editï¼‰

**ç±»æ¯”å»¶ä¼¸ï¼š**
- **write æ–°æ–‡ä»¶** = åœ¨æ–°çº¸ä¸Šå†™å­—
- **write è¦†ç›–æ–‡ä»¶** = æ“¦é™¤æ—§çº¸é‡å†™
- **write é…ç½®æ–‡ä»¶** = å¡«å†™è¡¨æ ¼

---

## ç±»æ¯” 3ï¼šedit å·¥å…·

### TypeScript/Node.js ç±»æ¯”

**edit â‰ˆ `String.prototype.replace()` + diff ç”Ÿæˆ**

```typescript
// Node.js åŸç”Ÿæ–¹å¼
import fs from 'fs'
let content = fs.readFileSync('src/app.ts', 'utf-8')
content = content.replace('const port = 3000', 'const port = 8080')
fs.writeFileSync('src/app.ts', content, 'utf-8')

// Pi çš„ edit å·¥å…·ï¼ˆæ¦‚å¿µä¸Šï¼‰
await edit('src/app.ts', 'const port = 3000', 'const port = 8080')
```

**ç›¸ä¼¼æ€§ï¼š**
- éƒ½æ˜¯æ›¿æ¢æ–‡æœ¬
- éƒ½éœ€è¦ç²¾ç¡®åŒ¹é…
- éƒ½ä¿®æ”¹ç°æœ‰å†…å®¹

**å·®å¼‚ï¼š**
- Pi çš„ edit ç”Ÿæˆ diffï¼ˆæ˜¾ç¤ºä¿®æ”¹å†…å®¹ï¼‰
- Pi çš„ edit å¯èƒ½ä½¿ç”¨ hash-anchored ç­–ç•¥ï¼ˆoh-my-piï¼‰
- Pi çš„ edit å¤±è´¥æ—¶ä¸ä¼šä¿®æ”¹æ–‡ä»¶

**æ›´ç²¾ç¡®çš„ç±»æ¯”ï¼š**

```typescript
// Pi çš„ edit æ›´åƒä¸€ä¸ªæ™ºèƒ½æ–‡æœ¬æ›¿æ¢å™¨
class PiEditTool {
  async edit(
    path: string,
    oldText: string,
    newText: string
  ): Promise<{ success: boolean; diff: string }> {
    const content = fs.readFileSync(path, 'utf-8')

    // 1. æ£€æŸ¥æ—§æ–‡æœ¬æ˜¯å¦å­˜åœ¨
    if (!content.includes(oldText)) {
      throw new Error(`Old text not found in ${path}`)
    }

    // 2. æ›¿æ¢æ–‡æœ¬
    const newContent = content.replace(oldText, newText)

    // 3. ç”Ÿæˆ diff
    const diff = this.generateDiff(content, newContent)

    // 4. å†™å…¥æ–‡ä»¶
    fs.writeFileSync(path, newContent, 'utf-8')

    return { success: true, diff }
  }

  private generateDiff(old: string, new_: string): string {
    // ç±»ä¼¼ git diff çš„è¾“å‡º
    return `
--- a/file
+++ b/file
@@ -1,1 +1,1 @@
-${old}
+${new_}
    `
  }
}
```

---

### æ—¥å¸¸ç”Ÿæ´»ç±»æ¯”

**edit â‰ˆ ç”¨æ©¡çš®æ“¦é™¤ç‰¹å®šå†…å®¹ï¼Œç„¶åé‡å†™**

**åœºæ™¯ï¼š** ä½ åœ¨ä¿®æ”¹ç¬”è®°

```
1. æ‰¾åˆ°è¦ä¿®æ”¹çš„å†…å®¹ï¼ˆå®šä½æ—§æ–‡æœ¬ï¼‰
2. ç”¨æ©¡çš®æ“¦é™¤ï¼ˆåˆ é™¤æ—§æ–‡æœ¬ï¼‰
3. åœ¨åŒä¸€ä½ç½®å†™ä¸Šæ–°å†…å®¹ï¼ˆå†™å…¥æ–°æ–‡æœ¬ï¼‰
4. å…¶ä»–å†…å®¹ä¿æŒä¸å˜ï¼ˆåªä¿®æ”¹æŒ‡å®šéƒ¨åˆ†ï¼‰
```

**ç‰¹ç‚¹ï¼š**
- âœï¸ åªä¿®æ”¹ç‰¹å®šéƒ¨åˆ†ï¼Œä¿ç•™å…¶ä»–å†…å®¹
- ğŸ¯ éœ€è¦ç²¾ç¡®å®šä½ï¼ˆæ—§æ–‡æœ¬å¿…é¡»åŒ¹é…ï¼‰
- ğŸ“Š å¯ä»¥çœ‹åˆ°ä¿®æ”¹å‰åå¯¹æ¯”ï¼ˆdiffï¼‰
- âš ï¸ å¦‚æœæ‰¾ä¸åˆ°è¦ä¿®æ”¹çš„å†…å®¹ï¼Œæ“ä½œå¤±è´¥

**ç±»æ¯”å»¶ä¼¸ï¼š**
- **edit å•è¡Œ** = ä¿®æ”¹ä¸€å¥è¯
- **edit å¤šè¡Œ** = ä¿®æ”¹ä¸€æ®µè¯
- **edit æ‰¹é‡** = ç”¨æŸ¥æ‰¾æ›¿æ¢åŠŸèƒ½

---

## ç±»æ¯” 4ï¼šbash å·¥å…·

### TypeScript/Node.js ç±»æ¯”

**bash â‰ˆ `child_process.execSync()` + spawn hooks**

```typescript
// Node.js åŸç”Ÿæ–¹å¼
import { execSync } from 'child_process'
const output = execSync('npm test', { encoding: 'utf-8' })

// Pi çš„ bash å·¥å…·ï¼ˆæ¦‚å¿µä¸Šï¼‰
const output = await bash('npm test')
```

**ç›¸ä¼¼æ€§ï¼š**
- éƒ½æ˜¯æ‰§è¡Œ shell å‘½ä»¤
- éƒ½è¿”å›å‘½ä»¤è¾“å‡º
- éƒ½åœ¨å½“å‰ç›®å½•æ‰§è¡Œ

**å·®å¼‚ï¼š**
- Pi çš„ bash æ”¯æŒ spawn hooksï¼ˆå®šåˆ¶è¡Œä¸ºï¼‰
- Pi çš„ bash å¯èƒ½åœ¨æ²™ç®±ä¸­æ‰§è¡Œ
- Pi çš„ bash å¯èƒ½åœ¨è¿œç¨‹æœåŠ¡å™¨æ‰§è¡Œï¼ˆSSH Extensionï¼‰

**æ›´ç²¾ç¡®çš„ç±»æ¯”ï¼š**

```typescript
// Pi çš„ bash æ›´åƒä¸€ä¸ªå¯å®šåˆ¶çš„å‘½ä»¤æ‰§è¡Œå™¨
class PiBashTool {
  async bash(command: string): Promise<string> {
    // 1. è§¦å‘ beforeSpawn hooks
    const modifiedCommand = await this.hooks.beforeSpawn(command)

    // 2. æ‰§è¡Œå‘½ä»¤
    const output = execSync(modifiedCommand, {
      encoding: 'utf-8',
      cwd: this.workingDirectory
    })

    // 3. è§¦å‘ afterSpawn hooks
    await this.hooks.afterSpawn(command, output)

    return output
  }
}

// ç¤ºä¾‹ï¼šSSH Extension æ‹¦æˆª bash
extensions.register({
  name: 'ssh-bash',
  hooks: {
    beforeSpawn: async (command: string) => {
      // åœ¨è¿œç¨‹æœåŠ¡å™¨æ‰§è¡Œ
      return `ssh user@remote "${command}"`
    }
  }
})
```

---

### æ—¥å¸¸ç”Ÿæ´»ç±»æ¯”

**bash â‰ˆ è¯·åŠ©æ‰‹æ‰§è¡Œä»»åŠ¡**

**åœºæ™¯ï¼š** ä½ åœ¨åŠå…¬å®¤è¯·åŠ©æ‰‹å¸®å¿™

```
1. ç»™åŠ©æ‰‹ä¸‹è¾¾æŒ‡ä»¤ï¼ˆæ‰§è¡Œå‘½ä»¤ï¼‰
2. åŠ©æ‰‹æ‰§è¡Œä»»åŠ¡ï¼ˆå‘½ä»¤è¿è¡Œï¼‰
3. åŠ©æ‰‹æŠ¥å‘Šç»“æœï¼ˆè¿”å›è¾“å‡ºï¼‰
4. ä½ æ ¹æ®ç»“æœå†³å®šä¸‹ä¸€æ­¥ï¼ˆAgent åˆ†æè¾“å‡ºï¼‰
```

**ç‰¹ç‚¹ï¼š**
- ğŸ¤– åŠ©æ‰‹å¯ä»¥åšå„ç§äº‹æƒ…ï¼ˆè¿è¡Œæµ‹è¯•ã€æ„å»ºé¡¹ç›®ã€Git æ“ä½œç­‰ï¼‰
- ğŸ“‹ åŠ©æ‰‹ä¼šæŠ¥å‘Šæ‰§è¡Œç»“æœï¼ˆå‘½ä»¤è¾“å‡ºï¼‰
- âš ï¸ å¦‚æœä»»åŠ¡å¤±è´¥ï¼ŒåŠ©æ‰‹ä¼šå‘Šè¯‰ä½ ï¼ˆé”™è¯¯ä¿¡æ¯ï¼‰
- ğŸ”„ å¯ä»¥è¿ç»­ä¸‹è¾¾å¤šä¸ªæŒ‡ä»¤ï¼ˆå¤šæ¬¡è°ƒç”¨ï¼‰

**ç±»æ¯”å»¶ä¼¸ï¼š**
- **bash npm test** = è¯·åŠ©æ‰‹è¿è¡Œæµ‹è¯•
- **bash git status** = è¯·åŠ©æ‰‹æ£€æŸ¥ Git çŠ¶æ€
- **bash find** = è¯·åŠ©æ‰‹æŸ¥æ‰¾æ–‡ä»¶

---

## å·¥å…·ç»„åˆç±»æ¯”

### TypeScript/Node.js ç±»æ¯”

**å·¥å…·ç»„åˆ â‰ˆ Express ä¸­é—´ä»¶é“¾**

```typescript
// Express ä¸­é—´ä»¶é“¾
app.use(logger)      // è®°å½•è¯·æ±‚
app.use(parser)      // è§£æè¯·æ±‚
app.use(validator)   // éªŒè¯è¯·æ±‚
app.use(handler)     // å¤„ç†è¯·æ±‚

// Pi å·¥å…·é“¾
await read('src/app.ts')           // æŸ¥çœ‹ä»£ç 
await edit('src/app.ts', old, new) // ä¿®æ”¹ä»£ç 
await bash('npm test')             // éªŒè¯ä¿®æ”¹
```

**ç›¸ä¼¼æ€§ï¼š**
- éƒ½æ˜¯é¡ºåºæ‰§è¡Œ
- æ¯ä¸€æ­¥ä¾èµ–å‰ä¸€æ­¥çš„ç»“æœ
- å¯ä»¥ç»„åˆæˆå¤æ‚æµç¨‹

---

### æ—¥å¸¸ç”Ÿæ´»ç±»æ¯”

**å·¥å…·ç»„åˆ â‰ˆ åšèœçš„æµç¨‹**

```
1. read é£Ÿè°±     = æŸ¥çœ‹èœè°±
2. bash å‡†å¤‡é£Ÿæ = æ´—èœåˆ‡èœ
3. write æ–°èœè°±  = åˆ›æ–°èœè°±
4. edit è°ƒæ•´é…æ–¹ = è°ƒæ•´è°ƒæ–™
5. bash çƒ¹é¥ª     = ç‚’èœ
6. bash å“å°     = å°å‘³é“
```

**ç‰¹ç‚¹ï¼š**
- ğŸ“ æ¯ä¸€æ­¥éƒ½æœ‰æ˜ç¡®ç›®çš„
- ğŸ”„ å¯ä»¥æ ¹æ®ç»“æœè°ƒæ•´ä¸‹ä¸€æ­¥
- âœ… æœ€ç»ˆè¾¾æˆç›®æ ‡ï¼ˆå®Œæˆç¼–ç ä»»åŠ¡ï¼‰

---

## ç±»æ¯”æ€»ç»“è¡¨

### æŠ€æœ¯ç±»æ¯”å¯¹ç…§è¡¨

| Pi å·¥å…· | TypeScript/Node.js ç±»æ¯” | æ ¸å¿ƒç›¸ä¼¼æ€§ | å…³é”®å·®å¼‚ |
|---------|------------------------|-----------|---------|
| **read** | `fs.readFileSync()` | è¯»å–æ–‡ä»¶å†…å®¹ | æ”¯æŒè¡ŒèŒƒå›´ã€å›¾ç‰‡ã€å†…éƒ¨ URL |
| **write** | `fs.writeFileSync()` | å†™å…¥æ–‡ä»¶ | åŸå­æ“ä½œã€è§¦å‘ hooks |
| **edit** | `String.replace()` | æ›¿æ¢æ–‡æœ¬ | ç”Ÿæˆ diffã€å¤±è´¥ä¿æŠ¤ |
| **bash** | `child_process.execSync()` | æ‰§è¡Œå‘½ä»¤ | spawn hooksã€æ²™ç®±ã€è¿œç¨‹æ‰§è¡Œ |

---

### æ—¥å¸¸ç”Ÿæ´»ç±»æ¯”å¯¹ç…§è¡¨

| Pi å·¥å…· | æ—¥å¸¸ç”Ÿæ´»ç±»æ¯” | æ ¸å¿ƒåŠ¨ä½œ | å…³é”®ç‰¹ç‚¹ |
|---------|-------------|---------|---------|
| **read** | æ‰“å¼€ä¹¦æœ¬æŸ¥çœ‹ | æŸ¥çœ‹å†…å®¹ | åªè¯»ã€å¯åå¤æŸ¥çœ‹ |
| **write** | åœ¨çº¸ä¸Šå†™å­— | åˆ›å»º/è¦†ç›– | ä»é›¶å¼€å§‹ã€ä¼šä¸¢å¤±æ—§å†…å®¹ |
| **edit** | ç”¨æ©¡çš®ä¿®æ”¹ | ç²¾ç¡®ä¿®æ”¹ | ä¿ç•™å…¶ä»–å†…å®¹ã€éœ€ç²¾ç¡®å®šä½ |
| **bash** | è¯·åŠ©æ‰‹æ‰§è¡Œä»»åŠ¡ | æ‰§è¡Œæ“ä½œ | å¤šåŠŸèƒ½ã€è¿”å›ç»“æœ |

---

## å·¥ä½œæµç±»æ¯”

### ç±»æ¯” 1ï¼šä¿®å¤ Bug

**TypeScript ç±»æ¯”ï¼š**
```typescript
// 1. è°ƒè¯•æµç¨‹
const code = fs.readFileSync('app.ts', 'utf-8')  // read
const fixed = code.replace(buggyCode, fixedCode) // edit
fs.writeFileSync('app.ts', fixed, 'utf-8')       // edit
execSync('npm test')                             // bash
```

**æ—¥å¸¸ç”Ÿæ´»ç±»æ¯”ï¼š**
```
1. æŸ¥çœ‹è¯´æ˜ä¹¦ï¼ˆreadï¼‰
2. æ‰¾åˆ°é”™è¯¯æ­¥éª¤ï¼ˆåˆ†æï¼‰
3. ä¿®æ”¹æ­¥éª¤ï¼ˆeditï¼‰
4. é‡æ–°æµ‹è¯•ï¼ˆbashï¼‰
```

---

### ç±»æ¯” 2ï¼šæ·»åŠ æ–°åŠŸèƒ½

**TypeScript ç±»æ¯”ï¼š**
```typescript
// 1. å¼€å‘æµç¨‹
const structure = fs.readFileSync('index.ts', 'utf-8') // read
fs.writeFileSync('feature.ts', newFeature, 'utf-8')    // write
const updated = structure + importStatement            // edit
fs.writeFileSync('index.ts', updated, 'utf-8')         // edit
execSync('npm run build')                              // bash
```

**æ—¥å¸¸ç”Ÿæ´»ç±»æ¯”ï¼š**
```
1. æŸ¥çœ‹ç°æœ‰ç»“æ„ï¼ˆreadï¼‰
2. åˆ›å»ºæ–°ç»„ä»¶ï¼ˆwriteï¼‰
3. é›†æˆåˆ°ç³»ç»Ÿï¼ˆeditï¼‰
4. æµ‹è¯•è¿è¡Œï¼ˆbashï¼‰
```

---

## 2025-2026 å®é™…åº”ç”¨ç±»æ¯”

### OpenClaw çš„å·¥å…·ä½¿ç”¨æ¨¡å¼

**ç±»æ¯”ï¼š** OpenClaw ä½¿ç”¨ Pi çš„ 4 ä¸ªå·¥å…·å°±åƒå¨å¸ˆä½¿ç”¨ 4 æŠŠåˆ€

```
read  = åˆ‡èœåˆ€ï¼ˆæŸ¥çœ‹é£Ÿæï¼‰
write = å‰è‚‰åˆ€ï¼ˆåˆ›å»ºæ–°èœï¼‰
edit  = é›•åˆ»åˆ€ï¼ˆç²¾ç»†ä¿®æ”¹ï¼‰
bash  = ä¸‡èƒ½åˆ€ï¼ˆå„ç§æ“ä½œï¼‰
```

**æ¥æºï¼š**
- [What is Pi, the coding agent behind OpenClaw?](https://www.reddit.com/r/coding_agents/comments/1qsldpi/what_is_pi_the_coding_agent_behind_openclaw) - Reddit è®¨è®ºï¼Œ2025

---

### oh-my-pi çš„æ‰©å±•ç±»æ¯”

**ç±»æ¯”ï¼š** oh-my-pi çš„æ‰©å±•å°±åƒç»™å·¥å…·åŠ è£…é…ä»¶

```
åŸºç¡€å·¥å…· = ç‘å£«å†›åˆ€çš„æ ¸å¿ƒåˆ€ç‰‡
Extensions = å¯æ‹†å¸çš„é™„åŠ å·¥å…·
  - Hash-anchored edits = ç²¾ç¡®å®šä½å™¨
  - LSP é›†æˆ = è‡ªåŠ¨æ£€æµ‹å™¨
  - Python å·¥å…· = ä¸“ç”¨åˆ€ç‰‡
```

**æ¥æºï¼š**
- [oh-my-pi GitHub](https://github.com/can1357/oh-my-pi) - å¢å¼ºç‰ˆ Piï¼Œ2025

---

## ç±»æ¯”çš„å±€é™æ€§

### ç±»æ¯”ä¸å®Œç¾çš„åœ°æ–¹

**read å·¥å…·ï¼š**
- âŒ ä¸åƒä¹¦æœ¬ï¼Œread å¯ä»¥è¯»å–å›¾ç‰‡
- âŒ ä¸åƒ `fs.readFile`ï¼Œread æœ‰å†…éƒ¨ URL scheme

**write å·¥å…·ï¼š**
- âŒ ä¸åƒå†™å­—ï¼Œwrite æ˜¯åŸå­æ“ä½œ
- âŒ ä¸åƒ `fs.writeFile`ï¼Œwrite å¯èƒ½è§¦å‘ LSP è¯Šæ–­

**edit å·¥å…·ï¼š**
- âŒ ä¸åƒæ©¡çš®ï¼Œedit å¯èƒ½ä½¿ç”¨ hash-anchored ç­–ç•¥
- âŒ ä¸åƒ `String.replace`ï¼Œedit ç”Ÿæˆ diff

**bash å·¥å…·ï¼š**
- âŒ ä¸åƒåŠ©æ‰‹ï¼Œbash å¯èƒ½åœ¨æ²™ç®±æˆ–è¿œç¨‹æ‰§è¡Œ
- âŒ ä¸åƒ `execSync`ï¼Œbash æ”¯æŒ spawn hooks

---

## è®°å¿†æŠ€å·§

### 4 ä¸ªå·¥å…·çš„è®°å¿†å£è¯€

**æŠ€æœ¯ç‰ˆï¼š**
```
read  = fs.read    (è¯»)
write = fs.write   (å†™)
edit  = str.replace (æ”¹)
bash  = exec       (è·‘)
```

**ç”Ÿæ´»ç‰ˆï¼š**
```
read  = çœ‹ä¹¦ ğŸ“–
write = å†™å­— âœï¸
edit  = æ”¹é”™ âœï¸
bash  = è·‘è…¿ ğŸƒ
```

---

### å·¥å…·é€‰æ‹©å†³ç­–æ ‘

```
éœ€è¦æ“ä½œæ–‡ä»¶ï¼Ÿ
â”œâ”€ åªæ˜¯æŸ¥çœ‹ â†’ read
â”œâ”€ åˆ›å»ºæ–°æ–‡ä»¶ â†’ write
â”œâ”€ ä¿®æ”¹ç°æœ‰æ–‡ä»¶ â†’ edit
â””â”€ æ‰§è¡Œå‘½ä»¤ â†’ bash
```

---

## å®æˆ˜ç»ƒä¹ 

### ç»ƒä¹  1ï¼šç”¨ç±»æ¯”ç†è§£å·¥ä½œæµ

**ä»»åŠ¡ï¼š** ä¿®å¤æµ‹è¯•å¤±è´¥

**TypeScript ç±»æ¯”ï¼š**
```typescript
const testOutput = execSync('npm test')        // bash
const code = fs.readFileSync('app.ts', 'utf-8') // read
const fixed = code.replace(bug, fix)           // edit
fs.writeFileSync('app.ts', fixed, 'utf-8')     // edit
execSync('npm test')                           // bash
```

**æ—¥å¸¸ç”Ÿæ´»ç±»æ¯”ï¼š**
```
1. è¿è¡Œæµ‹è¯•ï¼ˆbashï¼‰= æ£€æŸ¥ä½œä¸š
2. æŸ¥çœ‹ä»£ç ï¼ˆreadï¼‰= ç¿»çœ‹è¯¾æœ¬
3. ä¿®å¤ä»£ç ï¼ˆeditï¼‰= æ”¹æ­£é”™è¯¯
4. é‡æ–°æµ‹è¯•ï¼ˆbashï¼‰= é‡æ–°æ£€æŸ¥
```

---

### ç»ƒä¹  2ï¼šç”¨ç±»æ¯”è®¾è®¡å·¥ä½œæµ

**ä»»åŠ¡ï¼š** æ·»åŠ æ–° API ç«¯ç‚¹

**è®¾è®¡æ€è·¯ï¼š**
1. **read** ç°æœ‰è·¯ç”±ï¼ˆæŸ¥çœ‹èœå•ï¼‰
2. **write** æ–°ç«¯ç‚¹æ–‡ä»¶ï¼ˆåˆ›å»ºæ–°èœï¼‰
3. **edit** è·¯ç”±é…ç½®ï¼ˆæ›´æ–°èœå•ï¼‰
4. **bash** è¿è¡Œæµ‹è¯•ï¼ˆå“å°éªŒè¯ï¼‰

---

## å»¶ä¼¸æ€è€ƒ

### ä¸ºä»€ä¹ˆç±»æ¯”æœ‰æ•ˆï¼Ÿ

**è®¤çŸ¥ç§‘å­¦åŸç†ï¼š**
- äººè„‘é€šè¿‡å…³è”å­¦ä¹ 
- ç†Ÿæ‚‰äº‹ç‰©é™ä½è®¤çŸ¥è´Ÿæ‹…
- å¤šé‡ç¼–ç å¢å¼ºè®°å¿†

**å®è·µéªŒè¯ï¼š**
- TypeScript å¼€å‘è€…é€šè¿‡ Node.js API ç±»æ¯”å¿«é€Ÿç†è§£
- éæŠ€æœ¯äººå‘˜é€šè¿‡æ—¥å¸¸ç”Ÿæ´»ç±»æ¯”å»ºç«‹ç›´è§‰
- åŒé‡ç±»æ¯”è¦†ç›–ä¸åŒèƒŒæ™¯çš„å­¦ä¹ è€…

---

## ä¸‹ä¸€æ­¥å­¦ä¹ 

æŒæ¡ç±»æ¯”åï¼Œå¯ä»¥æ·±å…¥å­¦ä¹ ï¼š

### æ·±å…¥ç†è§£
- [03_æ ¸å¿ƒæ¦‚å¿µ_01_readå·¥å…·è¯¦è§£](./03_æ ¸å¿ƒæ¦‚å¿µ_01_readå·¥å…·è¯¦è§£.md) - read å·¥å…·çš„å®ç°ç»†èŠ‚
- [03_æ ¸å¿ƒæ¦‚å¿µ_03_editå·¥å…·è¯¦è§£](./03_æ ¸å¿ƒæ¦‚å¿µ_03_editå·¥å…·è¯¦è§£.md) - edit å·¥å…·çš„ç¼–è¾‘ç­–ç•¥
- [06_åç›´è§‰ç‚¹](./06_åç›´è§‰ç‚¹.md) - ç±»æ¯”çš„å±€é™æ€§

### å®æˆ˜åº”ç”¨
- [07_å®æˆ˜ä»£ç _05_å·¥å…·ç»„åˆæ¨¡å¼](./07_å®æˆ˜ä»£ç _05_å·¥å…·ç»„åˆæ¨¡å¼.md) - å·¥å…·ç»„åˆçš„å®é™…åº”ç”¨
- [07_å®æˆ˜ä»£ç _07_æ‰©å±•ä¸å®šåˆ¶](./07_å®æˆ˜ä»£ç _07_æ‰©å±•ä¸å®šåˆ¶.md) - æ‰©å±•å·¥å…·èƒ½åŠ›

---

**ç‰ˆæœ¬ï¼š** v1.0
**æœ€åæ›´æ–°ï¼š** 2026-02-19
**ç»´æŠ¤è€…ï¼š** Claude Code
