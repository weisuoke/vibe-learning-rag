# 面试必问

RAG Prompt Engineering 相关的高频面试问题及出彩回答。

---

## 问题1："RAG 系统中，Prompt 设计有哪些关键要素？"

### 普通回答（❌ 不出彩）

"RAG 的 Prompt 主要包括系统提示词和用户问题，需要把检索到的内容放进去让模型回答。"

### 出彩回答（✅ 推荐）

> **RAG Prompt 设计有三个关键要素：**
>
> **1. 系统提示词（System Prompt）**
> - 定义角色：告诉 LLM 它是什么身份
> - 约束信息来源：强调"只基于提供的文档回答"
> - 处理边界情况：明确无法回答时的回复方式
>
> **2. 上下文注入（Context Injection）**
> - 结构化格式：用清晰的分隔符区分不同文档
> - 元数据标注：包含来源、页码等信息便于引用
> - 相关性排序：最相关的内容放在前面
>
> **3. 用户问题模板（Query Template）**
> - 格式化问题：明确问题边界
> - 输出约束：指定期望的回答格式
>
> **在实际项目中**，我发现一个常见问题是注入过多文档导致"Lost in the Middle"——LLM 对中间位置的内容关注度较低。所以我们通常只注入 top-3 到 top-5 最相关的文档，并把最重要的放在开头和结尾。

### 为什么这个回答出彩？

1. ✅ 结构清晰，分层次回答
2. ✅ 每个要素都有具体说明
3. ✅ 提到了实际项目中的经验（Lost in the Middle）
4. ✅ 给出了具体的实践建议（top-3 到 top-5）

---

## 问题2："如何防止 RAG 系统产生幻觉？"

### 普通回答（❌ 不出彩）

"在 Prompt 里告诉模型不要编造信息就行了。"

### 出彩回答（✅ 推荐）

> **防止 RAG 幻觉需要从多个层面入手：**
>
> **1. Prompt 层面的约束**
> ```python
> system_prompt = """
> 只基于提供的文档回答。
> 如果文档中没有相关信息，明确说"文档中未找到相关信息"。
> 不要推测或补充文档中没有的内容。
> """
> ```
>
> **2. 检索质量把控**
> - 设置相关性阈值，过滤低分文档
> - 宁可少注入，不要注入不相关的内容
> - 不相关的内容反而会"诱导"LLM 产生幻觉
>
> **3. 输出验证**
> - 要求 LLM 引用具体来源
> - 对关键信息进行事实核查
> - 可以用另一个 LLM 调用来验证答案是否有文档支撑
>
> **4. 温度参数控制**
> - RAG 场景建议使用较低的 temperature（0.1-0.3）
> - 降低随机性，让输出更确定
>
> **实际经验**：最有效的方法是"强制引用"——要求 LLM 在回答时必须引用文档编号，这样既方便验证，也能让 LLM 更"老实"。

### 为什么这个回答出彩？

1. ✅ 多层面分析，不只是 Prompt
2. ✅ 包含具体代码示例
3. ✅ 提到了温度参数这个技术细节
4. ✅ 分享了"强制引用"这个实用技巧

---

## 问题3："RAG 系统的 Prompt 和普通 Prompt 有什么区别？"

### 普通回答（❌ 不出彩）

"RAG 的 Prompt 需要把检索到的文档放进去。"

### 出彩回答（✅ 推荐）

> **RAG Prompt 和普通 Prompt 有三个核心区别：**
>
> | 维度 | 普通 Prompt | RAG Prompt |
> |------|------------|------------|
> | **信息来源** | LLM 自身知识 | 外部检索的文档 |
> | **核心约束** | 通常没有 | 必须基于文档回答 |
> | **边界处理** | 可以说"我不知道" | 需要区分"文档没有"和"我不知道" |
>
> **具体来说：**
>
> **1. 信息来源约束**
> - 普通 Prompt：LLM 可以自由使用训练知识
> - RAG Prompt：必须明确"只用我给你的内容"
>
> **2. 上下文管理**
> - 普通 Prompt：上下文相对简单
> - RAG Prompt：需要管理多个文档片段，考虑 Token 预算
>
> **3. 可追溯性要求**
> - 普通 Prompt：通常不需要引用来源
> - RAG Prompt：往往需要标注信息来自哪个文档
>
> **本质上**，RAG Prompt 是在"开卷考试"场景下的 Prompt 设计——你给 LLM 一堆参考资料，让它基于这些资料回答问题，而不是凭记忆回答。

### 为什么这个回答出彩？

1. ✅ 用表格清晰对比
2. ✅ 从多个维度分析区别
3. ✅ 用"开卷考试"类比，形象易懂
4. ✅ 提到了可追溯性这个实际需求

---

## 面试加分技巧

### 1. 展示实际经验

```
"在我之前的项目中，我们发现..."
"实际测试下来，最有效的方法是..."
"我们踩过一个坑是..."
```

### 2. 提到具体数字

```
"通常注入 3-5 个文档效果最好"
"temperature 设置在 0.1-0.3 之间"
"系统提示词控制在 200 字以内"
```

### 3. 主动提及权衡

```
"这里有个 trade-off：文档越多信息越全，但也会增加噪声..."
"简洁和完整之间需要平衡..."
```

### 4. 关联其他知识点

```
"这和 Token 限制有关..."
"这涉及到 Transformer 的注意力机制..."
"这需要配合检索器的优化..."
```

---

**下一步：** [09_化骨绵掌](./09_化骨绵掌.md) - 10个2分钟知识卡片
