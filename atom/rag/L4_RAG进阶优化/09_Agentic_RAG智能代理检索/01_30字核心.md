# 30字核心

**Agentic RAG 是让 RAG 系统具备自主推理和迭代检索能力的智能代理架构，通过 RTPM 框架实现主动决策。**

---

## 拆解核心要素

### 1. 什么是 Agentic RAG？

**Agentic RAG = 传统 RAG + 自主 AI 代理（Autonomous AI Agents）**

- **传统 RAG**：被动的、一次性的检索生成
- **Agentic RAG**：主动的、迭代的、智能的检索生成

### 2. 核心能力：RTPM 框架

**RTPM** 是 Agentic RAG 的四大核心能力：

1. **R**eflection（反思）：自我评估和迭代改进
2. **T**ool Use（工具使用）：调用外部工具和 API
3. **P**lanning（规划）：多步骤任务分解
4. **M**ulti-Agent（多代理）：协作式问题求解

### 3. 核心价值：主动决策

**传统 RAG**：
```
用户查询 → 一次性检索 → 直接生成
```

**Agentic RAG**：
```
用户查询 → 分析意图 → 规划策略 → 迭代检索 → 验证结果 → 生成回答
         ↑                                              ↓
         └──────────────── 反思与调整 ──────────────────┘
```

---

## 为什么是这30字？

### 关键词1：自主推理

**不是简单的检索，而是像人类专家一样思考**

- 分解复杂问题
- 选择合适策略
- 验证检索结果
- 迭代优化答案

### 关键词2：迭代检索

**不是一次性检索，而是根据结果动态调整**

- 第一次检索不满意？换个关键词再试
- 检索结果不完整？补充检索
- 检索结果有冲突？交叉验证

### 关键词3：智能代理架构

**不是简单的流程，而是系统性的架构升级**

- **Routing Agent**：智能路由查询
- **Planning Agent**：规划执行步骤
- **ReAct Agent**：推理-行动循环
- **Tool Use**：调用多种工具
- **Multi-Agent**：多代理协作

### 关键词4：RTPM 框架

**不是随意设计，而是有理论支撑的框架**

- **Reflection**：自我评估，持续改进
- **Tool Use**：扩展能力，调用外部资源
- **Planning**：任务分解，有序执行
- **Multi-Agent**：分工协作，专业化处理

### 关键词5：主动决策

**不是被动响应，而是主动思考和行动**

- 主动分析查询意图
- 主动选择检索策略
- 主动验证检索结果
- 主动调整执行计划

---

## 与传统 RAG 的本质区别

| 维度 | 传统 RAG | Agentic RAG |
|------|----------|-------------|
| **检索方式** | 被动、一次性 | 主动、迭代 |
| **决策能力** | 无 | 自主决策 |
| **推理能力** | 无 | 思考-行动-反思循环 |
| **工具使用** | 仅向量检索 | 多种工具（检索、API、计算） |
| **架构复杂度** | 简单流程 | 系统性架构（RTPM） |

---

## 一句话记忆法

**Agentic RAG = 给 RAG 装上"大脑"（推理） + "手脚"（工具） + "团队"（多代理）**

- **大脑**：Planning + Reflection（规划和反思）
- **手脚**：Tool Use（调用工具）
- **团队**：Multi-Agent（协作）

---

## 实际应用场景举例

### 场景1：复杂查询

**用户问**："比较 2023 年和 2024 年 OpenAI 的主要产品发布，并分析市场影响"

**传统 RAG**：
- 一次性检索 "OpenAI 2023 2024 产品发布"
- 可能检索不全
- 直接生成（可能不准确）

**Agentic RAG**：
1. **Planning**：分解为 "2023 产品" + "2024 产品" + "市场影响"
2. **Tool Use**：调用检索工具 3 次
3. **Reflection**：检查是否遗漏重要产品
4. **Tool Use**：补充检索
5. **生成**：基于完整信息生成对比分析

### 场景2：动态知识需求

**用户问**："根据我的阅读历史，推荐相关的技术文章"

**传统 RAG**：
- 检索 "技术文章"（不知道用户偏好）
- 返回通用结果

**Agentic RAG**：
1. **Tool Use**：调用用户画像 API
2. **Planning**：根据偏好规划检索策略
3. **Tool Use**：调用个性化检索工具
4. **Reflection**：评估推荐质量
5. **Tool Use**：调整检索参数
6. **生成**：个性化推荐列表

---

## 性能数据（2025-2026）

| 指标 | 提升幅度 | 来源 |
|------|----------|------|
| **准确率** | +26-78% | Mem0 (2025) |
| **复杂查询准确率** | 5x | LangCopilot (2025) |
| **错误率** | -78% | Cyfuture (2026) |
| **成本** | 3.6x | 行业平均 (2026) |

**结论**：准确率显著提升，但成本更高，适合高价值场景。

---

## 核心框架：RTPM

### Reflection（反思）

**定义**：代理能够评估自己的输出，发现问题并改进

**示例**：
```python
# 伪代码
result = retrieve(query)
if not is_good_enough(result):
    query = improve_query(query)
    result = retrieve(query)  # 再试一次
```

### Tool Use（工具使用）

**定义**：代理能够调用外部工具和 API

**示例**：
```python
# 伪代码
tools = [vector_search, keyword_search, web_api, calculator]
selected_tool = agent.choose_tool(query)
result = selected_tool.execute(query)
```

### Planning（规划）

**定义**：代理能够将复杂任务分解为多个子任务

**示例**：
```python
# 伪代码
plan = agent.create_plan(complex_query)
# plan = ["子任务1", "子任务2", "子任务3"]
results = [execute(task) for task in plan]
final_answer = agent.synthesize(results)
```

### Multi-Agent（多代理）

**定义**：多个专业代理协同工作

**示例**：
```python
# 伪代码
retrieval_agent = Agent("检索专家")
evaluation_agent = Agent("评估专家")
generation_agent = Agent("生成专家")

docs = retrieval_agent.retrieve(query)
quality = evaluation_agent.evaluate(docs)
if quality > threshold:
    answer = generation_agent.generate(docs, query)
```

---

## 适用场景判断

### ✅ 适合 Agentic RAG

- 复杂多步推理查询
- 需要工具调用的任务
- 动态知识需求
- 多轮对话上下文
- 高价值决策支持

### ❌ 不适合 Agentic RAG

- 简单语义查询
- 实时性要求极高
- 成本敏感场景
- 静态知识库

---

## 主流框架（2026）

| 框架 | 核心能力 | 适用场景 |
|------|----------|----------|
| **LangChain** | ReAct agent, 工具集成 | 快速原型开发 |
| **LangGraph** | 状态图编排, 生产级 | 复杂工作流, 企业应用 |
| **LlamaIndex** | Workflow agents | 数据密集型应用 |
| **CrewAI** | 多代理协作 | 团队式任务分工 |
| **Azure AI Search** | 企业级 Agentic RAG | 大规模生产环境 |

---

## 记忆要点

1. **定义**：Agentic RAG = 传统 RAG + 自主 AI 代理
2. **核心**：RTPM 框架（Reflection, Tool Use, Planning, Multi-Agent）
3. **价值**：从被动检索到主动推理
4. **性能**：准确率提升 26-78%，成本增加 3.6x
5. **适用**：复杂查询、高价值场景

---

## 下一步

- 学习 `02_第一性原理.md` - 理解 Agentic RAG 的推理链
- 学习 `03_核心概念_*.md` - 深入理解 RTPM 框架的每个组件
- 学习 `07_实战代码_*.md` - 使用主流框架实现 Agentic RAG

---

**版本**: v1.0
**创建时间**: 2026-02-17
**数据来源**: arXiv 2501.09136, Mem0, LangCopilot, IBM, NVIDIA
