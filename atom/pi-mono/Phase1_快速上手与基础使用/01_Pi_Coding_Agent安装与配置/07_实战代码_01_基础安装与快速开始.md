# å®æˆ˜ä»£ç  01ï¼šåŸºç¡€å®‰è£…ä¸å¿«é€Ÿå¼€å§‹

> **å®æˆ˜ç›®æ ‡**ï¼šå®Œæˆ Pi Coding Agent çš„å®Œæ•´å®‰è£…æµç¨‹ï¼ŒéªŒè¯ç¯å¢ƒé…ç½®ï¼Œè¿è¡Œç¬¬ä¸€ä¸ªå®æˆ˜ç¤ºä¾‹

---

## ä¸€ã€ç¯å¢ƒå‡†å¤‡æ£€æŸ¥è„šæœ¬

### 1.1 ç³»ç»Ÿç¯å¢ƒæ£€æŸ¥

```bash
#!/bin/bash
# check-environment.sh - æ£€æŸ¥ç³»ç»Ÿç¯å¢ƒæ˜¯å¦æ»¡è¶³ Pi å®‰è£…è¦æ±‚

echo "ğŸ” æ£€æŸ¥ Pi Coding Agent å®‰è£…ç¯å¢ƒ..."
echo ""

# æ£€æŸ¥æ“ä½œç³»ç»Ÿ
echo "ğŸ“‹ æ“ä½œç³»ç»Ÿä¿¡æ¯:"
uname -a
echo ""

# æ£€æŸ¥ Node.js ç‰ˆæœ¬
echo "ğŸ“¦ Node.js ç‰ˆæœ¬:"
if command -v node &> /dev/null; then
    node_version=$(node -v)
    echo "âœ… Node.js $node_version"

    # æå–ä¸»ç‰ˆæœ¬å·
    major_version=$(echo $node_version | cut -d'.' -f1 | sed 's/v//')

    if [ "$major_version" -ge 18 ]; then
        echo "âœ… Node.js ç‰ˆæœ¬æ»¡è¶³è¦æ±‚ (>= 18)"
    else
        echo "âŒ Node.js ç‰ˆæœ¬è¿‡ä½ï¼Œéœ€è¦ >= 18"
        echo "   è¯·è®¿é—® https://nodejs.org/ ä¸‹è½½æœ€æ–°ç‰ˆæœ¬"
    fi
else
    echo "âŒ æœªå®‰è£… Node.js"
    echo "   è¯·è®¿é—® https://nodejs.org/ ä¸‹è½½å®‰è£…"
fi
echo ""

# æ£€æŸ¥ npm ç‰ˆæœ¬
echo "ğŸ“¦ npm ç‰ˆæœ¬:"
if command -v npm &> /dev/null; then
    npm_version=$(npm -v)
    echo "âœ… npm $npm_version"
else
    echo "âŒ æœªå®‰è£… npm"
fi
echo ""

# æ£€æŸ¥ç½‘ç»œè¿æ¥
echo "ğŸŒ ç½‘ç»œè¿æ¥:"
if ping -c 1 registry.npmjs.org &> /dev/null; then
    echo "âœ… å¯ä»¥è®¿é—® npm registry"
else
    echo "âš ï¸  æ— æ³•è®¿é—® npm registryï¼Œå¯èƒ½éœ€è¦é…ç½®ä»£ç†"
fi
echo ""

# æ£€æŸ¥ç£ç›˜ç©ºé—´
echo "ğŸ’¾ ç£ç›˜ç©ºé—´:"
df -h . | tail -1 | awk '{print "å¯ç”¨ç©ºé—´: " $4}'
echo ""

# æ£€æŸ¥å·²å®‰è£…çš„ Pi ç‰ˆæœ¬
echo "ğŸ–ï¸ Pi Coding Agent:"
if command -v pi &> /dev/null; then
    pi_version=$(pi --version 2>/dev/null || echo "æœªçŸ¥")
    echo "âœ… å·²å®‰è£… Pi v$pi_version"
else
    echo "âš ï¸  æœªå®‰è£… Pi Coding Agent"
fi
echo ""

echo "âœ¨ ç¯å¢ƒæ£€æŸ¥å®Œæˆï¼"
```

**ä½¿ç”¨æ–¹å¼ï¼š**

```bash
chmod +x check-environment.sh
./check-environment.sh
```

**é¢„æœŸè¾“å‡ºï¼š**

```
ğŸ” æ£€æŸ¥ Pi Coding Agent å®‰è£…ç¯å¢ƒ...

ğŸ“‹ æ“ä½œç³»ç»Ÿä¿¡æ¯:
Darwin MacBook-Pro.local 23.5.0 Darwin Kernel Version 23.5.0

ğŸ“¦ Node.js ç‰ˆæœ¬:
âœ… Node.js v20.11.0
âœ… Node.js ç‰ˆæœ¬æ»¡è¶³è¦æ±‚ (>= 18)

ğŸ“¦ npm ç‰ˆæœ¬:
âœ… npm 10.2.4

ğŸŒ ç½‘ç»œè¿æ¥:
âœ… å¯ä»¥è®¿é—® npm registry

ğŸ’¾ ç£ç›˜ç©ºé—´:
å¯ç”¨ç©ºé—´: 45G

ğŸ–ï¸ Pi Coding Agent:
âš ï¸  æœªå®‰è£… Pi Coding Agent

âœ¨ ç¯å¢ƒæ£€æŸ¥å®Œæˆï¼
```

---

## äºŒã€å®Œæ•´å®‰è£…è„šæœ¬

### 2.1 è‡ªåŠ¨åŒ–å®‰è£…è„šæœ¬

```bash
#!/bin/bash
# install-pi.sh - è‡ªåŠ¨å®‰è£… Pi Coding Agent

set -e  # é‡åˆ°é”™è¯¯ç«‹å³é€€å‡º

echo "ğŸš€ å¼€å§‹å®‰è£… Pi Coding Agent..."
echo ""

# æ£€æŸ¥ Node.js
if ! command -v node &> /dev/null; then
    echo "âŒ æœªå®‰è£… Node.jsï¼Œè¯·å…ˆå®‰è£… Node.js >= 18"
    exit 1
fi

# æ£€æŸ¥ Node.js ç‰ˆæœ¬
node_version=$(node -v | cut -d'.' -f1 | sed 's/v//')
if [ "$node_version" -lt 18 ]; then
    echo "âŒ Node.js ç‰ˆæœ¬è¿‡ä½ (å½“å‰: v$node_version)ï¼Œéœ€è¦ >= 18"
    exit 1
fi

echo "âœ… Node.js ç‰ˆæœ¬æ£€æŸ¥é€šè¿‡"
echo ""

# å®‰è£… Pi
echo "ğŸ“¦ å®‰è£… @mariozechner/pi-coding-agent..."
npm install -g @mariozechner/pi-coding-agent

echo ""
echo "âœ… Pi Coding Agent å®‰è£…å®Œæˆï¼"
echo ""

# éªŒè¯å®‰è£…
echo "ğŸ” éªŒè¯å®‰è£…..."
if command -v pi &> /dev/null; then
    pi_version=$(pi --version 2>/dev/null || echo "æœªçŸ¥")
    echo "âœ… Pi v$pi_version å®‰è£…æˆåŠŸ"
else
    echo "âŒ Pi å®‰è£…å¤±è´¥"
    exit 1
fi

echo ""
echo "ğŸ“š ä¸‹ä¸€æ­¥:"
echo "1. é…ç½® API Key:"
echo "   export ANTHROPIC_API_KEY=sk-ant-..."
echo ""
echo "2. æˆ–ä½¿ç”¨ OAuth ç™»å½•:"
echo "   pi"
echo "   /login"
echo ""
echo "3. è¿è¡Œ Pi:"
echo "   pi"
echo ""
echo "ğŸ‰ å®‰è£…å®Œæˆï¼"
```

**ä½¿ç”¨æ–¹å¼ï¼š**

```bash
chmod +x install-pi.sh
./install-pi.sh
```

### 2.2 å›½å†…é•œåƒå®‰è£…è„šæœ¬

```bash
#!/bin/bash
# install-pi-cn.sh - ä½¿ç”¨å›½å†…é•œåƒå®‰è£… Pi

set -e

echo "ğŸš€ ä½¿ç”¨å›½å†…é•œåƒå®‰è£… Pi Coding Agent..."
echo ""

# é…ç½® npm é•œåƒ
echo "âš™ï¸  é…ç½® npm é•œåƒ..."
npm config set registry https://registry.npmmirror.com

echo "âœ… npm é•œåƒé…ç½®å®Œæˆ"
echo ""

# å®‰è£… Pi
echo "ğŸ“¦ å®‰è£… @mariozechner/pi-coding-agent..."
npm install -g @mariozechner/pi-coding-agent

echo ""
echo "âœ… Pi Coding Agent å®‰è£…å®Œæˆï¼"
echo ""

# æ¢å¤é»˜è®¤é•œåƒï¼ˆå¯é€‰ï¼‰
read -p "æ˜¯å¦æ¢å¤é»˜è®¤ npm é•œåƒï¼Ÿ(y/n) " -n 1 -r
echo
if [[ $REPLY =~ ^[Yy]$ ]]; then
    npm config set registry https://registry.npmjs.org
    echo "âœ… å·²æ¢å¤é»˜è®¤ npm é•œåƒ"
fi

echo ""
echo "ğŸ‰ å®‰è£…å®Œæˆï¼"
```

---

## ä¸‰ã€å®‰è£…éªŒè¯è„šæœ¬

### 3.1 å®Œæ•´éªŒè¯è„šæœ¬

```bash
#!/bin/bash
# verify-installation.sh - éªŒè¯ Pi å®‰è£…æ˜¯å¦æˆåŠŸ

echo "ğŸ” éªŒè¯ Pi Coding Agent å®‰è£…..."
echo ""

# æ£€æŸ¥ pi å‘½ä»¤æ˜¯å¦å¯ç”¨
echo "1ï¸âƒ£ æ£€æŸ¥ pi å‘½ä»¤:"
if command -v pi &> /dev/null; then
    echo "âœ… pi å‘½ä»¤å¯ç”¨"
else
    echo "âŒ pi å‘½ä»¤ä¸å¯ç”¨"
    echo "   è¯·æ£€æŸ¥ npm å…¨å±€å®‰è£…è·¯å¾„æ˜¯å¦åœ¨ PATH ä¸­"
    echo "   è¿è¡Œ: npm config get prefix"
    exit 1
fi
echo ""

# æ£€æŸ¥ç‰ˆæœ¬
echo "2ï¸âƒ£ æ£€æŸ¥ç‰ˆæœ¬:"
pi_version=$(pi --version 2>/dev/null)
if [ $? -eq 0 ]; then
    echo "âœ… Pi v$pi_version"
else
    echo "âŒ æ— æ³•è·å–ç‰ˆæœ¬ä¿¡æ¯"
    exit 1
fi
echo ""

# æ£€æŸ¥å¸®åŠ©ä¿¡æ¯
echo "3ï¸âƒ£ æ£€æŸ¥å¸®åŠ©ä¿¡æ¯:"
if pi --help &> /dev/null; then
    echo "âœ… å¸®åŠ©ä¿¡æ¯å¯ç”¨"
else
    echo "âŒ æ— æ³•æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯"
    exit 1
fi
echo ""

# æ£€æŸ¥é…ç½®ç›®å½•
echo "4ï¸âƒ£ æ£€æŸ¥é…ç½®ç›®å½•:"
config_dir="$HOME/.pi/agent"
if [ -d "$config_dir" ]; then
    echo "âœ… é…ç½®ç›®å½•å­˜åœ¨: $config_dir"
else
    echo "âš ï¸  é…ç½®ç›®å½•ä¸å­˜åœ¨ï¼Œå°†åœ¨é¦–æ¬¡è¿è¡Œæ—¶åˆ›å»º"
fi
echo ""

# æ£€æŸ¥ API Key é…ç½®
echo "5ï¸âƒ£ æ£€æŸ¥ API Key é…ç½®:"
if [ -n "$ANTHROPIC_API_KEY" ]; then
    echo "âœ… ANTHROPIC_API_KEY å·²è®¾ç½®"
elif [ -n "$OPENAI_API_KEY" ]; then
    echo "âœ… OPENAI_API_KEY å·²è®¾ç½®"
else
    echo "âš ï¸  æœªè®¾ç½® API Key"
    echo "   è¯·è®¾ç½®ç¯å¢ƒå˜é‡æˆ–ä½¿ç”¨ /login å‘½ä»¤"
fi
echo ""

echo "âœ¨ éªŒè¯å®Œæˆï¼"
echo ""
echo "ğŸ“š å¿«é€Ÿå¼€å§‹:"
echo "   pi --help"
echo "   pi"
```

**ä½¿ç”¨æ–¹å¼ï¼š**

```bash
chmod +x verify-installation.sh
./verify-installation.sh
```

---

## å››ã€é¦–æ¬¡è¿è¡Œç¤ºä¾‹

### 4.1 ä½¿ç”¨ API Key è¿è¡Œ

```bash
#!/bin/bash
# first-run-api-key.sh - ä½¿ç”¨ API Key é¦–æ¬¡è¿è¡Œ Pi

echo "ğŸ–ï¸ é¦–æ¬¡è¿è¡Œ Pi Coding Agent (API Key æ¨¡å¼)"
echo ""

# æ£€æŸ¥ API Key
if [ -z "$ANTHROPIC_API_KEY" ] && [ -z "$OPENAI_API_KEY" ]; then
    echo "âŒ æœªè®¾ç½® API Key"
    echo ""
    echo "è¯·è®¾ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ä¹‹ä¸€:"
    echo "  export ANTHROPIC_API_KEY=sk-ant-..."
    echo "  export OPENAI_API_KEY=sk-proj-..."
    echo ""
    exit 1
fi

echo "âœ… API Key å·²è®¾ç½®"
echo ""

# åˆ›å»ºæµ‹è¯•ç›®å½•
test_dir="$HOME/pi-test"
mkdir -p "$test_dir"
cd "$test_dir"

echo "ğŸ“ æµ‹è¯•ç›®å½•: $test_dir"
echo ""

# åˆ›å»ºæµ‹è¯•æ–‡ä»¶
cat > hello.js << 'EOF'
// ç®€å•çš„ Hello World ç¨‹åº
function greet(name) {
    return `Hello, ${name}!`;
}

console.log(greet('World'));
EOF

echo "âœ… åˆ›å»ºæµ‹è¯•æ–‡ä»¶: hello.js"
echo ""

# è¿è¡Œ Pi (éäº¤äº’æ¨¡å¼)
echo "ğŸ¤– è¿è¡Œ Pi åˆ†æä»£ç ..."
echo ""

pi --print "åˆ†æ hello.js æ–‡ä»¶ï¼Œè§£é‡Šä»£ç åŠŸèƒ½"

echo ""
echo "âœ¨ é¦–æ¬¡è¿è¡Œå®Œæˆï¼"
echo ""
echo "ğŸ“š ä¸‹ä¸€æ­¥:"
echo "1. è¿›å…¥äº¤äº’æ¨¡å¼: pi"
echo "2. å°è¯•ä¿®æ”¹ä»£ç : pi"
echo "   > å¸®æˆ‘ç»™ greet å‡½æ•°æ·»åŠ ç±»å‹æ³¨è§£"
```

### 4.2 ä½¿ç”¨ OAuth ç™»å½•è¿è¡Œ

```bash
#!/bin/bash
# first-run-oauth.sh - ä½¿ç”¨ OAuth é¦–æ¬¡è¿è¡Œ Pi

echo "ğŸ–ï¸ é¦–æ¬¡è¿è¡Œ Pi Coding Agent (OAuth æ¨¡å¼)"
echo ""

echo "ğŸ“ OAuth ç™»å½•æ­¥éª¤:"
echo "1. è¿è¡Œ pi å‘½ä»¤"
echo "2. è¾“å…¥ /login"
echo "3. é€‰æ‹© Provider (å¦‚ Anthropic Claude Pro)"
echo "4. æµè§ˆå™¨ä¼šè‡ªåŠ¨æ‰“å¼€æˆæƒé¡µé¢"
echo "5. ç™»å½•å¹¶æˆæƒ"
echo "6. è¿”å›ç»ˆç«¯ï¼Œè®¤è¯å®Œæˆ"
echo ""

read -p "æŒ‰ Enter é”®å¯åŠ¨ Pi..." -r
echo ""

# å¯åŠ¨ Pi
pi
```

---

## äº”ã€å®æˆ˜ç¤ºä¾‹ï¼šåˆ›å»ºç¬¬ä¸€ä¸ªé¡¹ç›®

### 5.1 é¡¹ç›®åˆå§‹åŒ–è„šæœ¬

```bash
#!/bin/bash
# create-first-project.sh - åˆ›å»ºç¬¬ä¸€ä¸ª Pi é¡¹ç›®

set -e

echo "ğŸš€ åˆ›å»ºç¬¬ä¸€ä¸ª Pi é¡¹ç›®"
echo ""

# é¡¹ç›®åç§°
read -p "é¡¹ç›®åç§° (é»˜è®¤: my-pi-project): " project_name
project_name=${project_name:-my-pi-project}

# åˆ›å»ºé¡¹ç›®ç›®å½•
mkdir -p "$project_name"
cd "$project_name"

echo "âœ… åˆ›å»ºé¡¹ç›®ç›®å½•: $project_name"
echo ""

# åˆå§‹åŒ– npm é¡¹ç›®
echo "ğŸ“¦ åˆå§‹åŒ– npm é¡¹ç›®..."
npm init -y

# å®‰è£…ä¾èµ–
echo "ğŸ“¦ å®‰è£… TypeScript..."
npm install --save-dev typescript @types/node

# åˆ›å»º tsconfig.json
echo "âš™ï¸  åˆ›å»º tsconfig.json..."
cat > tsconfig.json << 'EOF'
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "commonjs",
    "lib": ["ES2020"],
    "outDir": "./dist",
    "rootDir": "./src",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules", "dist"]
}
EOF

# åˆ›å»ºé¡¹ç›®ç»“æ„
echo "ğŸ“ åˆ›å»ºé¡¹ç›®ç»“æ„..."
mkdir -p src

# åˆ›å»ºç¤ºä¾‹æ–‡ä»¶
cat > src/index.ts << 'EOF'
// ç¤ºä¾‹ TypeScript æ–‡ä»¶
interface User {
    id: number;
    name: string;
    email: string;
}

function createUser(name: string, email: string): User {
    return {
        id: Date.now(),
        name,
        email
    };
}

const user = createUser('Alice', 'alice@example.com');
console.log('Created user:', user);
EOF

# åˆ›å»º AGENTS.md
echo "ğŸ“ åˆ›å»º AGENTS.md..."
cat > AGENTS.md << 'EOF'
# é¡¹ç›®ä¸Šä¸‹æ–‡

## é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ª TypeScript ç¤ºä¾‹é¡¹ç›®ï¼Œç”¨äºæ¼”ç¤º Pi Coding Agent çš„åŸºæœ¬ä½¿ç”¨ã€‚

## æŠ€æœ¯æ ˆ

- **è¯­è¨€**: TypeScript
- **è¿è¡Œæ—¶**: Node.js
- **åŒ…ç®¡ç†**: npm

## ç¼–ç è§„èŒƒ

- ä½¿ç”¨ TypeScript ä¸¥æ ¼æ¨¡å¼
- ä½¿ç”¨ interface å®šä¹‰ç±»å‹
- å‡½æ•°ä½¿ç”¨ camelCase å‘½å
- ç±»å‹ä½¿ç”¨ PascalCase å‘½å

## å¸¸ç”¨å‘½ä»¤

```bash
# ç¼–è¯‘
npm run build

# è¿è¡Œ
npm start
```
EOF

# åˆ›å»º .pi/settings.json
echo "âš™ï¸  åˆ›å»º Pi é…ç½®..."
mkdir -p .pi
cat > .pi/settings.json << 'EOF'
{
  "provider": "anthropic",
  "model": "claude-sonnet-4",
  "thinkingLevel": "normal"
}
EOF

# æ›´æ–° package.json scripts
echo "âš™ï¸  é…ç½® npm scripts..."
npm pkg set scripts.build="tsc"
npm pkg set scripts.start="node dist/index.js"

# åˆ›å»º .gitignore
echo "ğŸ“ åˆ›å»º .gitignore..."
cat > .gitignore << 'EOF'
node_modules/
dist/
.pi/sessions/
.pi/auth.json
.env
EOF

echo ""
echo "âœ… é¡¹ç›®åˆ›å»ºå®Œæˆï¼"
echo ""
echo "ğŸ“ é¡¹ç›®ç»“æ„:"
tree -L 2 -I 'node_modules'
echo ""
echo "ğŸ“š ä¸‹ä¸€æ­¥:"
echo "1. è¿›å…¥é¡¹ç›®ç›®å½•: cd $project_name"
echo "2. å¯åŠ¨ Pi: pi"
echo "3. å°è¯•ä»»åŠ¡:"
echo "   > å¸®æˆ‘æ·»åŠ ä¸€ä¸ª updateUser å‡½æ•°"
echo "   > ä¸º User æ¥å£æ·»åŠ  createdAt å­—æ®µ"
echo ""
```

### 5.2 é¡¹ç›®ä½¿ç”¨ç¤ºä¾‹

```bash
#!/bin/bash
# use-pi-in-project.sh - åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ Pi çš„ç¤ºä¾‹

cd my-pi-project

echo "ğŸ–ï¸ åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ Pi Coding Agent"
echo ""

# ç¤ºä¾‹ 1: æ·»åŠ æ–°åŠŸèƒ½
echo "ç¤ºä¾‹ 1: æ·»åŠ æ–°åŠŸèƒ½"
echo "-------------------"
echo "å‘½ä»¤: pi --print \"æ·»åŠ ä¸€ä¸ª deleteUser å‡½æ•°\""
echo ""

pi --print "åœ¨ src/index.ts ä¸­æ·»åŠ ä¸€ä¸ª deleteUser å‡½æ•°ï¼Œæ¥å— userId å‚æ•°ï¼Œè¿”å› boolean"

echo ""
echo "-------------------"
echo ""

# ç¤ºä¾‹ 2: ä»£ç é‡æ„
echo "ç¤ºä¾‹ 2: ä»£ç é‡æ„"
echo "-------------------"
echo "å‘½ä»¤: pi --print \"é‡æ„ createUser å‡½æ•°\""
echo ""

pi --print "é‡æ„ src/index.ts ä¸­çš„ createUser å‡½æ•°ï¼Œæ·»åŠ è¾“å…¥éªŒè¯"

echo ""
echo "-------------------"
echo ""

# ç¤ºä¾‹ 3: æ·»åŠ æµ‹è¯•
echo "ç¤ºä¾‹ 3: æ·»åŠ æµ‹è¯•"
echo "-------------------"
echo "å‘½ä»¤: pi --print \"ä¸º createUser æ·»åŠ æµ‹è¯•\""
echo ""

pi --print "ä¸º src/index.ts ä¸­çš„ createUser å‡½æ•°åˆ›å»ºæµ‹è¯•æ–‡ä»¶"

echo ""
echo "âœ¨ ç¤ºä¾‹å®Œæˆï¼"
```

---

## å…­ã€æ•…éšœæ’æŸ¥è„šæœ¬

### 6.1 å¸¸è§é—®é¢˜è¯Šæ–­

```bash
#!/bin/bash
# troubleshoot.sh - Pi å®‰è£…æ•…éšœæ’æŸ¥

echo "ğŸ”§ Pi Coding Agent æ•…éšœæ’æŸ¥"
echo ""

# é—®é¢˜ 1: pi å‘½ä»¤æœªæ‰¾åˆ°
echo "é—®é¢˜ 1: pi å‘½ä»¤æœªæ‰¾åˆ°"
echo "-------------------"
if ! command -v pi &> /dev/null; then
    echo "âŒ pi å‘½ä»¤ä¸å¯ç”¨"
    echo ""
    echo "è§£å†³æ–¹æ¡ˆ:"
    echo "1. æ£€æŸ¥å…¨å±€å®‰è£…è·¯å¾„:"
    npm_prefix=$(npm config get prefix)
    echo "   npm prefix: $npm_prefix"
    echo ""
    echo "2. æ£€æŸ¥ PATH:"
    echo "   å½“å‰ PATH: $PATH"
    echo ""
    echo "3. æ·»åŠ åˆ° PATH (å¦‚æœéœ€è¦):"
    echo "   export PATH=\"$npm_prefix/bin:\$PATH\""
    echo "   echo 'export PATH=\"$npm_prefix/bin:\$PATH\"' >> ~/.bashrc"
    echo ""
else
    echo "âœ… pi å‘½ä»¤å¯ç”¨"
fi
echo ""

# é—®é¢˜ 2: æƒé™é”™è¯¯
echo "é—®é¢˜ 2: æƒé™é”™è¯¯"
echo "-------------------"
if [ ! -w "$(npm config get prefix)" ]; then
    echo "âš ï¸  npm å…¨å±€ç›®å½•æ— å†™æƒé™"
    echo ""
    echo "è§£å†³æ–¹æ¡ˆ:"
    echo "1. ä½¿ç”¨ sudo (ä¸æ¨è):"
    echo "   sudo npm install -g @mariozechner/pi-coding-agent"
    echo ""
    echo "2. ä¿®æ”¹ npm å…¨å±€ç›®å½• (æ¨è):"
    echo "   mkdir -p ~/.npm-global"
    echo "   npm config set prefix '~/.npm-global'"
    echo "   echo 'export PATH=~/.npm-global/bin:\$PATH' >> ~/.bashrc"
    echo "   source ~/.bashrc"
    echo "   npm install -g @mariozechner/pi-coding-agent"
    echo ""
else
    echo "âœ… npm å…¨å±€ç›®å½•æœ‰å†™æƒé™"
fi
echo ""

# é—®é¢˜ 3: ç½‘ç»œé—®é¢˜
echo "é—®é¢˜ 3: ç½‘ç»œé—®é¢˜"
echo "-------------------"
if ! ping -c 1 registry.npmjs.org &> /dev/null; then
    echo "âŒ æ— æ³•è®¿é—® npm registry"
    echo ""
    echo "è§£å†³æ–¹æ¡ˆ:"
    echo "1. æ£€æŸ¥ç½‘ç»œè¿æ¥"
    echo "2. é…ç½®ä»£ç†:"
    echo "   npm config set proxy http://proxy.example.com:8080"
    echo "   npm config set https-proxy http://proxy.example.com:8080"
    echo ""
    echo "3. ä½¿ç”¨å›½å†…é•œåƒ:"
    echo "   npm config set registry https://registry.npmmirror.com"
    echo ""
else
    echo "âœ… ç½‘ç»œè¿æ¥æ­£å¸¸"
fi
echo ""

# é—®é¢˜ 4: Node.js ç‰ˆæœ¬è¿‡ä½
echo "é—®é¢˜ 4: Node.js ç‰ˆæœ¬"
echo "-------------------"
node_version=$(node -v | cut -d'.' -f1 | sed 's/v//')
if [ "$node_version" -lt 18 ]; then
    echo "âŒ Node.js ç‰ˆæœ¬è¿‡ä½ (å½“å‰: v$node_version)"
    echo ""
    echo "è§£å†³æ–¹æ¡ˆ:"
    echo "1. ä½¿ç”¨ nvm å®‰è£…æ–°ç‰ˆæœ¬:"
    echo "   nvm install 20"
    echo "   nvm use 20"
    echo ""
    echo "2. æˆ–ä»å®˜ç½‘ä¸‹è½½:"
    echo "   https://nodejs.org/"
    echo ""
else
    echo "âœ… Node.js ç‰ˆæœ¬æ»¡è¶³è¦æ±‚ (v$node_version)"
fi
echo ""

echo "âœ¨ æ•…éšœæ’æŸ¥å®Œæˆï¼"
```

### 6.2 æ¸…ç†é‡è£…è„šæœ¬

```bash
#!/bin/bash
# clean-reinstall.sh - æ¸…ç†å¹¶é‡æ–°å®‰è£… Pi

echo "ğŸ§¹ æ¸…ç†å¹¶é‡æ–°å®‰è£… Pi Coding Agent"
echo ""

read -p "ç¡®è®¤è¦æ¸…ç†å¹¶é‡æ–°å®‰è£…å—ï¼Ÿ(y/n) " -n 1 -r
echo
if [[ ! $REPLY =~ ^[Yy]$ ]]; then
    echo "å–æ¶ˆæ“ä½œ"
    exit 0
fi

# å¸è½½ Pi
echo "1ï¸âƒ£ å¸è½½ Pi..."
npm uninstall -g @mariozechner/pi-coding-agent
echo "âœ… å¸è½½å®Œæˆ"
echo ""

# æ¸…ç† npm ç¼“å­˜
echo "2ï¸âƒ£ æ¸…ç† npm ç¼“å­˜..."
npm cache clean --force
echo "âœ… ç¼“å­˜æ¸…ç†å®Œæˆ"
echo ""

# åˆ é™¤é…ç½®ç›®å½•ï¼ˆå¯é€‰ï¼‰
read -p "æ˜¯å¦åˆ é™¤é…ç½®ç›®å½• ~/.pi/agentï¼Ÿ(y/n) " -n 1 -r
echo
if [[ $REPLY =~ ^[Yy]$ ]]; then
    rm -rf ~/.pi/agent
    echo "âœ… é…ç½®ç›®å½•å·²åˆ é™¤"
fi
echo ""

# é‡æ–°å®‰è£…
echo "3ï¸âƒ£ é‡æ–°å®‰è£… Pi..."
npm install -g @mariozechner/pi-coding-agent
echo "âœ… å®‰è£…å®Œæˆ"
echo ""

# éªŒè¯
echo "4ï¸âƒ£ éªŒè¯å®‰è£…..."
if command -v pi &> /dev/null; then
    pi_version=$(pi --version 2>/dev/null)
    echo "âœ… Pi v$pi_version å®‰è£…æˆåŠŸ"
else
    echo "âŒ å®‰è£…å¤±è´¥"
    exit 1
fi

echo ""
echo "ğŸ‰ æ¸…ç†é‡è£…å®Œæˆï¼"
```

---

## ä¸ƒã€å¿«é€Ÿå‚è€ƒå¡ç‰‡

### 7.1 å®‰è£…å‘½ä»¤é€ŸæŸ¥

```bash
# åŸºç¡€å®‰è£…
npm install -g @mariozechner/pi-coding-agent

# éªŒè¯å®‰è£…
pi --version
pi --help

# é¦–æ¬¡è¿è¡Œ
export ANTHROPIC_API_KEY=sk-ant-...
pi

# æˆ–ä½¿ç”¨ OAuth
pi
/login

# æ›´æ–° Pi
npm update -g @mariozechner/pi-coding-agent

# å¸è½½ Pi
npm uninstall -g @mariozechner/pi-coding-agent
```

### 7.2 å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥

```bash
# äº¤äº’æ¨¡å¼
pi

# ç»§ç»­ä¸Šæ¬¡ä¼šè¯
pi -c

# æ¢å¤å†å²ä¼šè¯
pi -r

# æŒ‡å®šæ¨¡å‹
pi --model claude-opus-4

# ä¸€æ¬¡æ€§ä»»åŠ¡
pi --print "ä½ çš„é—®é¢˜"

# JSON è¾“å‡ºæ¨¡å¼
pi --json "ä½ çš„é—®é¢˜"

# å¸®åŠ©ä¿¡æ¯
pi --help
```

---

## å…«ã€æ€»ç»“

### 8.1 å®‰è£…æ£€æŸ¥æ¸…å•

- [ ] Node.js >= 18 å·²å®‰è£…
- [ ] npm å¯ç”¨
- [ ] ç½‘ç»œè¿æ¥æ­£å¸¸
- [ ] Pi å…¨å±€å®‰è£…æˆåŠŸ
- [ ] pi å‘½ä»¤å¯ç”¨
- [ ] API Key å·²é…ç½®æˆ– OAuth å·²ç™»å½•
- [ ] é¦–æ¬¡è¿è¡ŒæˆåŠŸ

### 8.2 ä¸‹ä¸€æ­¥

1. **é…ç½® Provider**ï¼šå­¦ä¹  Anthropicã€OpenAI ç­‰ Provider çš„é…ç½®
2. **é¡¹ç›®é…ç½®**ï¼šåˆ›å»º `.pi/settings.json` å’Œ `AGENTS.md`
3. **å®æˆ˜ç»ƒä¹ **ï¼šåœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨ Pi

---

**å‚è€ƒèµ„æ–™ï¼š**
- [Pi Coding Agent NPM](https://www.npmjs.com/package/@mariozechner/pi-coding-agent)
- [Pi GitHub Repository](https://github.com/badlogic/pi-mono)
- [Pi Official Website](https://shittycodingagent.ai/)

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0 (2026-02-18)
