# RAGæ£€ç´¢é“¾ - åŒé‡ç±»æ¯”

> ç”¨å‰ç«¯å¼€å‘å’Œæ—¥å¸¸ç”Ÿæ´»çš„ç±»æ¯”ï¼Œç†è§£ RAG çš„æ ¸å¿ƒæ¦‚å¿µ

---

## ç±»æ¯”1ï¼šRAG æ•´ä½“æµç¨‹

### å‰ç«¯ç±»æ¯”ï¼šAPI è°ƒç”¨ + æ•°æ®å¤„ç† + æ¸²æŸ“

```typescript
// å‰ç«¯ï¼šè·å–æ•°æ® â†’ å¤„ç† â†’ æ¸²æŸ“
async function displayUserInfo(userId: string) {
  // 1. è°ƒç”¨ API è·å–æ•°æ®
  const response = await fetch(`/api/users/${userId}`);
  const data = await response.json();

  // 2. å¤„ç†æ•°æ®
  const processedData = processUserData(data);

  // 3. æ¸²æŸ“åˆ°é¡µé¢
  renderUserCard(processedData);
}
```

```python
# RAGï¼šæ£€ç´¢æ–‡æ¡£ â†’ æ³¨å…¥ä¸Šä¸‹æ–‡ â†’ ç”Ÿæˆç­”æ¡ˆ
async def answer_question(question: str):
    # 1. æ£€ç´¢ç›¸å…³æ–‡æ¡£
    docs = retriever.search(question)

    # 2. æ³¨å…¥åˆ°ä¸Šä¸‹æ–‡
    context = "\n".join([doc.content for doc in docs])

    # 3. LLM ç”Ÿæˆç­”æ¡ˆ
    answer = llm.generate(f"åŸºäºæ–‡æ¡£ï¼š{context}\né—®é¢˜ï¼š{question}")
    return answer
```

**ç›¸ä¼¼ç‚¹**ï¼š
- éƒ½æ˜¯ä¸‰æ­¥æµç¨‹ï¼šè·å– â†’ å¤„ç† â†’ è¾“å‡º
- éƒ½éœ€è¦å…ˆæ‹¿åˆ°æ•°æ®ï¼Œå†åŸºäºæ•°æ®ç”Ÿæˆç»“æœ
- éƒ½å¯ä»¥ç¼“å­˜ä¸­é—´ç»“æœä¼˜åŒ–æ€§èƒ½

### æ—¥å¸¸ç”Ÿæ´»ç±»æ¯”ï¼šæŸ¥å­—å…¸

```
1. æ£€ç´¢ï¼šåœ¨å­—å…¸é‡Œæ‰¾åˆ°"RAG"è¿™ä¸ªè¯
2. å¢å¼ºï¼šé˜…è¯»å­—å…¸ä¸­çš„å®šä¹‰å’Œä¾‹å¥
3. ç”Ÿæˆï¼šç”¨è‡ªå·±çš„è¯è§£é‡Šç»™åˆ«äººå¬
```

**å…³é”®æ´å¯Ÿ**ï¼š
- RAG ä¸æ˜¯"æœç´¢å¼•æ“"ï¼ˆåªè¿”å›é“¾æ¥ï¼‰
- RAG æ˜¯"æ™ºèƒ½åŠ©æ‰‹"ï¼ˆç†è§£æ–‡æ¡£åå›ç­”ï¼‰

---

## ç±»æ¯”2ï¼šEmbeddingï¼ˆå‘é‡åŒ–ï¼‰

### å‰ç«¯ç±»æ¯”ï¼šå›¾ç‰‡å“ˆå¸Œ / å†…å®¹æŒ‡çº¹

```typescript
// å‰ç«¯ï¼šè®¡ç®—å›¾ç‰‡çš„å“ˆå¸Œå€¼
function getImageHash(image: File): string {
  // ç›¸ä¼¼çš„å›¾ç‰‡ â†’ ç›¸ä¼¼çš„å“ˆå¸Œå€¼
  return computePerceptualHash(image);
}

// æ¯”è¾ƒä¸¤å¼ å›¾ç‰‡æ˜¯å¦ç›¸ä¼¼
function areSimilar(hash1: string, hash2: string): boolean {
  return hammingDistance(hash1, hash2) < threshold;
}
```

```python
# RAGï¼šè®¡ç®—æ–‡æœ¬çš„å‘é‡
def get_embedding(text: str) -> List[float]:
    # ç›¸ä¼¼çš„æ–‡æœ¬ â†’ ç›¸ä¼¼çš„å‘é‡
    return embedding_model.embed(text)

# æ¯”è¾ƒä¸¤æ®µæ–‡æœ¬æ˜¯å¦ç›¸ä¼¼
def are_similar(vec1: List[float], vec2: List[float]) -> bool:
    return cosine_similarity(vec1, vec2) > threshold
```

**ç›¸ä¼¼ç‚¹**ï¼š
- éƒ½æ˜¯æŠŠå¤æ‚å¯¹è±¡è½¬æ¢ä¸ºæ•°å­—è¡¨ç¤º
- ç›¸ä¼¼çš„è¾“å…¥ â†’ ç›¸ä¼¼çš„è¾“å‡º
- å¯ä»¥å¿«é€Ÿæ¯”è¾ƒç›¸ä¼¼åº¦

### æ—¥å¸¸ç”Ÿæ´»ç±»æ¯”ï¼šç»™ä¹¦æ‰“æ ‡ç­¾

```
åŸå§‹ä¹¦ç±ï¼šã€ŠPython ç¼–ç¨‹ä»å…¥é—¨åˆ°ç²¾é€šã€‹
æ ‡ç­¾ï¼ˆå‘é‡ï¼‰ï¼š[ç¼–ç¨‹=0.9, Python=0.95, å…¥é—¨=0.8, æ•™ç¨‹=0.85]

åŸå§‹ä¹¦ç±ï¼šã€ŠJava æ ¸å¿ƒæŠ€æœ¯ã€‹
æ ‡ç­¾ï¼ˆå‘é‡ï¼‰ï¼š[ç¼–ç¨‹=0.9, Java=0.95, è¿›é˜¶=0.7, æŠ€æœ¯=0.8]

ç›¸ä¼¼åº¦ï¼šéƒ½æ˜¯ç¼–ç¨‹ä¹¦ï¼Œä½†è¯­è¨€ä¸åŒ
```

**å…³é”®æ´å¯Ÿ**ï¼š
- Embedding ä¸æ˜¯å…³é”®è¯æå–ï¼ˆä¸æ˜¯ç®€å•çš„è¯é¢‘ç»Ÿè®¡ï¼‰
- Embedding æ•æ‰è¯­ä¹‰ï¼ˆ"å¿«é€Ÿ"å’Œ"è¿…é€Ÿ"çš„å‘é‡å¾ˆæ¥è¿‘ï¼‰

---

## ç±»æ¯”3ï¼šå‘é‡æ•°æ®åº“

### å‰ç«¯ç±»æ¯”ï¼šå¸¦ç´¢å¼•çš„ localStorage

```typescript
// å‰ç«¯ï¼šlocalStorage + ç´¢å¼•
class IndexedStorage {
  private index: Map<string, string[]> = new Map();

  // å­˜å‚¨æ•°æ®å¹¶å»ºç«‹ç´¢å¼•
  set(key: string, value: string, tags: string[]) {
    localStorage.setItem(key, value);

    // å»ºç«‹æ ‡ç­¾ç´¢å¼•
    tags.forEach(tag => {
      if (!this.index.has(tag)) {
        this.index.set(tag, []);
      }
      this.index.get(tag)!.push(key);
    });
  }

  // æ ¹æ®æ ‡ç­¾å¿«é€ŸæŸ¥æ‰¾
  findByTag(tag: string): string[] {
    const keys = this.index.get(tag) || [];
    return keys.map(key => localStorage.getItem(key)!);
  }
}
```

```python
# RAGï¼šå‘é‡æ•°æ®åº“
class VectorStore:
    def __init__(self):
        self.vectors = []  # å­˜å‚¨å‘é‡
        self.documents = []  # å­˜å‚¨åŸå§‹æ–‡æ¡£

    # å­˜å‚¨æ–‡æ¡£å¹¶å‘é‡åŒ–
    def add(self, document: str):
        vector = embedding_model.embed(document)
        self.vectors.append(vector)
        self.documents.append(document)

    # æ ¹æ®ç›¸ä¼¼åº¦å¿«é€ŸæŸ¥æ‰¾
    def search(self, query: str, k: int = 3):
        query_vector = embedding_model.embed(query)
        similarities = [
            cosine_similarity(query_vector, vec)
            for vec in self.vectors
        ]
        top_k_indices = sorted(
            range(len(similarities)),
            key=lambda i: similarities[i],
            reverse=True
        )[:k]
        return [self.documents[i] for i in top_k_indices]
```

**ç›¸ä¼¼ç‚¹**ï¼š
- éƒ½æ˜¯å­˜å‚¨ + å¿«é€Ÿæ£€ç´¢
- éƒ½éœ€è¦å»ºç«‹ç´¢å¼•åŠ é€ŸæŸ¥è¯¢
- éƒ½æ”¯æŒæŒ‰æ¡ä»¶è¿‡æ»¤

### æ—¥å¸¸ç”Ÿæ´»ç±»æ¯”ï¼šå›¾ä¹¦é¦†çš„åˆ†ç±»ç³»ç»Ÿ

```
ä¼ ç»Ÿå›¾ä¹¦é¦†ï¼šæŒ‰ä¹¦åå­—æ¯é¡ºåºæ’åˆ—
â†’ æ‰¾"Python æ•™ç¨‹"å¾ˆå¿«ï¼Œä½†æ‰¾"ç¼–ç¨‹å…¥é—¨ä¹¦"å¾ˆéš¾

å‘é‡æ•°æ®åº“ï¼šæŒ‰ä¸»é¢˜ç›¸ä¼¼åº¦æ’åˆ—
â†’ è¾“å…¥"æˆ‘æƒ³å­¦ç¼–ç¨‹"ï¼Œè‡ªåŠ¨æ‰¾åˆ°æ‰€æœ‰ç¼–ç¨‹ç›¸å…³çš„ä¹¦
â†’ å³ä½¿ä¹¦åä¸åŒ…å«"ç¼–ç¨‹"äºŒå­—
```

**å…³é”®æ´å¯Ÿ**ï¼š
- å‘é‡æ•°æ®åº“ä¸æ˜¯å…³ç³»æ•°æ®åº“ï¼ˆä¸æ˜¯ SQL æŸ¥è¯¢ï¼‰
- å‘é‡æ•°æ®åº“æ˜¯è¯­ä¹‰æœç´¢å¼•æ“ï¼ˆç†è§£"æ„æ€"è€Œé"å­—é¢"ï¼‰

---

## ç±»æ¯”4ï¼šæ–‡æ¡£åˆ†å—ï¼ˆChunkingï¼‰

### å‰ç«¯ç±»æ¯”ï¼šè™šæ‹Ÿæ»šåŠ¨ / æ‡’åŠ è½½

```typescript
// å‰ç«¯ï¼šé•¿åˆ—è¡¨åˆ†é¡µåŠ è½½
function VirtualList({ items }: { items: string[] }) {
  const [visibleItems, setVisibleItems] = useState<string[]>([]);

  useEffect(() => {
    // åªåŠ è½½å¯è§åŒºåŸŸçš„æ•°æ®
    const startIndex = Math.floor(scrollTop / itemHeight);
    const endIndex = startIndex + visibleCount;
    setVisibleItems(items.slice(startIndex, endIndex));
  }, [scrollTop]);

  return <div>{visibleItems.map(item => <Item>{item}</Item>)}</div>;
}
```

```python
# RAGï¼šæ–‡æ¡£åˆ†å—
def chunk_document(document: str, chunk_size: int = 500):
    # æŠŠé•¿æ–‡æ¡£åˆ‡æˆå°å—
    chunks = []
    for i in range(0, len(document), chunk_size):
        chunk = document[i:i + chunk_size]
        chunks.append(chunk)
    return chunks

# åªæ£€ç´¢ç›¸å…³çš„å—
def search_chunks(query: str, chunks: List[str], k: int = 3):
    # åªè¿”å›æœ€ç›¸å…³çš„ k ä¸ªå—
    return vector_store.search(query, k=k)
```

**ç›¸ä¼¼ç‚¹**ï¼š
- éƒ½æ˜¯æŠŠå¤§æ•°æ®åˆ‡æˆå°å—
- éƒ½æ˜¯æŒ‰éœ€åŠ è½½ï¼ˆä¸æ˜¯å…¨éƒ¨åŠ è½½ï¼‰
- éƒ½æ˜¯ä¸ºäº†æ€§èƒ½ä¼˜åŒ–

### æ—¥å¸¸ç”Ÿæ´»ç±»æ¯”ï¼šçœ‹ä¹¦åªè¯»ç›¸å…³ç« èŠ‚

```
é—®é¢˜ï¼š"å¦‚ä½•ç”¨ Python è¯»å–æ–‡ä»¶ï¼Ÿ"

ä¸åˆ†å—ï¼šæŠŠæ•´æœ¬ã€ŠPython æ•™ç¨‹ã€‹ï¼ˆ500é¡µï¼‰éƒ½ç»™ LLM
â†’ è¶…å‡ºä¸Šä¸‹æ–‡çª—å£é™åˆ¶
â†’ å³ä½¿èƒ½æ”¾ä¸‹ï¼ŒLLM ä¹Ÿä¼šè¢«æ— å…³å†…å®¹å¹²æ‰°

åˆ†å—ï¼šåªç»™"æ–‡ä»¶æ“ä½œ"è¿™ä¸€ç« ï¼ˆ10é¡µï¼‰
â†’ ä¿¡æ¯ç²¾å‡†
â†’ LLM ä¸“æ³¨äºç›¸å…³å†…å®¹
```

**å…³é”®æ´å¯Ÿ**ï¼š
- åˆ†å—ä¸æ˜¯éšæ„åˆ‡å‰²ï¼ˆè¦ä¿æŒè¯­ä¹‰å®Œæ•´æ€§ï¼‰
- åˆ†å—å¤§å°æ˜¯æƒè¡¡ï¼šå¤ªå°ä¸¢å¤±ä¸Šä¸‹æ–‡ï¼Œå¤ªå¤§æµªè´¹ token

---

## ç±»æ¯”5ï¼šTop-K æ£€ç´¢

### å‰ç«¯ç±»æ¯”ï¼šæœç´¢ç»“æœåˆ†é¡µ

```typescript
// å‰ç«¯ï¼šæœç´¢ç»“æœåªæ˜¾ç¤ºå‰ 10 æ¡
function SearchResults({ query }: { query: string }) {
  const allResults = searchEngine.search(query);

  // åªæ˜¾ç¤ºå‰ 10 æ¡ï¼ˆTop-10ï¼‰
  const topResults = allResults.slice(0, 10);

  return (
    <div>
      {topResults.map(result => (
        <SearchResultCard key={result.id} result={result} />
      ))}
    </div>
  );
}
```

```python
# RAGï¼šTop-K æ£€ç´¢
def retrieve_documents(query: str, k: int = 3):
    all_docs = vector_store.search(query)

    # åªè¿”å›æœ€ç›¸å…³çš„ k ä¸ªæ–‡æ¡£
    top_k_docs = all_docs[:k]

    return top_k_docs
```

**ç›¸ä¼¼ç‚¹**ï¼š
- éƒ½æ˜¯åªè¿”å›æœ€ç›¸å…³çš„ç»“æœ
- éƒ½æ˜¯ä¸ºäº†é¿å…ä¿¡æ¯è¿‡è½½
- k å€¼å¯ä»¥è°ƒæ•´ï¼ˆæƒè¡¡ç²¾åº¦å’Œå¬å›ç‡ï¼‰

### æ—¥å¸¸ç”Ÿæ´»ç±»æ¯”ï¼šé¢è¯•ç­›é€‰ç®€å†

```
æ”¶åˆ° 100 ä»½ç®€å†
â†’ åˆç­›ï¼šé€‰å‡ºæœ€åŒ¹é…çš„ 10 ä»½ï¼ˆTop-10ï¼‰
â†’ é¢è¯•ï¼šåªé¢è¯•è¿™ 10 ä¸ªäºº
â†’ ä¸æ˜¯è¯´å…¶ä»– 90 äººä¸å¥½ï¼Œè€Œæ˜¯èµ„æºæœ‰é™
```

**å…³é”®æ´å¯Ÿ**ï¼š
- k ä¸æ˜¯è¶Šå¤§è¶Šå¥½ï¼ˆå¤ªå¤šä¼šå¼•å…¥å™ªéŸ³ï¼‰
- k ä¸æ˜¯è¶Šå°è¶Šå¥½ï¼ˆå¤ªå°‘å¯èƒ½æ¼æ‰é‡è¦ä¿¡æ¯ï¼‰
- é€šå¸¸ k=3~5 æ˜¯ä¸€ä¸ªå¥½çš„èµ·ç‚¹

---

## ç±»æ¯”6ï¼šPrompt æ¨¡æ¿

### å‰ç«¯ç±»æ¯”ï¼šæ¨¡æ¿å­—ç¬¦ä¸²

```typescript
// å‰ç«¯ï¼šæ¨¡æ¿å­—ç¬¦ä¸²
function greetUser(name: string, age: number): string {
  return `Hello, ${name}! You are ${age} years old.`;
}

// ä½¿ç”¨
const message = greetUser("Alice", 25);
// "Hello, Alice! You are 25 years old."
```

```python
# RAGï¼šPrompt æ¨¡æ¿
def create_prompt(context: str, question: str) -> str:
    return f"""
åŸºäºä»¥ä¸‹æ–‡æ¡£å›ç­”é—®é¢˜ã€‚å¦‚æœæ–‡æ¡£ä¸­æ²¡æœ‰ç›¸å…³ä¿¡æ¯ï¼Œè¯·è¯´"æˆ‘ä¸çŸ¥é“"ã€‚

æ–‡æ¡£ï¼š
{context}

é—®é¢˜ï¼š{question}

ç­”æ¡ˆï¼š
"""

# ä½¿ç”¨
prompt = create_prompt(
    context="Python æ˜¯ä¸€é—¨ç¼–ç¨‹è¯­è¨€",
    question="ä»€ä¹ˆæ˜¯ Pythonï¼Ÿ"
)
```

**ç›¸ä¼¼ç‚¹**ï¼š
- éƒ½æ˜¯æŠŠå˜é‡æ³¨å…¥åˆ°æ¨¡æ¿ä¸­
- éƒ½æ˜¯ä¸ºäº†å¤ç”¨ç»“æ„
- éƒ½å¯ä»¥æœ‰é»˜è®¤å€¼å’Œæ¡ä»¶é€»è¾‘

### æ—¥å¸¸ç”Ÿæ´»ç±»æ¯”ï¼šå¡«ç©ºé¢˜

```
æ¨¡æ¿ï¼š
"æˆ‘å« ____ï¼Œä»Šå¹´ ____ å²ï¼Œæ¥è‡ª ____ã€‚"

å¡«å…¥å˜é‡ï¼š
name = "å¼ ä¸‰"
age = 25
city = "åŒ—äº¬"

ç»“æœï¼š
"æˆ‘å«å¼ ä¸‰ï¼Œä»Šå¹´ 25 å²ï¼Œæ¥è‡ªåŒ—äº¬ã€‚"
```

**å…³é”®æ´å¯Ÿ**ï¼š
- Prompt æ¨¡æ¿ä¸æ˜¯ç®€å•çš„å­—ç¬¦ä¸²æ‹¼æ¥
- å¥½çš„æ¨¡æ¿èƒ½æ˜¾è‘—æå‡ LLM å›ç­”è´¨é‡
- æ¨¡æ¿è®¾è®¡æ˜¯ä¸€é—¨è‰ºæœ¯ï¼ˆPrompt Engineeringï¼‰

---

## ç±»æ¯”7ï¼šä¸Šä¸‹æ–‡çª—å£

### å‰ç«¯ç±»æ¯”ï¼šHTTP è¯·æ±‚ä½“å¤§å°é™åˆ¶

```typescript
// å‰ç«¯ï¼šè¯·æ±‚ä½“æœ‰å¤§å°é™åˆ¶
async function sendData(data: any) {
  const payload = JSON.stringify(data);

  // æ£€æŸ¥å¤§å°
  if (payload.length > MAX_PAYLOAD_SIZE) {
    throw new Error("Payload too large");
  }

  await fetch("/api/data", {
    method: "POST",
    body: payload
  });
}
```

```python
# RAGï¼šä¸Šä¸‹æ–‡çª—å£é™åˆ¶
def generate_answer(context: str, question: str):
    prompt = f"æ–‡æ¡£ï¼š{context}\né—®é¢˜ï¼š{question}"

    # æ£€æŸ¥ token æ•°é‡
    token_count = count_tokens(prompt)
    if token_count > MAX_CONTEXT_WINDOW:
        # æˆªæ–­æˆ–åˆ†å—å¤„ç†
        context = truncate_context(context, max_tokens=3000)

    return llm.generate(prompt)
```

**ç›¸ä¼¼ç‚¹**ï¼š
- éƒ½æœ‰å¤§å°é™åˆ¶
- è¶…å‡ºé™åˆ¶ä¼šæŠ¥é”™
- éœ€è¦æå‰æ£€æŸ¥å’Œå¤„ç†

### æ—¥å¸¸ç”Ÿæ´»ç±»æ¯”ï¼šçŸ­æœŸè®°å¿†å®¹é‡

```
äººçš„çŸ­æœŸè®°å¿†ï¼šåªèƒ½è®°ä½ 7Â±2 ä¸ªä¿¡æ¯å—
â†’ ç”µè¯å·ç åˆ†æ®µï¼š138-1234-5678ï¼ˆ3ä¸ªå—ï¼‰
â†’ è€Œä¸æ˜¯ï¼š13812345678ï¼ˆ11ä¸ªæ•°å­—ï¼‰

LLM çš„ä¸Šä¸‹æ–‡çª—å£ï¼šåªèƒ½"è®°ä½"æœ‰é™çš„ token
â†’ GPT-3.5ï¼š4K tokensï¼ˆçº¦ 3000 å­—ï¼‰
â†’ GPT-4ï¼š8K/32K tokens
â†’ Claudeï¼š100K tokens
```

**å…³é”®æ´å¯Ÿ**ï¼š
- ä¸Šä¸‹æ–‡çª—å£ä¸æ˜¯è¶Šå¤§è¶Šå¥½ï¼ˆæˆæœ¬å’Œé€Ÿåº¦ï¼‰
- éœ€è¦ç²¾å¿ƒè®¾è®¡ä¸Šä¸‹æ–‡å†…å®¹ï¼ˆåªæ”¾æœ€ç›¸å…³çš„ï¼‰

---

## ç±»æ¯”8ï¼šReRankï¼ˆé‡æ’åºï¼‰

### å‰ç«¯ç±»æ¯”ï¼šæœç´¢ç»“æœäºŒæ¬¡æ’åº

```typescript
// å‰ç«¯ï¼šå…ˆæŒ‰ç›¸å…³åº¦æ’åºï¼Œå†æŒ‰å…¶ä»–å› ç´ è°ƒæ•´
function rankSearchResults(results: SearchResult[], query: string) {
  // ç¬¬ä¸€æ¬¡æ’åºï¼šæŒ‰æ–‡æœ¬ç›¸ä¼¼åº¦
  const sorted = results.sort((a, b) =>
    similarity(a.title, query) - similarity(b.title, query)
  );

  // ç¬¬äºŒæ¬¡æ’åºï¼šè€ƒè™‘æ›´å¤šå› ç´ 
  return sorted.sort((a, b) => {
    const scoreA =
      similarity(a.title, query) * 0.5 +  // ç›¸å…³åº¦
      a.popularity * 0.3 +                 // çƒ­åº¦
      a.recency * 0.2;                     // æ–°é²œåº¦
    const scoreB = /* åŒä¸Š */;
    return scoreB - scoreA;
  });
}
```

```python
# RAGï¼šReRank é‡æ’åº
def rerank_documents(query: str, docs: List[str]):
    # ç¬¬ä¸€æ¬¡æ£€ç´¢ï¼šå‘é‡ç›¸ä¼¼åº¦ï¼ˆå¿«ä½†ç²—ç³™ï¼‰
    candidates = vector_store.search(query, k=20)

    # ç¬¬äºŒæ¬¡æ’åºï¼šæ›´ç²¾ç»†çš„æ¨¡å‹ï¼ˆæ…¢ä½†å‡†ç¡®ï¼‰
    reranked = rerank_model.rank(
        query=query,
        documents=candidates
    )

    # è¿”å› Top-3
    return reranked[:3]
```

**ç›¸ä¼¼ç‚¹**ï¼š
- éƒ½æ˜¯ä¸¤é˜¶æ®µæ’åº
- ç¬¬ä¸€é˜¶æ®µå¿«é€Ÿç­›é€‰å€™é€‰
- ç¬¬äºŒé˜¶æ®µç²¾ç»†æ’åº

### æ—¥å¸¸ç”Ÿæ´»ç±»æ¯”ï¼šæ‹›è˜æµç¨‹

```
ç¬¬ä¸€è½®ï¼šç®€å†ç­›é€‰ï¼ˆå¿«é€Ÿï¼Œçœ‹å…³é”®è¯ï¼‰
â†’ 100 ä»½ç®€å† â†’ ç­›é€‰å‡º 20 ä»½

ç¬¬äºŒè½®ï¼šé¢è¯•è¯„ä¼°ï¼ˆæ…¢é€Ÿï¼Œæ·±å…¥äº†è§£ï¼‰
â†’ 20 ä¸ªå€™é€‰äºº â†’ é€‰å‡º 3 ä¸ª offer

ä¸ºä»€ä¹ˆä¸ç›´æ¥é¢è¯• 100 äººï¼Ÿ
â†’ å¤ªæ…¢ï¼Œæˆæœ¬å¤ªé«˜
```

**å…³é”®æ´å¯Ÿ**ï¼š
- ReRank ä¸æ˜¯å¿…éœ€çš„ï¼Œä½†èƒ½æ˜¾è‘—æå‡è´¨é‡
- é€‚ç”¨äºå¯¹å‡†ç¡®åº¦è¦æ±‚é«˜çš„åœºæ™¯

---

## ç±»æ¯”æ€»ç»“è¡¨

| RAG æ¦‚å¿µ | å‰ç«¯ç±»æ¯” | æ—¥å¸¸ç”Ÿæ´»ç±»æ¯” | æ ¸å¿ƒæ´å¯Ÿ |
|----------|----------|--------------|----------|
| **RAG æµç¨‹** | API è°ƒç”¨ â†’ å¤„ç† â†’ æ¸²æŸ“ | æŸ¥å­—å…¸ â†’ é˜…è¯» â†’ è§£é‡Š | ä¸‰æ­¥æµç¨‹ï¼šè·å– â†’ ç†è§£ â†’ è¾“å‡º |
| **Embedding** | å›¾ç‰‡å“ˆå¸Œ | ç»™ä¹¦æ‰“æ ‡ç­¾ | ç›¸ä¼¼è¾“å…¥ â†’ ç›¸ä¼¼è¾“å‡º |
| **å‘é‡æ•°æ®åº“** | å¸¦ç´¢å¼•çš„ localStorage | å›¾ä¹¦é¦†åˆ†ç±»ç³»ç»Ÿ | è¯­ä¹‰æœç´¢ï¼Œä¸æ˜¯å…³é”®è¯åŒ¹é… |
| **æ–‡æ¡£åˆ†å—** | è™šæ‹Ÿæ»šåŠ¨ / æ‡’åŠ è½½ | åªè¯»ç›¸å…³ç« èŠ‚ | æŒ‰éœ€åŠ è½½ï¼Œä¿æŒè¯­ä¹‰å®Œæ•´ |
| **Top-K æ£€ç´¢** | æœç´¢ç»“æœåˆ†é¡µ | é¢è¯•ç­›é€‰ç®€å† | åªè¿”å›æœ€ç›¸å…³çš„ k ä¸ª |
| **Prompt æ¨¡æ¿** | æ¨¡æ¿å­—ç¬¦ä¸² | å¡«ç©ºé¢˜ | å˜é‡æ³¨å…¥ï¼Œå¤ç”¨ç»“æ„ |
| **ä¸Šä¸‹æ–‡çª—å£** | è¯·æ±‚ä½“å¤§å°é™åˆ¶ | çŸ­æœŸè®°å¿†å®¹é‡ | æœ‰é™å®¹é‡ï¼Œéœ€ç²¾å¿ƒè®¾è®¡ |
| **ReRank** | æœç´¢ç»“æœäºŒæ¬¡æ’åº | æ‹›è˜ä¸¤è½®ç­›é€‰ | ä¸¤é˜¶æ®µï¼šå¿«é€Ÿç­›é€‰ + ç²¾ç»†æ’åº |

---

## ä½¿ç”¨ç±»æ¯”çš„æ³¨æ„äº‹é¡¹

### âœ… ç±»æ¯”çš„ä»·å€¼

1. **é™ä½å­¦ä¹ é—¨æ§›**ï¼šç”¨å·²çŸ¥ç†è§£æœªçŸ¥
2. **å»ºç«‹ç›´è§‰**ï¼šå¿«é€ŸæŠŠæ¡æ ¸å¿ƒæ¦‚å¿µ
3. **è®°å¿†è¾…åŠ©**ï¼šç±»æ¯”æ›´å®¹æ˜“è®°ä½

### âŒ ç±»æ¯”çš„å±€é™

1. **ä¸æ˜¯å®Œå…¨ç­‰ä»·**ï¼šç±»æ¯”åªæ˜¯ç›¸ä¼¼ï¼Œä¸æ˜¯ç›¸åŒ
2. **å¯èƒ½è¯¯å¯¼**ï¼šè¿‡åº¦ä¾èµ–ç±»æ¯”ä¼šå¿½ç•¥ç»†èŠ‚å·®å¼‚
3. **éœ€è¦éªŒè¯**ï¼šç±»æ¯”ç†è§£åï¼Œè¦ç”¨ä»£ç éªŒè¯

### ğŸ’¡ æ­£ç¡®ä½¿ç”¨ç±»æ¯”

```
1. ç”¨ç±»æ¯”å¿«é€Ÿç†è§£æ¦‚å¿µ
   â†“
2. è¿è¡Œä»£ç éªŒè¯ç†è§£
   â†“
3. æ·±å…¥å­¦ä¹ æŠ€æœ¯ç»†èŠ‚
   â†“
4. å½¢æˆè‡ªå·±çš„ç†è§£
```

---

**ä¸‹ä¸€æ­¥**ï¼šå­¦ä¹  [06_åç›´è§‰ç‚¹](./06_åç›´è§‰ç‚¹.md)ï¼Œé¿å…å¸¸è§è¯¯åŒºã€‚
