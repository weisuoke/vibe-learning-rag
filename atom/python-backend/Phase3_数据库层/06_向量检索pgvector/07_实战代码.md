# 实战代码

本知识点的实战代码按照4个场景拆分，每个场景都有完整的可运行代码：

## 场景1：基础 CRUD 操作

**文件：** `07_实战代码_1_基础CRUD.md`

**内容概要：**
- 安装和配置 pgvector
- 创建向量表
- 插入、查询、更新、删除向量
- 批量操作
- 完整的可运行示例

## 场景2：相似度检索

**文件：** `07_实战代码_2_相似度检索.md`

**内容概要：**
- 三种距离函数的使用
- Top-K 检索
- 带过滤条件的检索
- 距离阈值过滤
- 完整的检索 API 示例

## 场景3：RAG 文档问答集成

**文件：** `07_实战代码_3_RAG集成.md`

**内容概要：**
- 完整的 RAG 系统实现
- 文档入库流程
- 向量检索
- LLM 生成回答
- FastAPI 集成
- 端到端可运行示例

## 场景4：索引优化与性能对比

**文件：** `07_实战代码_4_索引优化.md`

**内容概要：**
- HNSW 索引创建和调优
- IVFFlat 索引创建和调优
- 性能基准测试
- 召回率评估
- 参数调优建议

---

## 运行环境要求

所有代码示例都可以在以下环境中运行：

```bash
# Python 版本
Python 3.13+

# 安装依赖
uv add psycopg2-binary pgvector openai python-dotenv fastapi uvicorn sqlalchemy

# 启动 PostgreSQL + pgvector（Docker）
docker run -d \
  --name postgres-pgvector \
  -e POSTGRES_PASSWORD=password \
  -p 5432:5432 \
  pgvector/pgvector:pg16
```

## 配置环境变量

```bash
# .env 文件
DATABASE_URL=postgresql://postgres:password@localhost:5432/postgres
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_BASE_URL=https://api.openai.com/v1
```

## 学习建议

建议按顺序学习这4个场景：

1. **基础 CRUD**（入门）→ 理解如何存储和操作向量
2. **相似度检索**（核心）→ 理解如何检索相似向量
3. **RAG 集成**（应用）→ 理解如何构建完整的 RAG 系统
4. **索引优化**（进阶）→ 理解如何优化检索性能

每个场景都包含：
- 完整的可运行代码
- 详细的注释说明
- 预期的输出结果
- 常见问题解答
