# 实战代码 04：高级编辑器场景

> 展示编辑器的高级功能和技巧

---

## 场景 1：多文件代码审查

### 引用多个相关文件

```bash
> @src/auth/login.ts @src/auth/register.ts @src/auth/middleware.ts

请审查这三个认证相关文件：
1. 代码质量如何？
2. 是否有安全漏洞？
3. 三个文件之间的职责是否清晰？

AI: [综合分析三个文件]

发现的问题：
1. login.ts 缺少速率限制
2. register.ts 密码强度验证不足
3. middleware.ts 的 token 验证可以优化

建议的改进：
[详细建议]
```

---

## 场景 2：命令输出分析

### 测试失败分析

```bash
> !npm test

[Command: npm test]
FAIL src/auth.test.ts
  ● authenticate › should reject weak passwords
    Expected: false
    Received: true

> 请分析失败原因并修复

AI: 问题在于密码强度验证逻辑...
[Tool: read] src/auth.ts
[Tool: edit] src/auth.ts
[修复代码]

> !npm test

[Command: npm test]
PASS src/auth.test.ts
✓ All tests passed
```

---

## 场景 3：Git 工作流集成

### 查看变更并决策

```bash
> !git status

[Command: git status]
Modified:
  src/auth.ts
  src/api.ts
Untracked:
  src/utils.ts

> 请帮我决定哪些文件应该提交

AI: 建议：
1. src/auth.ts - 包含 bug 修复，应该提交
2. src/api.ts - 包含新功能，应该提交
3. src/utils.ts - 临时测试文件，不应提交

建议的 commit 命令：
git add src/auth.ts src/api.ts
git commit -m "fix: improve password validation and add API endpoint"

> !!git add src/auth.ts src/api.ts
> !!git commit -m "fix: improve password validation and add API endpoint"
```

---

## 场景 4：模糊搜索快速定位

### 使用 @ 模糊搜索

```bash
> @auth

Suggestions:
  src/auth/index.ts
  src/auth/login.ts
  src/auth/register.ts
  src/middleware/auth.ts
  tests/auth.test.ts

# 按 Tab 选择，Enter 确认

> @auth/login

# 自动补全为 src/auth/login.ts

请审查这个登录逻辑
```

---

## 场景 5：多行复杂讨论

### 使用 Shift+Enter 换行

```bash
> 请帮我设计一个用户认证系统，需要考虑：
[Shift+Enter]
1. 支持多种登录方式（邮箱、手机、第三方）
[Shift+Enter]
2. 实现 JWT token 刷新机制
[Shift+Enter]
3. 支持多设备登录管理
[Shift+Enter]
4. 实现安全的密码重置流程
[Enter 提交]

AI: [详细设计方案]
```

---

## 编辑器技巧总结

| 功能 | 快捷键/语法 | 用途 |
|------|------------|------|
| 文件引用 | `@path` | 引入文件内容 |
| 模糊搜索 | `@keyword` | 快速查找文件 |
| Tab 补全 | `Tab` | 路径自动完成 |
| 执行并发送 | `!command` | 分析命令输出 |
| 仅执行 | `!!command` | 静默执行 |
| 换行 | `Shift+Enter` | 多行输入 |
| 提交 | `Enter` | 发送消息 |
| 清空 | `Ctrl+C` | 清空编辑器 |

---

**来源：**
- [Keybindings 文档](https://github.com/badlogic/pi-mono/blob/main/packages/coding-agent/docs/keybindings.md) - 2026-02
