# 面试必问

向量存储相关的高频面试问题与出彩回答。

---

## 问题1："如何选择向量数据库？"

### 普通回答（❌ 不出彩）

"ChromaDB 简单，Milvus 功能强大，根据需求选择。"

### 出彩回答（✅ 推荐）

> **选择向量数据库需要从四个维度考虑：**
>
> **1. 数据规模**
> - < 10万：ChromaDB、FAISS 足够
> - 10万-1000万：Milvus、Qdrant
> - > 1000万：Milvus 分布式、Pinecone
>
> **2. 部署方式**
> - 本地开发：ChromaDB（零配置）、Milvus Lite
> - 自建生产：Milvus、Qdrant（需要运维）
> - 托管服务：Pinecone、Milvus Cloud（免运维）
>
> **3. 功能需求**
> - 只需要向量搜索：FAISS
> - 需要元数据过滤：ChromaDB、Milvus
> - 需要混合搜索（向量+全文）：Weaviate、Elasticsearch
>
> **4. 团队能力**
> - 快速原型：ChromaDB（学习成本最低）
> - 有运维能力：Milvus（功能最全）
> - 无运维能力：Pinecone（托管服务）
>
> **我的实际选择经验：**
> - 开发阶段用 ChromaDB，生产环境迁移到 Milvus
> - 两者 API 相似，迁移成本低

### 为什么这个回答出彩？

1. ✅ 多维度分析，展示系统思考能力
2. ✅ 有具体数据规模参考
3. ✅ 结合实际经验，不是纸上谈兵
4. ✅ 给出了可操作的建议

---

## 问题2："HNSW 和 IVF 索引有什么区别？"

### 普通回答（❌ 不出彩）

"HNSW 是图索引，IVF 是聚类索引，HNSW 更快更准。"

### 出彩回答（✅ 推荐）

> **两者的核心区别在于搜索策略：**
>
> **IVF（倒排文件索引）**
> - 原理：把向量空间划分成 N 个聚类，查询时只搜索最近的 K 个聚类
> - 类比：像图书馆按主题分区，找书时先定位到相关区域
> - 优点：内存占用低，适合超大规模数据
> - 缺点：边界问题，可能漏掉跨聚类的相似向量
> - 参数：nlist（聚类数）、nprobe（搜索聚类数）
>
> **HNSW（分层可导航小世界图）**
> - 原理：构建多层图结构，从稀疏层快速定位，逐层细化到稠密层
> - 类比：像社交网络找人，通过朋友的朋友层层接近目标
> - 优点：速度快、精度高，是目前最佳平衡
> - 缺点：内存占用大，构建时间长
> - 参数：M（连接数）、efConstruction（构建搜索范围）
>
> **选择建议：**
> - 内存充足、追求精度：HNSW
> - 数据量极大、内存有限：IVF
> - 不确定：先用 HNSW，遇到内存瓶颈再换 IVF
>
> **实际数据参考（100万 1536维向量）：**
> | 指标 | HNSW | IVF |
> |------|------|-----|
> | 内存 | 8GB | 3GB |
> | 召回率 | 98% | 95% |
> | QPS | 500 | 800 |

### 为什么这个回答出彩？

1. ✅ 解释了原理，不只是结论
2. ✅ 用类比帮助理解
3. ✅ 给出了具体的选择建议
4. ✅ 有实际数据支撑

---

## 问题3："向量存储和传统数据库有什么区别？"

### 普通回答（❌ 不出彩）

"向量存储用于相似度搜索，传统数据库用于精确查询。"

### 出彩回答（✅ 推荐）

> **核心区别在于查询方式：**
>
> | 维度 | 传统数据库 | 向量存储 |
> |------|-----------|----------|
> | 查询类型 | 精确匹配 WHERE id=1 | 相似度匹配 Top-K |
> | 数据类型 | 结构化数据 | 高维向量 |
> | 索引结构 | B+树、哈希 | HNSW、IVF |
> | 返回结果 | 精确结果 | 近似结果 |
>
> **为什么需要专门的向量存储？**
>
> 1. **维度灾难**：传统索引在高维空间失效
>    - B+树对 1536 维向量无法有效索引
>    - 需要专门的 ANN（近似最近邻）算法
>
> 2. **查询语义不同**
>    - SQL：找到所有满足条件的记录
>    - 向量搜索：找到最相似的 K 个记录
>
> 3. **距离计算**
>    - 传统数据库不支持余弦相似度、欧氏距离等
>    - 向量存储专门优化这些计算
>
> **实际架构中两者配合：**
> ```
> 用户请求 → MySQL（权限验证）→ 向量存储（语义搜索）→ MySQL（获取详情）
> ```
>
> 向量存储不是替代传统数据库，而是补充。

### 为什么这个回答出彩？

1. ✅ 对比清晰，一目了然
2. ✅ 解释了"为什么"，不只是"是什么"
3. ✅ 给出了实际架构示例
4. ✅ 纠正了常见误解（替代 vs 补充）

---

## 面试技巧总结

| 问题类型 | 回答策略 |
|----------|----------|
| 概念对比 | 先说核心区别，再展开细节 |
| 技术选型 | 多维度分析 + 实际经验 |
| 原理解释 | 原理 + 类比 + 代码示例 |
| 最佳实践 | 场景分析 + 具体建议 |

**通用技巧：**
1. 先给结论，再展开
2. 用类比帮助理解
3. 结合实际经验
4. 给出具体数据

---

**下一步：** [09_化骨绵掌](./09_化骨绵掌.md) - 10个2分钟知识卡片
