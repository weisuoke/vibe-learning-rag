# åŒé‡ç±»æ¯”

> é€šè¿‡å‰ç«¯å¼€å‘ç±»æ¯” + æ—¥å¸¸ç”Ÿæ´»ç±»æ¯”ï¼Œå¿«é€Ÿç†è§£è£…é¥°å™¨çš„æœ¬è´¨

---

## ç±»æ¯”1ï¼šè£…é¥°å™¨ = é«˜é˜¶å‡½æ•°/åŒ…è£…çº¸

### å‰ç«¯ç±»æ¯”ï¼šé«˜é˜¶å‡½æ•°ï¼ˆHigher-Order Functionï¼‰

**JavaScript/TypeScript ä¸­çš„é«˜é˜¶å‡½æ•°ï¼š**

```javascript
// JavaScript é«˜é˜¶å‡½æ•°
function withLogging(func) {
    return function(...args) {
        console.log(`è°ƒç”¨ ${func.name}`);
        const result = func(...args);
        console.log(`${func.name} å®Œæˆ`);
        return result;
    };
}

const add = (a, b) => a + b;
const addWithLogging = withLogging(add);

addWithLogging(1, 2);
// è¾“å‡ºï¼š
// è°ƒç”¨ add
// add å®Œæˆ
```

**Python è£…é¥°å™¨ï¼ˆç­‰ä»·å®ç°ï¼‰ï¼š**

```python
# Python è£…é¥°å™¨
def with_logging(func):
    def wrapper(*args, **kwargs):
        print(f"è°ƒç”¨ {func.__name__}")
        result = func(*args, **kwargs)
        print(f"{func.__name__} å®Œæˆ")
        return result
    return wrapper

@with_logging
def add(a, b):
    return a + b

add(1, 2)
# è¾“å‡ºï¼š
# è°ƒç”¨ add
# add å®Œæˆ
```

**ç›¸ä¼¼æ€§ï¼š**
- éƒ½æ˜¯æ¥æ”¶å‡½æ•°ï¼Œè¿”å›æ–°å‡½æ•°
- éƒ½æ˜¯åœ¨ä¸ä¿®æ”¹åŸå‡½æ•°çš„æƒ…å†µä¸‹å¢å¼ºåŠŸèƒ½
- Python çš„ `@` åªæ˜¯è¯­æ³•ç³–ï¼Œæœ¬è´¨å’Œ JS é«˜é˜¶å‡½æ•°ä¸€æ ·

### æ—¥å¸¸ç”Ÿæ´»ç±»æ¯”ï¼šç¤¼ç‰©åŒ…è£…çº¸

**è£…é¥°å™¨å°±åƒç»™ç¤¼ç‰©åŒ…è£…ï¼š**
- **ç¤¼ç‰©** = åŸå‡½æ•°ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰
- **åŒ…è£…çº¸** = è£…é¥°å™¨ï¼ˆé¢å¤–åŠŸèƒ½ï¼‰
- **åŒ…è£…åçš„ç¤¼ç‰©** = è£…é¥°åçš„å‡½æ•°

```python
def gift_wrap(gift):
    """ç»™ç¤¼ç‰©åŒ…è£…"""
    def wrapped_gift():
        print("ğŸ æ‰“å¼€åŒ…è£…çº¸...")
        gift()  # åŸç¤¼ç‰©
        print("ğŸ åŒ…è£…çº¸å·²æ‹†å¼€")
    return wrapped_gift

@gift_wrap
def toy():
    print("  ğŸ§¸ ç©å…·ç†Š")

toy()
# è¾“å‡ºï¼š
# ğŸ æ‰“å¼€åŒ…è£…çº¸...
#   ğŸ§¸ ç©å…·ç†Š
# ğŸ åŒ…è£…çº¸å·²æ‹†å¼€
```

**å…³é”®ç‚¹ï¼š**
- åŒ…è£…çº¸ä¸æ”¹å˜ç¤¼ç‰©æœ¬èº«
- å¯ä»¥æœ‰å¤šå±‚åŒ…è£…ï¼ˆå¤šä¸ªè£…é¥°å™¨ï¼‰
- æ‹†åŒ…è£…çš„é¡ºåºå¾ˆé‡è¦ï¼ˆè£…é¥°å™¨æ‰§è¡Œé¡ºåºï¼‰

---

## ç±»æ¯”2ï¼šå¸¦å‚æ•°çš„è£…é¥°å™¨ = è£…é¥°å™¨å·¥å‚/å®šåˆ¶åŒ…è£…

### å‰ç«¯ç±»æ¯”ï¼šè£…é¥°å™¨å·¥å‚ï¼ˆDecorator Factoryï¼‰

**React é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰ï¼š**

```javascript
// React HOC with params
function withAuth(requiredRole) {
    return function(Component) {
        return function(props) {
            if (props.userRole !== requiredRole) {
                return <div>æƒé™ä¸è¶³</div>;
            }
            return <Component {...props} />;
        };
    };
}

// ä½¿ç”¨
const AdminPanel = withAuth('admin')(Panel);
```

**Python å¸¦å‚æ•°çš„è£…é¥°å™¨ï¼š**

```python
def with_auth(required_role):
    """è£…é¥°å™¨å·¥å‚"""
    def decorator(func):
        def wrapper(*args, **kwargs):
            user_role = kwargs.get('user_role', 'guest')
            if user_role != required_role:
                raise PermissionError("æƒé™ä¸è¶³")
            return func(*args, **kwargs)
        return wrapper
    return decorator

@with_auth(required_role='admin')
def delete_user(user_id, user_role='guest'):
    return f"åˆ é™¤ç”¨æˆ· {user_id}"
```

**ç›¸ä¼¼æ€§ï¼š**
- éƒ½æ˜¯ä¸‰å±‚ç»“æ„ï¼šå‚æ•° â†’ ç»„ä»¶/å‡½æ•° â†’ åŒ…è£…
- éƒ½æ˜¯æ ¹æ®å‚æ•°å®šåˆ¶è¡Œä¸º
- éƒ½æ˜¯å…ˆé…ç½®ï¼Œå†åº”ç”¨

### æ—¥å¸¸ç”Ÿæ´»ç±»æ¯”ï¼šå®šåˆ¶åŒ…è£…æœåŠ¡

**å¸¦å‚æ•°çš„è£…é¥°å™¨å°±åƒå®šåˆ¶åŒ…è£…æœåŠ¡ï¼š**

```python
def custom_wrap(color, ribbon=True):
    """å®šåˆ¶åŒ…è£…æœåŠ¡"""
    def decorator(gift):
        def wrapped_gift():
            print(f"ğŸ ä½¿ç”¨ {color} åŒ…è£…çº¸")
            if ribbon:
                print("ğŸ€ ç³»ä¸Šè´è¶ç»“")
            gift()
            print("ğŸ åŒ…è£…å®Œæˆ")
        return wrapped_gift
    return decorator

@custom_wrap(color="çº¢è‰²", ribbon=True)
def birthday_gift():
    print("  ğŸ‚ ç”Ÿæ—¥è›‹ç³•")

birthday_gift()
# è¾“å‡ºï¼š
# ğŸ ä½¿ç”¨ çº¢è‰² åŒ…è£…çº¸
# ğŸ€ ç³»ä¸Šè´è¶ç»“
#   ğŸ‚ ç”Ÿæ—¥è›‹ç³•
# ğŸ åŒ…è£…å®Œæˆ
```

**å…³é”®ç‚¹ï¼š**
- å¯ä»¥é€‰æ‹©åŒ…è£…çº¸é¢œè‰²ï¼ˆå‚æ•°é…ç½®ï¼‰
- å¯ä»¥é€‰æ‹©æ˜¯å¦åŠ è´è¶ç»“ï¼ˆå¯é€‰å‚æ•°ï¼‰
- ä¸åŒåœºåˆç”¨ä¸åŒåŒ…è£…ï¼ˆä¸åŒé…ç½®ï¼‰

---

## ç±»æ¯”3ï¼šFastAPI è·¯ç”±è£…é¥°å™¨ = Express è·¯ç”±å®šä¹‰

### å‰ç«¯ç±»æ¯”ï¼šExpress è·¯ç”±

**Express.js è·¯ç”±å®šä¹‰ï¼š**

```javascript
// Express è·¯ç”±
const express = require('express');
const app = express();

// å®šä¹‰è·¯ç”±
app.get('/users', (req, res) => {
    res.json([{ id: 1, name: 'Alice' }]);
});

app.post('/users', (req, res) => {
    res.status(201).json({ id: 2, name: req.body.name });
});

// è·¯å¾„å‚æ•°
app.get('/users/:id', (req, res) => {
    res.json({ id: req.params.id, name: 'Alice' });
});
```

**FastAPI è·¯ç”±è£…é¥°å™¨ï¼š**

```python
from fastapi import FastAPI

app = FastAPI()

# å®šä¹‰è·¯ç”±
@app.get("/users")
def get_users():
    return [{"id": 1, "name": "Alice"}]

@app.post("/users", status_code=201)
def create_user(name: str):
    return {"id": 2, "name": name}

# è·¯å¾„å‚æ•°
@app.get("/users/{user_id}")
def get_user(user_id: int):
    return {"id": user_id, "name": "Alice"}
```

**ç›¸ä¼¼æ€§ï¼š**
- éƒ½æ˜¯å£°æ˜å¼è·¯ç”±å®šä¹‰
- éƒ½æ˜¯æŠŠ URL æ˜ å°„åˆ°å¤„ç†å‡½æ•°
- éƒ½æ”¯æŒè·¯å¾„å‚æ•°å’ŒæŸ¥è¯¢å‚æ•°
- FastAPI çš„ `@app.get()` ç±»ä¼¼ Express çš„ `app.get()`

**åŒºåˆ«ï¼š**
- FastAPI ä½¿ç”¨è£…é¥°å™¨ï¼ˆæ›´ Pythonicï¼‰
- Express ä½¿ç”¨æ–¹æ³•è°ƒç”¨ï¼ˆæ›´ JavaScriptï¼‰
- FastAPI æœ‰è‡ªåŠ¨ç±»å‹éªŒè¯ï¼ˆåŸºäºç±»å‹æ³¨è§£ï¼‰

### æ—¥å¸¸ç”Ÿæ´»ç±»æ¯”ï¼šé¤å…èœå•

**è·¯ç”±è£…é¥°å™¨å°±åƒé¤å…èœå•ï¼š**

```python
class Restaurant:
    def __init__(self):
        self.menu = {}

    def dish(self, name, price):
        """èœå•è£…é¥°å™¨"""
        def decorator(cook_func):
            self.menu[name] = {
                "price": price,
                "cook": cook_func
            }
            return cook_func
        return decorator

restaurant = Restaurant()

@restaurant.dish(name="å®«ä¿é¸¡ä¸", price=38)
def cook_kungpao_chicken():
    return "ğŸ— å®«ä¿é¸¡ä¸åšå¥½äº†"

@restaurant.dish(name="éº»å©†è±†è…", price=28)
def cook_mapo_tofu():
    return "ğŸ¥˜ éº»å©†è±†è…åšå¥½äº†"

# ç‚¹èœ
print(restaurant.menu)
# {'å®«ä¿é¸¡ä¸': {'price': 38, 'cook': <function>}, ...}

# åšèœ
dish = restaurant.menu["å®«ä¿é¸¡ä¸"]
print(dish["cook"]())  # ğŸ— å®«ä¿é¸¡ä¸åšå¥½äº†
```

**å…³é”®ç‚¹ï¼š**
- èœå•ï¼ˆè·¯ç”±è¡¨ï¼‰è®°å½•äº†èœåå’Œåšæ³•
- è£…é¥°å™¨åœ¨å®šä¹‰æ—¶å°±æ³¨å†Œåˆ°èœå•
- ç‚¹èœæ—¶æ ¹æ®èœåæ‰¾åˆ°åšæ³•

---

## ç±»æ¯”4ï¼šå¤šä¸ªè£…é¥°å™¨ = ä¸­é—´ä»¶é“¾/æ´‹è‘±æ¨¡å‹

### å‰ç«¯ç±»æ¯”ï¼šExpress ä¸­é—´ä»¶

**Express ä¸­é—´ä»¶é“¾ï¼š**

```javascript
// Express ä¸­é—´ä»¶
app.use((req, res, next) => {
    console.log('ä¸­é—´ä»¶ A: è¯·æ±‚å‰');
    next();
    console.log('ä¸­é—´ä»¶ A: è¯·æ±‚å');
});

app.use((req, res, next) => {
    console.log('ä¸­é—´ä»¶ B: è¯·æ±‚å‰');
    next();
    console.log('ä¸­é—´ä»¶ B: è¯·æ±‚å');
});

app.get('/api', (req, res) => {
    console.log('å¤„ç†è¯·æ±‚');
    res.send('OK');
});

// è¯·æ±‚ /api æ—¶è¾“å‡ºï¼š
// ä¸­é—´ä»¶ A: è¯·æ±‚å‰
// ä¸­é—´ä»¶ B: è¯·æ±‚å‰
// å¤„ç†è¯·æ±‚
// ä¸­é—´ä»¶ B: è¯·æ±‚å
// ä¸­é—´ä»¶ A: è¯·æ±‚å
```

**Python å¤šè£…é¥°å™¨ï¼š**

```python
def middleware_a(func):
    def wrapper(*args, **kwargs):
        print('è£…é¥°å™¨ A: è°ƒç”¨å‰')
        result = func(*args, **kwargs)
        print('è£…é¥°å™¨ A: è°ƒç”¨å')
        return result
    return wrapper

def middleware_b(func):
    def wrapper(*args, **kwargs):
        print('è£…é¥°å™¨ B: è°ƒç”¨å‰')
        result = func(*args, **kwargs)
        print('è£…é¥°å™¨ B: è°ƒç”¨å')
        return result
    return wrapper

@middleware_a
@middleware_b
def handle_request():
    print('å¤„ç†è¯·æ±‚')
    return 'OK'

handle_request()
# è¾“å‡ºï¼š
# è£…é¥°å™¨ A: è°ƒç”¨å‰
# è£…é¥°å™¨ B: è°ƒç”¨å‰
# å¤„ç†è¯·æ±‚
# è£…é¥°å™¨ B: è°ƒç”¨å
# è£…é¥°å™¨ A: è°ƒç”¨å
```

**ç›¸ä¼¼æ€§ï¼š**
- éƒ½æ˜¯æ´‹è‘±æ¨¡å‹ï¼ˆä»å¤–åˆ°å†…ï¼Œå†ä»å†…åˆ°å¤–ï¼‰
- éƒ½æ˜¯æŒ‰é¡ºåºæ‰§è¡Œ
- éƒ½å¯ä»¥åœ¨è¯·æ±‚å‰ååšå¤„ç†

### æ—¥å¸¸ç”Ÿæ´»ç±»æ¯”ï¼šå®‰æ£€é€šé“

**å¤šä¸ªè£…é¥°å™¨å°±åƒæœºåœºå®‰æ£€ï¼š**

```python
def security_check(func):
    """å®‰æ£€"""
    def wrapper(*args, **kwargs):
        print("ğŸ” å®‰æ£€ï¼šæ£€æŸ¥è¡Œæ")
        result = func(*args, **kwargs)
        print("ğŸ” å®‰æ£€ï¼šé€šè¿‡")
        return result
    return wrapper

def ticket_check(func):
    """éªŒç¥¨"""
    def wrapper(*args, **kwargs):
        print("ğŸ« éªŒç¥¨ï¼šæ£€æŸ¥æœºç¥¨")
        result = func(*args, **kwargs)
        print("ğŸ« éªŒç¥¨ï¼šé€šè¿‡")
        return result
    return wrapper

def passport_check(func):
    """éªŒæŠ¤ç…§"""
    def wrapper(*args, **kwargs):
        print("ğŸ“– éªŒæŠ¤ç…§ï¼šæ£€æŸ¥æŠ¤ç…§")
        result = func(*args, **kwargs)
        print("ğŸ“– éªŒæŠ¤ç…§ï¼šé€šè¿‡")
        return result
    return wrapper

@security_check
@ticket_check
@passport_check
def board_plane():
    print("  âœˆï¸ ç™»æœº")

board_plane()
# è¾“å‡ºï¼š
# ğŸ” å®‰æ£€ï¼šæ£€æŸ¥è¡Œæ
# ğŸ« éªŒç¥¨ï¼šæ£€æŸ¥æœºç¥¨
# ğŸ“– éªŒæŠ¤ç…§ï¼šæ£€æŸ¥æŠ¤ç…§
#   âœˆï¸ ç™»æœº
# ğŸ“– éªŒæŠ¤ç…§ï¼šé€šè¿‡
# ğŸ« éªŒç¥¨ï¼šé€šè¿‡
# ğŸ” å®‰æ£€ï¼šé€šè¿‡
```

**å…³é”®ç‚¹ï¼š**
- ä»å¤–åˆ°å†…ï¼šå®‰æ£€ â†’ éªŒç¥¨ â†’ éªŒæŠ¤ç…§ â†’ ç™»æœº
- ä»å†…åˆ°å¤–ï¼šç™»æœº â†’ éªŒæŠ¤ç…§é€šè¿‡ â†’ éªŒç¥¨é€šè¿‡ â†’ å®‰æ£€é€šè¿‡
- é¡ºåºå¾ˆé‡è¦ï¼ˆä¸èƒ½å…ˆç™»æœºå†å®‰æ£€ï¼‰

---

## ç±»æ¯”5ï¼šç±»è£…é¥°å™¨ = æœ‰çŠ¶æ€çš„åŒ…è£…å™¨

### å‰ç«¯ç±»æ¯”ï¼šReact ç±»ç»„ä»¶ HOC

**React ç±»ç»„ä»¶é«˜é˜¶ç»„ä»¶ï¼š**

```javascript
// React ç±»ç»„ä»¶ HOC
class WithCounter extends React.Component {
    constructor(props) {
        super(props);
        this.state = { count: 0 };
    }

    increment = () => {
        this.setState({ count: this.state.count + 1 });
    }

    render() {
        const WrappedComponent = this.props.component;
        return (
            <div>
                <p>è°ƒç”¨æ¬¡æ•°: {this.state.count}</p>
                <WrappedComponent onClick={this.increment} />
            </div>
        );
    }
}
```

**Python ç±»è£…é¥°å™¨ï¼š**

```python
class WithCounter:
    """è®¡æ•°è£…é¥°å™¨"""
    def __init__(self, func):
        self.func = func
        self.count = 0

    def __call__(self, *args, **kwargs):
        self.count += 1
        print(f"è°ƒç”¨æ¬¡æ•°: {self.count}")
        return self.func(*args, **kwargs)

@WithCounter
def process_data(data):
    return f"å¤„ç†: {data}"

process_data("A")  # è°ƒç”¨æ¬¡æ•°: 1
process_data("B")  # è°ƒç”¨æ¬¡æ•°: 2
```

**ç›¸ä¼¼æ€§ï¼š**
- éƒ½ä½¿ç”¨ç±»æ¥ç®¡ç†çŠ¶æ€
- éƒ½å¯ä»¥æœ‰å¤šä¸ªæ–¹æ³•
- éƒ½å¯ä»¥è®¿é—®å®ä¾‹å˜é‡

### æ—¥å¸¸ç”Ÿæ´»ç±»æ¯”ï¼šè®¡æ­¥å™¨

**ç±»è£…é¥°å™¨å°±åƒè®¡æ­¥å™¨ï¼š**

```python
class StepCounter:
    """è®¡æ­¥å™¨è£…é¥°å™¨"""
    def __init__(self, func):
        self.func = func
        self.steps = 0

    def __call__(self, *args, **kwargs):
        self.steps += 1
        print(f"ğŸ‘Ÿ å·²èµ° {self.steps} æ­¥")
        return self.func(*args, **kwargs)

    def reset(self):
        """é‡ç½®è®¡æ­¥å™¨"""
        self.steps = 0
        print("ğŸ”„ è®¡æ­¥å™¨å·²é‡ç½®")

@StepCounter
def walk():
    print("  ğŸš¶ èµ°ä¸€æ­¥")

walk()  # ğŸ‘Ÿ å·²èµ° 1 æ­¥
walk()  # ğŸ‘Ÿ å·²èµ° 2 æ­¥
walk()  # ğŸ‘Ÿ å·²èµ° 3 æ­¥

walk.reset()  # ğŸ”„ è®¡æ­¥å™¨å·²é‡ç½®
walk()  # ğŸ‘Ÿ å·²èµ° 1 æ­¥
```

**å…³é”®ç‚¹ï¼š**
- è®¡æ­¥å™¨è®°å½•çŠ¶æ€ï¼ˆæ­¥æ•°ï¼‰
- å¯ä»¥é‡ç½®ï¼ˆè°ƒç”¨æ–¹æ³•ï¼‰
- æ¯æ¬¡è°ƒç”¨éƒ½æ›´æ–°çŠ¶æ€

---

## ç±»æ¯”6ï¼šè£…é¥°å™¨æ‰§è¡Œæ—¶æœº = æ¨¡å—å¯¼å…¥æ—¶ vs å‡½æ•°è°ƒç”¨æ—¶

### å‰ç«¯ç±»æ¯”ï¼šæ¨¡å—å¯¼å…¥ vs å‡½æ•°æ‰§è¡Œ

**JavaScript æ¨¡å—å¯¼å…¥ï¼š**

```javascript
// module.js
console.log('æ¨¡å—åŠ è½½æ—¶æ‰§è¡Œ');

export function myFunction() {
    console.log('å‡½æ•°è°ƒç”¨æ—¶æ‰§è¡Œ');
}

// main.js
import { myFunction } from './module.js';
// è¾“å‡ºï¼šæ¨¡å—åŠ è½½æ—¶æ‰§è¡Œ

myFunction();
// è¾“å‡ºï¼šå‡½æ•°è°ƒç”¨æ—¶æ‰§è¡Œ
```

**Python è£…é¥°å™¨ï¼š**

```python
def my_decorator(func):
    print('è£…é¥°å™¨æ‰§è¡Œï¼ˆæ¨¡å—å¯¼å…¥æ—¶ï¼‰')
    def wrapper(*args, **kwargs):
        print('wrapper æ‰§è¡Œï¼ˆå‡½æ•°è°ƒç”¨æ—¶ï¼‰')
        return func(*args, **kwargs)
    return wrapper

@my_decorator
def my_function():
    print('å‡½æ•°æ‰§è¡Œ')

# æ¨¡å—å¯¼å…¥æ—¶è¾“å‡ºï¼šè£…é¥°å™¨æ‰§è¡Œï¼ˆæ¨¡å—å¯¼å…¥æ—¶ï¼‰

my_function()
# å‡½æ•°è°ƒç”¨æ—¶è¾“å‡ºï¼š
# wrapper æ‰§è¡Œï¼ˆå‡½æ•°è°ƒç”¨æ—¶ï¼‰
# å‡½æ•°æ‰§è¡Œ
```

**ç›¸ä¼¼æ€§ï¼š**
- è£…é¥°å™¨åœ¨æ¨¡å—å¯¼å…¥æ—¶æ‰§è¡Œï¼ˆç±»ä¼¼ JS æ¨¡å—é¡¶å±‚ä»£ç ï¼‰
- wrapper åœ¨å‡½æ•°è°ƒç”¨æ—¶æ‰§è¡Œï¼ˆç±»ä¼¼ JS å‡½æ•°ä½“ï¼‰

### æ—¥å¸¸ç”Ÿæ´»ç±»æ¯”ï¼šæˆ¿å±‹è£…ä¿® vs ä½¿ç”¨æˆ¿å±‹

**è£…é¥°å™¨æ‰§è¡Œæ—¶æœºå°±åƒæˆ¿å±‹è£…ä¿®ï¼š**

```python
def renovate(house):
    """è£…ä¿®æˆ¿å±‹ï¼ˆè£…é¥°å™¨ï¼‰"""
    print("ğŸ—ï¸ è£…ä¿®ä¸­ï¼šåˆ·å¢™ã€é“ºåœ°æ¿...")

    def renovated_house():
        """è£…ä¿®åçš„æˆ¿å±‹ï¼ˆwrapperï¼‰"""
        print("ğŸ  ä½¿ç”¨æˆ¿å±‹ï¼šå¼€ç¯ã€å¼€ç©ºè°ƒ...")
        house()  # åŸæˆ¿å±‹åŠŸèƒ½
        print("ğŸ  ä½¿ç”¨å®Œæ¯•ï¼šå…³ç¯ã€å…³ç©ºè°ƒ...")

    print("ğŸ—ï¸ è£…ä¿®å®Œæˆ")
    return renovated_house

@renovate
def my_house():
    print("  ğŸ›‹ï¸ åœ¨æˆ¿å±‹é‡Œç”Ÿæ´»")

# è£…ä¿®æ—¶è¾“å‡ºï¼ˆå®šä¹‰æ—¶ï¼‰ï¼š
# ğŸ—ï¸ è£…ä¿®ä¸­ï¼šåˆ·å¢™ã€é“ºåœ°æ¿...
# ğŸ—ï¸ è£…ä¿®å®Œæˆ

print("=" * 50)
my_house()
# ä½¿ç”¨æ—¶è¾“å‡ºï¼ˆè°ƒç”¨æ—¶ï¼‰ï¼š
# ğŸ  ä½¿ç”¨æˆ¿å±‹ï¼šå¼€ç¯ã€å¼€ç©ºè°ƒ...
#   ğŸ›‹ï¸ åœ¨æˆ¿å±‹é‡Œç”Ÿæ´»
# ğŸ  ä½¿ç”¨å®Œæ¯•ï¼šå…³ç¯ã€å…³ç©ºè°ƒ...
```

**å…³é”®ç‚¹ï¼š**
- è£…ä¿®åªåšä¸€æ¬¡ï¼ˆè£…é¥°å™¨åœ¨å®šä¹‰æ—¶æ‰§è¡Œï¼‰
- æ¯æ¬¡ä½¿ç”¨éƒ½è¦å¼€å…³ç¯ï¼ˆwrapper åœ¨è°ƒç”¨æ—¶æ‰§è¡Œï¼‰
- è£…ä¿®æ”¹å˜äº†æˆ¿å±‹çš„ä½¿ç”¨æ–¹å¼ï¼ˆè£…é¥°å™¨æ”¹å˜äº†å‡½æ•°è¡Œä¸ºï¼‰

---

## ç±»æ¯”æ€»ç»“è¡¨

| Python è£…é¥°å™¨æ¦‚å¿µ | å‰ç«¯/Express ç±»æ¯” | æ—¥å¸¸ç”Ÿæ´»ç±»æ¯” |
|------------------|------------------|--------------|
| **åŸºç¡€è£…é¥°å™¨** | é«˜é˜¶å‡½æ•°ï¼ˆHOFï¼‰ | ç¤¼ç‰©åŒ…è£…çº¸ |
| **å¸¦å‚æ•°çš„è£…é¥°å™¨** | è£…é¥°å™¨å·¥å‚ã€React HOC | å®šåˆ¶åŒ…è£…æœåŠ¡ |
| **FastAPI è·¯ç”±è£…é¥°å™¨** | Express è·¯ç”±å®šä¹‰ | é¤å…èœå• |
| **å¤šä¸ªè£…é¥°å™¨** | Express ä¸­é—´ä»¶é“¾ | æœºåœºå®‰æ£€é€šé“ |
| **ç±»è£…é¥°å™¨** | React ç±»ç»„ä»¶ HOC | è®¡æ­¥å™¨ï¼ˆæœ‰çŠ¶æ€ï¼‰ |
| **è£…é¥°å™¨æ‰§è¡Œæ—¶æœº** | æ¨¡å—å¯¼å…¥ vs å‡½æ•°æ‰§è¡Œ | æˆ¿å±‹è£…ä¿® vs ä½¿ç”¨æˆ¿å±‹ |
| **`@` è¯­æ³•ç³–** | å‡½æ•°è°ƒç”¨ç®€å†™ | å¿«æ·æ–¹å¼ |
| **`*args, **kwargs`** | `...rest` å‚æ•° | ä¸‡èƒ½æ¥å£ |
| **`@wraps(func)`** | ä¿ç•™å‡½æ•°å…ƒä¿¡æ¯ | ä¿ç•™å•†å“æ ‡ç­¾ |
| **é—­åŒ…** | è¯æ³•ä½œç”¨åŸŸ | è®°å¿†åŠŸèƒ½ |

---

## å¿«é€Ÿè®°å¿†å£è¯€

**è£…é¥°å™¨ = åŒ…è£…çº¸**
- ä¸æ”¹å˜ç¤¼ç‰©ï¼ˆåŸå‡½æ•°ï¼‰
- å¢åŠ å¤–è§‚ï¼ˆé¢å¤–åŠŸèƒ½ï¼‰
- å¯ä»¥å¤šå±‚åŒ…è£…ï¼ˆå¤šè£…é¥°å™¨ï¼‰

**å¸¦å‚æ•° = å®šåˆ¶æœåŠ¡**
- é€‰æ‹©é¢œè‰²ï¼ˆé…ç½®å‚æ•°ï¼‰
- ä¸‰å±‚ç»“æ„ï¼ˆå‚æ•° â†’ è£…é¥°å™¨ â†’ åŒ…è£…ï¼‰

**FastAPI è·¯ç”± = é¤å…èœå•**
- èœåï¼ˆURL è·¯å¾„ï¼‰
- åšæ³•ï¼ˆå¤„ç†å‡½æ•°ï¼‰
- ä»·æ ¼ï¼ˆé…ç½®å‚æ•°ï¼‰

**å¤šè£…é¥°å™¨ = å®‰æ£€é€šé“**
- ä»å¤–åˆ°å†…ï¼ˆå®šä¹‰æ—¶ä»ä¸‹åˆ°ä¸Šï¼‰
- ä»å†…åˆ°å¤–ï¼ˆè°ƒç”¨æ—¶ä»ä¸Šåˆ°ä¸‹ï¼‰
- æ´‹è‘±æ¨¡å‹ï¼ˆå±‚å±‚åŒ…è£¹ï¼‰

**ç±»è£…é¥°å™¨ = è®¡æ­¥å™¨**
- æœ‰çŠ¶æ€ï¼ˆå®ä¾‹å˜é‡ï¼‰
- å¯é‡ç½®ï¼ˆæ–¹æ³•è°ƒç”¨ï¼‰
- è®°å½•å†å²ï¼ˆç´¯ç§¯æ•°æ®ï¼‰

---

## å¯¹æ¯”ä»£ç ç¤ºä¾‹

### JavaScript vs Pythonï¼šåŸºç¡€è£…é¥°å™¨

```javascript
// JavaScript é«˜é˜¶å‡½æ•°
function withLogging(func) {
    return function(...args) {
        console.log(`è°ƒç”¨ ${func.name}`);
        return func(...args);
    };
}

const add = (a, b) => a + b;
const addWithLogging = withLogging(add);
```

```python
# Python è£…é¥°å™¨
def with_logging(func):
    def wrapper(*args, **kwargs):
        print(f"è°ƒç”¨ {func.__name__}")
        return func(*args, **kwargs)
    return wrapper

@with_logging
def add(a, b):
    return a + b
```

### Express vs FastAPIï¼šè·¯ç”±å®šä¹‰

```javascript
// Express è·¯ç”±
app.get('/users/:id', (req, res) => {
    res.json({ id: req.params.id });
});
```

```python
# FastAPI è·¯ç”±
@app.get("/users/{user_id}")
def get_user(user_id: int):
    return {"id": user_id}
```

### React HOC vs Python ç±»è£…é¥°å™¨

```javascript
// React HOC
function withCounter(Component) {
    return class extends React.Component {
        state = { count: 0 };
        render() {
            return <Component count={this.state.count} />;
        }
    };
}
```

```python
# Python ç±»è£…é¥°å™¨
class WithCounter:
    def __init__(self, func):
        self.func = func
        self.count = 0

    def __call__(self, *args, **kwargs):
        self.count += 1
        return self.func(*args, **kwargs)
```

---

## æ€»ç»“

**è£…é¥°å™¨çš„æœ¬è´¨ï¼š**
- **å‰ç«¯è§†è§’**ï¼šé«˜é˜¶å‡½æ•° + ä¸­é—´ä»¶æ¨¡å¼
- **ç”Ÿæ´»è§†è§’**ï¼šåŒ…è£…çº¸ + å®‰æ£€é€šé“ + è®¡æ­¥å™¨

**å…³é”®ç±»æ¯”ï¼š**
1. è£…é¥°å™¨ = åŒ…è£…çº¸ï¼ˆä¸æ”¹å˜å†…å®¹ï¼Œå¢åŠ å¤–è§‚ï¼‰
2. å¸¦å‚æ•° = å®šåˆ¶æœåŠ¡ï¼ˆæ ¹æ®éœ€æ±‚é…ç½®ï¼‰
3. FastAPI è·¯ç”± = é¤å…èœå•ï¼ˆå£°æ˜å¼å®šä¹‰ï¼‰
4. å¤šè£…é¥°å™¨ = å®‰æ£€é€šé“ï¼ˆæ´‹è‘±æ¨¡å‹ï¼‰
5. ç±»è£…é¥°å™¨ = è®¡æ­¥å™¨ï¼ˆæœ‰çŠ¶æ€ç®¡ç†ï¼‰
6. æ‰§è¡Œæ—¶æœº = è£…ä¿® vs ä½¿ç”¨ï¼ˆå®šä¹‰æ—¶ vs è°ƒç”¨æ—¶ï¼‰

**è®°ä½ï¼š** è£…é¥°å™¨ä¸æ˜¯é­”æ³•ï¼Œå®ƒåªæ˜¯å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„é«˜é˜¶å‡½æ•°ï¼ŒPython çš„ `@` è¯­æ³•è®©å®ƒçœ‹èµ·æ¥æ›´ä¼˜é›…ã€‚
