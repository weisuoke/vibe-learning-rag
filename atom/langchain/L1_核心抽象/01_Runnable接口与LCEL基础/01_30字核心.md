# 30字核心

**Runnable 是 LangChain 的统一执行协议，通过声明式 LCEL 语法实现 AI 组件的可组合、可观测和可测试。**

---

## 版本信息

- **LangChain 版本**: 1.0+ (2025年10月发布)
- **langchain-core 版本**: 1.2.5+ (修复 CVE-2025-68664)
- **文档更新时间**: 2026年2月

---

## 核心要点

### 什么是 Runnable？

Runnable 是 LangChain 中所有可执行组件的基础协议（Protocol），定义了统一的执行接口：

- **invoke**: 同步单次执行
- **batch**: 批量并发执行
- **stream**: 流式实时输出

### 什么是 LCEL？

LCEL (LangChain Expression Language) 是基于 Runnable 协议的声明式编程语言，使用管道操作符 `|` 组合组件：

```python
chain = prompt | llm | parser  # 声明式组合
result = chain.invoke(input)   # 统一执行
```

### 为什么重要？

1. **组合性**: 任何 Runnable 都可以无缝组合
2. **可观测性**: 统一的执行接口便于监控和调试
3. **可测试性**: 标准化的输入输出便于单元测试

---

## 2025-2026 重要更新

### LangChain 1.0 稳定性承诺

2025年10月，LangChain 1.0 正式发布，承诺到 2.0 版本无重大 breaking changes[^1]。Runnable 协议作为核心抽象保持稳定。

### 安全修复

2025年12月修复 CVE-2025-68664 序列化注入漏洞[^2]，影响 `load()`/`loads()` 函数。升级到 langchain-core 1.2.5+ 以获得安全保障。

### 企业级应用

- **Klarna**: 使用 LangGraph 和 LCEL 构建 AI 助手，服务 8500 万用户[^3]
- **Elastic**: 基于 LCEL 构建 AI 安全助手，为 2 万客户提供服务[^3]
- **C.H. Robinson**: 采用 LCEL 实现物流自动化转型[^3]

---

## 快速示例

```python
from langchain_core.runnables import RunnableLambda
from langchain_openai import ChatOpenAI
from langchain_core.prompts import ChatPromptTemplate

# 定义组件
prompt = ChatPromptTemplate.from_template("将以下文本翻译成英文: {text}")
llm = ChatOpenAI(model="gpt-4o-mini")
uppercase = RunnableLambda(lambda x: x.content.upper())

# LCEL 组合
chain = prompt | llm | uppercase

# 统一执行
result = chain.invoke({"text": "你好世界"})
print(result)  # "HELLO WORLD"
```

---

## 参考资料

[^1]: [LangChain and LangGraph Agent Frameworks Reach v1.0 Milestones](https://blog.langchain.com/langchain-langgraph-1dot0) - LangChain Blog, 2025年10月
[^2]: [CVE-2025-68664 Details](https://nvd.nist.gov/vuln/detail/CVE-2025-68664) - NVD, 2025年12月
[^3]: [LangChain Customer Stories](https://www.langchain.com/customers) - LangChain Official, 2025-2026

---

**下一步**: 阅读 [02_第一性原理.md](./02_第一性原理.md) 深入理解 Runnable 的设计哲学
