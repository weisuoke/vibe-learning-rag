# Prompt Engineering 基础 - 概览

## 为什么学习 Prompt Engineering 基础？

### 核心价值

**Prompt Engineering 是 RAG 系统从"能用"到"好用"的关键。**

在 RAG 开发中，Prompt Engineering 的价值体现在：

1. **检索精度提升 30-50%**
   - 清晰的查询改写指令 → 更准确的向量检索
   - 明确的相关性判断标准 → 更好的文档筛选

2. **生成质量提升 40-60%**
   - 结构化输出格式 → 易于解析和展示
   - 上下文工程优化 → 减少幻觉和错误

3. **用户体验提升 50%+**
   - 一致的角色设定 → 专业可信的助手形象
   - 质量控制机制 → 可靠的答案输出

**来源：** [Source: IBM 2026 Prompt Engineering Guide](https://www.ibm.com/think/prompt-engineering)

### 2025-2026 年的新重点

传统 Prompt Engineering（2023-2024）关注"怎么问"，现代 Prompt Engineering（2025-2026）更关注"给什么上下文"和"如何确保可靠"。

**两大新重点：**
- ⭐ **上下文工程（Context Engineering）**：优化 Context Window 利用
- ⭐ **输出质量控制（Output Quality Control）**：确保答案可靠

**来源：** [Source: Context Engineering - The Next Frontier](https://www.deepset.ai/blog/context-engineering-the-next-frontier-beyond-prompt-engineering)

---

## 文件结构与阅读时间

### 完整文件列表（21个文件）

| 文件 | 阅读时间 | 内容概要 |
|------|---------|---------|
| **00_概览.md** | 3分钟 | 学习路径、文件结构、前置知识 |
| **01_30字核心.md** | 2分钟 | 核心定义、五大技巧速览 |
| **02_第一性原理.md** | 5分钟 | 为什么需要 Prompt Engineering |
| **03_核心概念_01_角色设定.md** | 8分钟 | System Prompt、角色定义 |
| **03_核心概念_02_指令清晰.md** | 8分钟 | 任务分解、成功标准 |
| **03_核心概念_03_格式控制.md** | 8分钟 | JSON Mode、Schema 验证 |
| **03_核心概念_04_上下文工程.md** ⭐ | 10分钟 | ReRank、Token 预算、动态选择 |
| **03_核心概念_05_输出质量控制.md** ⭐ | 10分钟 | 约束、验证、置信度评估 |
| **04_最小可用.md** | 8分钟 | 20/80 核心技巧速成 |
| **05_双重类比.md** | 8分钟 | 前端类比 + 日常生活类比 |
| **06_反直觉点.md** | 5分钟 | 三大常见误区 |
| **07_实战代码_01_角色设定场景.md** | 10分钟 | 技术文档助手实现 |
| **07_实战代码_02_指令清晰场景.md** | 10分钟 | 多步骤任务分解 |
| **07_实战代码_03_格式控制场景.md** | 10分钟 | 结构化信息提取 |
| **07_实战代码_04_上下文工程场景.md** ⭐ | 12分钟 | 上下文优化系统 |
| **07_实战代码_05_输出质量控制场景.md** ⭐ | 12分钟 | 多层验证机制 |
| **07_实战代码_06_RAG综合应用.md** | 15分钟 | 生产级 RAG 系统 |
| **08_面试必问.md** | 6分钟 | 3个核心面试问题 |
| **09_化骨绵掌.md** | 20分钟 | 10个快速参考卡片 |
| **10_一句话总结.md** | 2分钟 | 核心总结 |

**总阅读时间：** 约 2.5 小时（完整学习）

> ⭐ 标记为 2025-2026 年的新重点

---

## 三条学习路径

### 路径 1：快速入门（15分钟）

**适合：** 需要快速了解核心概念的开发者

**学习顺序：**
```
01_30字核心.md (2分钟)
    ↓
04_最小可用.md (8分钟)
    ↓
05_双重类比.md (3分钟，快速浏览)
    ↓
10_一句话总结.md (2分钟)
```

**学习成果：**
- ✅ 理解五大核心技巧
- ✅ 掌握 20/80 实用技巧
- ✅ 能够编写基础的 Prompt

---

### 路径 2：完整学习（2.5小时）

**适合：** 需要系统掌握 Prompt Engineering 的开发者

**学习顺序：**
```
第一阶段：基础理解（20分钟）
01_30字核心.md → 02_第一性原理.md → 06_反直觉点.md → 05_双重类比.md

第二阶段：核心概念（54分钟）
03_核心概念_01_角色设定.md
    ↓
03_核心概念_02_指令清晰.md
    ↓
03_核心概念_03_格式控制.md
    ↓
03_核心概念_04_上下文工程.md ⭐
    ↓
03_核心概念_05_输出质量控制.md ⭐

第三阶段：实战代码（69分钟）
07_实战代码_01_角色设定场景.md
    ↓
07_实战代码_02_指令清晰场景.md
    ↓
07_实战代码_03_格式控制场景.md
    ↓
07_实战代码_04_上下文工程场景.md ⭐
    ↓
07_实战代码_05_输出质量控制场景.md ⭐
    ↓
07_实战代码_06_RAG综合应用.md

第四阶段：巩固提升（28分钟）
04_最小可用.md → 08_面试必问.md → 09_化骨绵掌.md → 10_一句话总结.md
```

**学习成果：**
- ✅ 深入理解五大技巧的原理
- ✅ 掌握 2025-2026 年的新重点
- ✅ 能够构建生产级 RAG 系统
- ✅ 通过技术面试

---

### 路径 3：面试突击（25分钟）

**适合：** 准备技术面试的开发者

**学习顺序：**
```
01_30字核心.md (2分钟)
    ↓
03_核心概念_01-05.md (快速浏览，15分钟)
    ↓
06_反直觉点.md (5分钟)
    ↓
08_面试必问.md (6分钟)
    ↓
09_化骨绵掌.md (快速浏览，5分钟)
```

**学习成果：**
- ✅ 掌握核心概念和术语
- ✅ 了解常见误区
- ✅ 准备好面试问题
- ✅ 快速参考卡片

---

## 前置知识

### 必需前置知识

在学习本知识点前，你应该已经掌握：

- ✅ **L2_LLM核心/02_大模型API调用**
  - 理解如何调用 OpenAI API
  - 熟悉 messages 结构（system/user/assistant）
  - 了解 temperature、top_p 等参数

- ✅ **L2_LLM核心/03_Token与Context_Window**
  - 理解 Token 的概念
  - 知道 Context Window 的限制
  - 能够估算文本的 Token 数量

### 推荐前置知识

以下知识有助于更好地理解本知识点：

- 📚 **L1_NLP基础/02_Embedding原理与选型**
  - 理解向量检索的原理
  - 有助于理解上下文工程

- 📚 **L2_LLM核心/01_Transformer直觉理解**
  - 理解 LLM 的工作原理
  - 有助于理解第一性原理

---

## 后续学习

### 下一步学习路径

完成本知识点后，建议继续学习：

**1. L2_LLM核心/05_Prompt_Engineering进阶**
- Chain-of-Thought（思维链）
- Few-shot Learning（少样本学习）
- Meta Prompting（元提示）
- Self-Consistency（自我一致性）

**2. L3_RAG核心流程/06_上下文注入与生成**
- RAG 的上下文工程深入
- 多文档整合策略
- 长文档处理技巧

**3. L4_RAG进阶优化/03_Query改写**
- 查询优化技巧
- 多查询策略
- 查询扩展方法

---

## 核心要点预览

### 五大核心技巧

**1. 角色设定（Role Setting）**
- **核心：** 通过 System Prompt 定义 AI 的身份和行为
- **公式：** `System Prompt = 身份 + 风格 + 约束`
- **RAG 应用：** 确保助手风格一致、专业可靠

**2. 指令清晰（Instruction Clarity）**
- **核心：** 用明确的步骤和标准消除歧义
- **公式：** `清晰指令 = 任务 + 步骤 + 标准 + 示例`
- **RAG 应用：** 精确控制检索和生成的每个环节

**3. 格式控制（Format Control）**
- **核心：** 规定结构化的输出格式
- **公式：** `格式控制 = JSON Mode + Schema 验证`
- **RAG 应用：** 确保输出可解析、易于处理

**4. 上下文工程（Context Engineering）⭐**
- **核心：** 在有限的 Context Window 内注入最优上下文
- **公式：** `上下文优化 = ReRank + Token预算 + 动态选择`
- **RAG 应用：** RAG 的核心挑战，决定系统性能
- **2025-2026 新重点**

**5. 输出质量控制（Output Quality Control）⭐**
- **核心：** 通过约束和验证确保输出可靠
- **公式：** `质量控制 = 约束 + 验证 + 置信度`
- **RAG 应用：** 防止幻觉，确保答案可追溯
- **2025-2026 新重点**

### 记忆口诀

**"角指格上质"** - 角色设定、指令清晰、格式控制、上下文工程、输出质量控制

---

## 学习建议

### 学习方法

**1. 理论与实践结合**
- 先阅读核心概念（03_核心概念_XX.md）
- 再实践代码示例（07_实战代码_XX.md）
- 最后总结归纳（09_化骨绵掌.md）

**2. 循序渐进**
- 不要跳过基础概念
- 重点关注 2025-2026 年的新重点（⭐ 标记）
- 每个技巧都要实际编写代码测试

**3. 对比学习**
- 对比模糊指令 vs 清晰指令
- 对比无格式控制 vs 有格式控制
- 对比无质量控制 vs 有质量控制

### 实践建议

**1. 立即可用的模板**

每个技巧都提供了立即可用的模板，建议：
- 复制模板到你的项目中
- 根据实际需求调整
- 测试并迭代优化

**2. 快速参考**

打印 `09_化骨绵掌.md` 的10张卡片：
- 放在工作台旁边
- 开发时随时查阅
- 每周复习一次

**3. 代码实践**

所有代码示例都是可运行的：
- 环境：Python 3.13+
- 依赖：已在 `pyproject.toml` 中配置
- 运行：`uv sync && source .venv/bin/activate`

---

## 常见问题

### Q1: 我应该从哪个文件开始？

**A:** 取决于你的目标：
- **快速了解：** 从 `01_30字核心.md` 开始
- **系统学习：** 按照"路径2：完整学习"的顺序
- **面试准备：** 按照"路径3：面试突击"的顺序

### Q2: 五大技巧都必须用吗？

**A:** 取决于场景：
- **快速开发：** 前3个技巧（角色、指令、格式）
- **生产环境：** 全部5个技巧
- **高风险场景：** 重点加强质量控制

### Q3: 2025-2026 年的新重点是什么？

**A:** 两大新重点：
- **上下文工程：** 从"怎么问"转向"给什么上下文"
- **输出质量控制：** 从"生成答案"转向"可靠答案"

### Q4: 学完需要多长时间？

**A:**
- **快速入门：** 15分钟
- **完整学习：** 2.5小时
- **面试突击：** 25分钟

### Q5: 代码示例可以直接用吗？

**A:** 可以，所有代码示例都是：
- ✅ 完整可运行
- ✅ 基于 Python 3.13+
- ✅ 使用项目已配置的依赖
- ✅ 包含详细注释

---

## 学习资源

### 核心参考资料

本知识点基于以下 2025-2026 年的最新研究：

1. **Lakera 2026 Prompt Engineering Guide**
   - https://www.lakera.ai/blog/prompt-engineering-guide
   - 重点：输出质量控制、角色设定

2. **IBM 2026 Prompt Engineering Guide**
   - https://www.ibm.com/think/prompt-engineering
   - 重点：上下文工程、结构化输入输出

3. **Context Engineering - The Next Frontier**
   - https://www.deepset.ai/blog/context-engineering-the-next-frontier-beyond-prompt-engineering
   - 重点：上下文工程作为新前沿

4. **Stack AI RAG Prompting Complete Guide**
   - https://www.stack-ai.com/blog/prompt-engineering-for-rag-pipelines-the-complete-guide-to-prompt-engineering-for-retrieval-augmented-generation
   - 重点：RAG 专用 Prompt 技巧

5. **K2view 2026 Prompt Engineering Techniques**
   - https://www.k2view.com/blog/prompt-engineering-techniques
   - 重点：Zero-shot、Few-shot、CoT、Role Prompting

### 扩展阅读

- Google Research: RAG Context
- RAGFlow 2025 Review
- The AI Corner 2026 Guide

---

## 版本信息

**版本：** v3.0 (基于 2025-2026 年最新研究)

**最后更新：** 2026-02-14

**维护者：** Claude Code

**变更日志：**
- v3.0 (2026-02-14): 添加上下文工程和输出质量控制两大新重点
- v2.0 (2025-06-01): 整合 2025 年最新研究
- v1.0 (2024-01-01): 初始版本

---

## 开始学习

**准备好了吗？** 选择你的学习路径：

- 🚀 **快速入门：** 阅读 `01_30字核心.md`
- 📚 **完整学习：** 阅读 `02_第一性原理.md`
- 💼 **面试准备：** 阅读 `08_面试必问.md`

**记住：** Prompt Engineering 不是"玄学"，而是一门系统化的工程学科。

**核心原则：**
1. **明确性** > 简洁性
2. **结构化** > 自由文本
3. **上下文质量** > 上下文数量
4. **迭代优化** > 一次完美

**祝你学习愉快！** 🎉

---

**版本：** v1.0 | **更新：** 2026-02-14 | **阅读时间：** 3分钟
