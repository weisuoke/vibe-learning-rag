# GraphRAG知识图谱检索 - 化骨绵掌

> 10个2分钟知识卡片,快速复习核心要点

---

## 卡片 1: 直觉理解

**一句话**: GraphRAG = 知识图谱 + 检索增强生成

**举例**:
```
文本: "Alice 在 Google 工作"
Vector RAG: 文本 → 向量 [0.1, 0.3, ...]
GraphRAG: 文本 → 图 (Alice) -[工作于]-> (Google)
```

**应用**: 保留实体关系结构,支持多跳推理

---

## 卡片 2: 形式化定义

**一句话**: GraphRAG 是将文本转换为实体关系图并通过图遍历和社区检测实现多跳推理和全局理解的技术

**核心公式**:
```
GraphRAG = (实体, 关系) → 图遍历 → 上下文 → LLM → 答案
```

**应用**: 处理复杂关系查询,准确率提升 3.4x

---

## 卡片 3: 知识图谱构建

**一句话**: 从文本到图的四步转换

**流程**:
```
1. 文本分块 (Chunking)
2. 实体识别 (Entity Recognition)
3. 关系抽取 (Relation Extraction)
4. 图存储 (Graph Storage)
```

**应用**: 构建结构化知识,支持后续检索

---

## 卡片 4: 实体关系提取

**一句话**: LLM 驱动的结构化知识提取

**策略对比**:
- Zero-shot: 70-80% 准确率
- Few-shot: 85-90% 准确率 (推荐)
- Structured Output: 100% 格式正确

**应用**: 提取准确率直接决定图谱质量

---

## 卡片 5: 社区检测

**一句话**: Leiden 算法分层聚类,提供全局理解

**原理**:
```
图 → Leiden 算法 → 社区 → LLM 摘要 → 全局理解
```

**应用**: Global Search 的核心依赖,回答"整体情况如何?"类查询

---

## 卡片 6: Local Search

**一句话**: 从实体出发,获取局部上下文

**流程**:
```
查询 → 找到实体 → 获取直接关系 → 获取邻居 → 构建上下文 → LLM 生成
```

**应用**: 回答"Alice 的工作信息?"类特定实体查询

---

## 卡片 7: Global Search

**一句话**: 基于社区摘要,提供全局视角

**流程**:
```
查询 → 社区检测 → 生成社区摘要 (Map) → 汇总摘要 (Reduce) → LLM 生成
```

**应用**: 回答"公司的业务板块?"类全局理解查询

---

## 卡片 8: 混合检索

**一句话**: Vector RAG + Graph RAG 协同,智能路由

**架构**:
```
查询 → 路由器 → 80% Vector (简单) + 20% Graph (复杂) → 结果融合
```

**应用**: 生产级方案,成本降低 60%+,准确率提升 40%+

---

## 卡片 9: LazyGraphRAG

**一句话**: 延迟摘要生成,成本降至 0.1%

**原理**:
```
传统: 索引时生成所有摘要 (高成本)
LazyGraphRAG: 索引时只构建图,查询时按需生成摘要 (低成本)
```

**应用**: 2025-2026 成本优化核心技术

---

## 卡片 10: 生产实践

**一句话**: 混合架构 + LazyGraphRAG + 查询路由

**关键数据**:
- 准确率: 3.4x 提升 (复杂查询)
- 成本: 降低 60%+ (混合架构)
- 索引成本: 降至 0.1% (LazyGraphRAG)
- 查询成本: 降低 700x+ (LazyGraphRAG)

**应用**: 2025-2026 生产级部署标准

---

## 快速复习检查清单

### 理论理解
- [ ] 能用一句话解释 GraphRAG 的本质
- [ ] 理解知识图谱构建的四个步骤
- [ ] 掌握 Local 和 Global 搜索的区别
- [ ] 理解社区检测的作用
- [ ] 掌握混合检索的架构

### 技术细节
- [ ] 知道 Few-shot 比 Zero-shot 准确率高 10-15%
- [ ] 理解 LazyGraphRAG 的延迟摘要生成原理
- [ ] 掌握查询路由器的决策逻辑
- [ ] 知道 Leiden 算法用于社区检测
- [ ] 理解实体消歧和关系规范化

### 生产实践
- [ ] 知道 GraphRAG 适合复杂关系查询
- [ ] 理解混合架构的 80/20 原则
- [ ] 掌握成本优化的三层策略
- [ ] 知道 2025-2026 的关键数据 (3.4x, 60%, 0.1%)
- [ ] 理解 Microsoft GraphRAG 的使用方法

---

## 2分钟速记口诀

```
GraphRAG 是图谱 RAG,
四步构建知识网:
分块提取识关系,
存储查询两模式。

Local 局部找细节,
Global 全局看整体,
社区检测 Leiden 算,
摘要生成 Map-Reduce。

Vector Graph 混合用,
路由智能选策略,
LazyGraphRAG 降成本,
生产部署已成熟。

准确率提升三点四,
成本降低六成多,
索引成本零点一,
查询成本降七百。
```

---

## 关键要点

1. **GraphRAG = 知识图谱 + RAG,保留结构信息**
2. **知识图谱构建 = 分块 + 实体提取 + 关系抽取 + 图存储**
3. **Local Search 提供局部细节,Global Search 提供全局理解**
4. **混合架构 = 80% Vector + 20% Graph,智能路由**
5. **LazyGraphRAG 延迟摘要生成,成本降至 0.1%**
6. **2025-2026 生产级方案: 混合架构 + LazyGraphRAG + 查询路由**
7. **关键数据: 3.4x 准确率提升,60% 成本降低,0.1% 索引成本**
8. **适用场景: 多跳关系查询,全局理解查询**
9. **不适用场景: 简单语义查询 (用 Vector RAG)**
10. **实体提取准确率直接决定图谱质量,推荐 Few-shot 提取**

---

## 下一步

完成化骨绵掌复习后,你已经掌握了 GraphRAG 的核心知识,可以:

1. **实战练习**: 使用 Microsoft GraphRAG 搭建系统
2. **深入学习**: 阅读完整的核心概念文档
3. **生产部署**: 构建混合架构的生产级系统
4. **持续学习**: 关注 2026 年的最新技术进展

---

**版本**: v1.0 (基于 2025-2026 生产级实践)
**最后更新**: 2026-02-17
**维护者**: Claude Code
