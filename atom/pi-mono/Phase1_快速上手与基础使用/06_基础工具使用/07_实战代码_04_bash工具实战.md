# bash å·¥å…·å®æˆ˜

> å®Œæ•´çš„ TypeScript ç¤ºä¾‹å±•ç¤º bash å·¥å…·çš„å®é™…åº”ç”¨åœºæ™¯

---

## åœºæ™¯ 1ï¼šCI/CD è‡ªåŠ¨åŒ–è„šæœ¬

```typescript
// ci-automation.ts
import { execSync } from 'child_process'

class CIAutomation {
  async runPipeline(): Promise<void> {
    console.log('ğŸš€ Starting CI/CD Pipeline\n')

    try {
      // 1. å®‰è£…ä¾èµ–
      console.log('ğŸ“¦ Installing dependencies...')
      execSync('npm install', { stdio: 'inherit' })

      // 2. è¿è¡Œ linter
      console.log('\nğŸ” Running linter...')
      execSync('npm run lint', { stdio: 'inherit' })

      // 3. è¿è¡Œæµ‹è¯•
      console.log('\nğŸ§ª Running tests...')
      execSync('npm test', { stdio: 'inherit' })

      // 4. æ„å»ºé¡¹ç›®
      console.log('\nğŸ—ï¸  Building project...')
      execSync('npm run build', { stdio: 'inherit' })

      // 5. è¿è¡Œ E2E æµ‹è¯•
      console.log('\nğŸ­ Running E2E tests...')
      execSync('npm run test:e2e', { stdio: 'inherit' })

      console.log('\nâœ… Pipeline completed successfully!')
    } catch (error) {
      console.error('\nâŒ Pipeline failed:', error.message)
      process.exit(1)
    }
  }
}

new CIAutomation().runPipeline()
```

---

## åœºæ™¯ 2ï¼šGit æ“ä½œè‡ªåŠ¨åŒ–

```typescript
// git-automation.ts
import { execSync } from 'child_process'

class GitAutomation {
  /**
   * åˆ›å»ºåŠŸèƒ½åˆ†æ”¯å¹¶æ¨é€
   */
  async createFeatureBranch(featureName: string): Promise<void> {
    console.log(`\nğŸŒ¿ Creating feature branch: ${featureName}\n`)

    // 1. æ›´æ–° main åˆ†æ”¯
    execSync('git checkout main')
    execSync('git pull origin main')

    // 2. åˆ›å»ºæ–°åˆ†æ”¯
    execSync(`git checkout -b feature/${featureName}`)

    // 3. æ¨é€åˆ°è¿œç¨‹
    execSync(`git push -u origin feature/${featureName}`)

    console.log('\nâœ… Feature branch created and pushed!')
  }

  /**
   * æäº¤å¹¶æ¨é€æ›´æ”¹
   */
  async commitAndPush(message: string): Promise<void> {
    console.log('\nğŸ“ Committing changes...\n')

    // 1. æŸ¥çœ‹çŠ¶æ€
    const status = execSync('git status --short', { encoding: 'utf-8' })
    console.log('Changed files:')
    console.log(status)

    // 2. æ·»åŠ æ‰€æœ‰æ›´æ”¹
    execSync('git add .')

    // 3. æäº¤
    execSync(`git commit -m "${message}"`)

    // 4. æ¨é€
    execSync('git push')

    console.log('\nâœ… Changes committed and pushed!')
  }

  /**
   * åˆ›å»º Pull Request
   */
  async createPR(title: string, body: string): Promise<void> {
    console.log('\nğŸ”€ Creating Pull Request...\n')

    // ä½¿ç”¨ gh CLI åˆ›å»º PR
    execSync(`gh pr create --title "${title}" --body "${body}"`, {
      stdio: 'inherit'
    })

    console.log('\nâœ… Pull Request created!')
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const git = new GitAutomation()
git.createFeatureBranch('user-authentication')
git.commitAndPush('feat: add user authentication')
git.createPR('Add User Authentication', 'Implements JWT-based authentication')
```

---

## åœºæ™¯ 3ï¼šé¡¹ç›®åˆå§‹åŒ–è„šæœ¬

```typescript
// project-init.ts
import { execSync } from 'child_process'
import fs from 'fs'

class ProjectInitializer {
  async initProject(projectName: string): Promise<void> {
    console.log(`\nğŸ‰ Initializing project: ${projectName}\n`)

    // 1. åˆ›å»ºç›®å½•
    execSync(`mkdir -p ${projectName}`)
    process.chdir(projectName)

    // 2. åˆå§‹åŒ– Git
    console.log('ğŸ“¦ Initializing Git...')
    execSync('git init')

    // 3. åˆå§‹åŒ– npm
    console.log('ğŸ“¦ Initializing npm...')
    execSync('npm init -y')

    // 4. å®‰è£…ä¾èµ–
    console.log('ğŸ“¦ Installing dependencies...')
    execSync('npm install typescript @types/node --save-dev')

    // 5. åˆå§‹åŒ– TypeScript
    console.log('ğŸ“¦ Initializing TypeScript...')
    execSync('npx tsc --init')

    // 6. åˆ›å»ºç›®å½•ç»“æ„
    console.log('ğŸ“ Creating directory structure...')
    execSync('mkdir -p src tests docs')

    // 7. åˆ›å»º .gitignore
    fs.writeFileSync('.gitignore', 'node_modules/\ndist/\n.env\n')

    // 8. é¦–æ¬¡æäº¤
    console.log('ğŸ“ Creating initial commit...')
    execSync('git add .')
    execSync('git commit -m "chore: initial commit"')

    console.log('\nâœ… Project initialized successfully!')
    console.log(`\nNext steps:`)
    console.log(`  cd ${projectName}`)
    console.log(`  npm install`)
    console.log(`  npm run dev`)
  }
}

new ProjectInitializer().initProject('my-awesome-project')
```

---

## åœºæ™¯ 4ï¼šéƒ¨ç½²è‡ªåŠ¨åŒ–

```typescript
// deployment.ts
import { execSync } from 'child_process'

class DeploymentAutomation {
  async deploy(environment: 'staging' | 'production'): Promise<void> {
    console.log(`\nğŸš€ Deploying to ${environment}...\n`)

    try {
      // 1. è¿è¡Œæµ‹è¯•
      console.log('ğŸ§ª Running tests...')
      execSync('npm test')

      // 2. æ„å»º
      console.log('ğŸ—ï¸  Building...')
      execSync('npm run build')

      // 3. éƒ¨ç½²
      console.log(`ğŸ“¤ Deploying to ${environment}...`)
      if (environment === 'staging') {
        execSync('npm run deploy:staging')
      } else {
        execSync('npm run deploy:production')
      }

      // 4. éªŒè¯éƒ¨ç½²
      console.log('âœ… Verifying deployment...')
      execSync(`curl -f https://${environment}.example.com/health`)

      console.log(`\nâœ… Deployed to ${environment} successfully!`)
    } catch (error) {
      console.error(`\nâŒ Deployment failed:`, error.message)
      process.exit(1)
    }
  }
}

new DeploymentAutomation().deploy('staging')
```

---

**ç‰ˆæœ¬ï¼š** v1.0
**æœ€åæ›´æ–°ï¼š** 2026-02-19
**ç»´æŠ¤è€…ï¼š** Claude Code
