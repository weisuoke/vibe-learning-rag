# 原子化知识点生成规范 - RAG 开发专用

> 本文档定义了为 RAG 开发学习项目生成原子化知识点文档的标准和要求

---

## 文档概述

**项目目标：** 为 RAG 开发学习构建完整的原子化知识体系

**核心理念：**
- **原子化**：每个知识点独立完整，可独立学习
- **全面覆盖**：知识点包含多个子概念时，全部详细讲解，不遗漏
- **实战导向**：所有知识点都要联系 RAG 开发的实际应用
- **初学者友好**：假设零基础，用简单语言和丰富类比
- **速成高效**：抓住20%核心解决80%问题
- **双重类比**：同时提供前端开发类比 + 日常生活类比
- **Python 优先**：所有代码示例使用 Python

---

## 模板引用

本文档基于通用原子化知识点模板：**`prompt/atom_template.md`**

RAG 开发的特殊要求在下方 **RAG 开发特定配置** 章节中定义。

---

## 生成流程

### 第一步：确认输入信息

在开始生成前，确认以下信息：

1. **知识点名称**：从 `atom/rag/[层级]/k.md` 中获取
2. **层级目录**：如 `L1_NLP基础`、`L2_LLM核心`、`L3_RAG核心流程` 等
3. **目标受众**：初学者（默认）或进阶学习者
4. **文件位置**：`atom/rag/[层级]/[编号]_[知识点名称]/`

### 第二步：读取模板

**通用模板：** `prompt/atom_template.md` - 定义10个维度的标准结构
**简化接口：** `prompt/atom_knowledge.md` - 快速提示词接口

**10个必需维度：**
1. 【30字核心】
2. 【第一性原理】
3. 【3个核心概念】
4. 【最小可用】
5. 【双重类比】
6. 【反直觉点】
7. 【实战代码】
8. 【面试必问】
9. 【化骨绵掌】
10. 【一句话总结】

### 第三步：按规范生成内容

参考 `prompt/atom_template.md` 的详细规范，结合下方的 RAG 开发特定配置生成内容。

### 第四步：质量检查

使用 `prompt/atom_template.md` 中的检查清单验证质量。

---

## RAG 开发特定配置

### 应用场景强调

**每个部分都要联系 RAG 开发实际应用：**
- ✅ 这个知识在 RAG 开发中如何体现？
- ✅ 为什么 RAG 开发需要这个？
- ✅ 实际场景举例（文档问答、知识库检索、智能客服、内容生成）

**重点强调：**
- 检索与生成的协作
- Embedding 与语义理解
- Prompt 工程与上下文管理
- 评估与优化策略

### RAG 类比对照表

在【双重类比】维度中，优先使用以下类比：

| RAG 概念 | 前端类比 | 日常生活类比 |
|----------|----------|--------------|
| Embedding | 图片压缩/哈希 | 把书变成关键词索引 |
| 向量检索 | 搜索框自动补全 | 图书馆找相似的书 |
| Chunking | 懒加载分片 | 把长文章分成段落 |
| Prompt | API 请求参数 | 给厨师的菜谱指令 |
| ReRank | 搜索结果排序 | 面试筛选简历 |
| RAG Pipeline | 前端数据流 | 问答机器人流程 |
| Temperature | 随机数种子 | 厨师的创意程度 |
| Top-K | 分页返回条数 | 只看前几名候选人 |
| Context Window | 请求体大小限制 | 短期记忆容量 |

### 推荐库列表

在【实战代码】维度中，优先使用以下库：

| 用途 | 推荐库 |
|------|--------|
| LLM 调用 | `openai`, `anthropic` |
| Embedding | `openai`, `sentence-transformers` |
| 向量存储 | `chromadb`, `faiss`, `milvus` |
| RAG 框架 | `langchain`, `llama-index` |
| 文档解析 | `pypdf`, `pdfplumber`, `unstructured` |
| API 服务 | `fastapi` |

### RAG 常见误区

在【反直觉点】维度中，可参考以下常见误区：

- "Embedding 维度越高越好"
- "Chunk 越小检索越精准"
- "RAG 就是简单的检索 + 生成"
- "向量相似度高 = 语义相关"
- "LLM 会自动忽略无关上下文"

---

## Python 环境配置

### 环境要求

- **Python 版本**: 3.13+ (通过 asdf 管理)
- **包管理器**: uv

### 快速开始

```bash
# 1. 安装 Python
asdf install

# 2. 安装依赖
uv sync

# 3. 激活环境
source .venv/bin/activate

# 4. 运行示例
python examples/basic_rag.py
```

### 可用的库

所有代码示例可以使用以下库：

| 用途 | 库名 |
|------|------|
| **LLM 调用** | `openai` |
| **Embedding** | `sentence-transformers` |
| **向量存储** | `chromadb` |
| **RAG 框架** | `langchain`, `langchain-openai` |
| **文档解析** | `pypdf` |
| **API 服务** | `fastapi`, `uvicorn` |
| **工具** | `python-dotenv` |

### 环境管理

```bash
# 添加新依赖
uv add <package-name>

# 添加开发依赖
uv add --dev <package-name>

# 更新依赖
uv sync --upgrade
```

### 配置 API 密钥

1. 复制环境变量模板：
   ```bash
   cp .env.example .env
   ```

2. 编辑 `.env` 文件，添加你的 API keys：
   ```bash
   OPENAI_API_KEY=your_key_here
   # 可选：使用自定义 API 端点
   OPENAI_BASE_URL=https://your-proxy.com/v1
   ```

3. 在代码中加载：
   ```python
   from dotenv import load_dotenv
   load_dotenv()
   ```

---

## 文件组织规范

### 文件命名

**格式：** `[编号]_[知识点名称]/`（目录形式）

**示例：**
```
atom/rag/L1_NLP基础/01_BPE分词原理/
atom/rag/L1_NLP基础/02_Embedding原理与选型/
atom/rag/L2_LLM核心/01_Transformer直觉理解/
atom/rag/L3_RAG核心流程/01_RAG架构全景/
```

**编号规则：**
- 按学习顺序编号（01, 02, 03...）
- 反映知识点的依赖关系
- 与 `k.md` 中的顺序一致

### 目录结构

```
atom/
└── rag/                                # RAG 开发学习路径
    ├── L1_NLP基础/
    │   ├── k.md                        # 知识点列表
    │   ├── 01_BPE分词原理/
    │   │   ├── 00_概览.md
    │   │   ├── 01_30字核心.md
    │   │   ├── 02_第一性原理.md
    │   │   ├── 03_核心概念.md
    │   │   ├── 04_最小可用.md
    │   │   ├── 05_双重类比.md
    │   │   ├── 06_反直觉点.md
    │   │   ├── 07_实战代码.md
    │   │   ├── 08_面试必问.md
    │   │   ├── 09_化骨绵掌.md
    │   │   └── 10_一句话总结.md
    │   ├── 02_Embedding原理与选型/
    │   └── 03_语义相似度/
    ├── L2_LLM核心/
    │   ├── k.md
    │   ├── 01_Transformer直觉理解/
    │   ├── 02_大模型API调用/
    │   ├── 03_Token与Context_Window/
    │   ├── 04_Prompt_Engineering基础/
    │   └── 05_Prompt_Engineering进阶/
    ├── L3_RAG核心流程/
    │   ├── k.md
    │   ├── 01_RAG架构全景/
    │   ├── 02_文档加载与解析/
    │   ├── 03_文本分块Chunking/
    │   ├── 04_向量存储（RAG视角）/
    │   ├── 05_检索器设计/
    │   └── 06_上下文注入与生成/
    ├── L4_RAG进阶优化/
    │   ├── k.md
    │   ├── 01_混合检索策略/
    │   ├── 02_ReRank重排序/
    │   ├── 03_Query改写/
    │   ├── 04_长文档处理策略/
    │   ├── 05_对话式RAG/
    │   ├── 06_幻觉检测与缓解/
    │   └── 07_评估与调优/
    └── L5_框架与落地/
        ├── k.md
        ├── 01_LangChain核心概念/
        ├── 02_LlamaIndex核心概念/
        ├── 03_端到端项目实战/
        ├── 04_RAG API服务化/
        ├── 05_部署与监控/
        └── 06_生产环境优化/
```

---

## 快速启动模板

### 生成新知识点的步骤

1. **读取通用模板** (`prompt/atom_template.md`)
2. **读取本文档** (`CLAUDE.md`) - RAG 特定配置
3. **读取简化接口** (`prompt/atom_knowledge.md`)
4. **读取知识点列表** (`atom/rag/[层级]/k.md`)
5. **确认目标知识点**（第几个）
6. **按规范生成内容**（10个维度）
7. **质量检查**（使用检查清单）
8. **保存文件**（`atom/rag/[层级]/[编号]_[知识点]/`）

### 提示词模板

```
根据 @prompt/atom_template.md 的通用规范和 @CLAUDE.md 的 RAG 特定配置，为 @atom/rag/[层级]/k.md 中的第[N]个知识点 "[知识点名称]" 生成一个完整的学习文档。

要求：
- 按照10个维度完整生成
- 初学者友好
- 代码可运行（Python）
- 双重类比（前端 + 日常生活）
- 与 RAG 开发紧密结合

文件保存到：atom/rag/[层级]/[编号]_[知识点名称]/
```

---

## 核心原则总结

1. **原子化**：每个知识点独立完整
2. **全面覆盖**：知识点所有子概念都要讲到
3. **实战导向**：联系 RAG 开发应用
4. **初学者友好**：简单语言 + 双重类比
5. **速成高效**：20%核心 + 80%效果
6. **代码可运行**：所有示例都能跑（Python）
7. **体系完整**：10个维度全覆盖
8. **质量保证**：严格检查清单

---

**版本：** v3.0 (RAG 开发专用版 - 基于通用模板)
**最后更新：** 2025-02-09
**维护者：** Claude Code

---

**记住：** 生成每个新知识点前，先读取 `prompt/atom_template.md` 和本文档！
