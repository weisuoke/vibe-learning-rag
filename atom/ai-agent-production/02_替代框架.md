# 替代框架生态

**知识点数**: 25个 | **学习时长**: 3周 | **优先级**: P0

---

## 概览

**为什么重要**: 2026年框架生态多元化，单一框架无法满足所有场景。

**学习路径**: Pydantic AI（8个）→ Autogen（8个）→ LlamaIndex（6个）→ 框架对比（3个）

---

## L1_Pydantic AI（8个知识点）

### 核心特性
- **类型安全**: 运行时类型检查，IDE支持
- **依赖注入**: 解耦组件，提升可测试性
- **结构化输出**: 自动验证输出格式

### 快速开始
```python
from pydantic_ai import Agent
from pydantic import BaseModel

class Response(BaseModel):
    answer: str
    confidence: float

agent = Agent('openai:gpt-4', result_type=Response)
result = agent.run_sync('What is 2+2?')
print(result.data.answer)  # 类型安全
```

### 工具定义
```python
from pydantic_ai import RunContext

@agent.tool
async def search_web(ctx: RunContext, query: str) -> str:
    """搜索网络"""
    return await search_api(query)
```

### 与LangChain对比
- ✅ 更强的类型安全
- ✅ 更简洁的API
- ❌ 生态较小
- ❌ 文档较少

**推荐场景**: 需要类型安全的Python项目

---

## L2_Autogen（8个知识点）

### 核心特性
- **对话式Agent**: 多轮对话协作
- **GroupChat**: 多Agent协作编排
- **代码执行**: 安全的代码生成和执行

### 快速开始
```python
from autogen import AssistantAgent, UserProxyAgent

assistant = AssistantAgent("assistant", llm_config={"model": "gpt-4"})
user_proxy = UserProxyAgent("user", code_execution_config={"work_dir": "coding"})

user_proxy.initiate_chat(assistant, message="Plot a chart of NVDA stock price")
```

### GroupChat编排
```python
from autogen import GroupChat, GroupChatManager

groupchat = GroupChat(
    agents=[user_proxy, coder, pm, reviewer],
    messages=[],
    max_round=12
)
manager = GroupChatManager(groupchat=groupchat, llm_config=llm_config)
```

### 与CrewAI对比
- ✅ 更灵活的对话流程
- ✅ 代码执行能力
- ❌ 配置较复杂
- ❌ 企业特性较少

**推荐场景**: 需要代码生成和执行的场景

---

## L3_LlamaIndex（6个知识点）

### 核心特性
- **数据连接器**: 100+ 数据源集成
- **索引结构**: 多种索引策略
- **查询引擎**: 复杂查询优化

### 快速开始
```python
from llama_index import VectorStoreIndex, SimpleDirectoryReader

documents = SimpleDirectoryReader('data').load_data()
index = VectorStoreIndex.from_documents(documents)
query_engine = index.as_query_engine()
response = query_engine.query("What is the main topic?")
```

### Agent工具
```python
from llama_index.agent import OpenAIAgent
from llama_index.tools import QueryEngineTool

tool = QueryEngineTool.from_defaults(
    query_engine=query_engine,
    name="knowledge_base",
    description="Search the knowledge base"
)
agent = OpenAIAgent.from_tools([tool])
```

### 与LangChain对比
- ✅ 更强的RAG能力
- ✅ 更多索引策略
- ❌ Agent能力较弱
- ❌ 工作流编排较弱

**推荐场景**: RAG和知识库检索

---

## L4_框架对比与选型（3个知识点）

### 功能对比矩阵

| 特性 | LangChain | Pydantic AI | Autogen | LlamaIndex | CrewAI |
|------|-----------|-------------|---------|------------|--------|
| 类型安全 | ⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐ | ⭐⭐ | ⭐⭐ |
| Agent能力 | ⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐ | ⭐⭐⭐⭐⭐ |
| RAG能力 | ⭐⭐⭐⭐ | ⭐⭐ | ⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ |
| 工作流 | ⭐⭐⭐⭐⭐ | ⭐⭐ | ⭐⭐⭐ | ⭐⭐ | ⭐⭐⭐⭐ |
| 生态系统 | ⭐⭐⭐⭐⭐ | ⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐ |
| 学习曲线 | ⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐ |

### 选型决策树

```
需要类型安全？
├─ 是 → Pydantic AI
└─ 否 → 需要代码执行？
    ├─ 是 → Autogen
    └─ 否 → 主要做RAG？
        ├─ 是 → LlamaIndex
        └─ 否 → 需要多Agent协作？
            ├─ 是 → CrewAI
            └─ 否 → LangChain（通用）
```

### 性能基准测试

**延迟对比**（简单查询）:
- LangChain: 1.2s
- Pydantic AI: 1.0s
- Autogen: 1.5s
- LlamaIndex: 0.9s
- CrewAI: 1.3s

**内存占用**:
- LangChain: 150MB
- Pydantic AI: 80MB
- Autogen: 200MB
- LlamaIndex: 120MB
- CrewAI: 180MB

---

## 核心20%（5个知识点）

1. ⭐⭐⭐ **Pydantic AI - 类型安全Agent**
2. ⭐⭐⭐ **Autogen - 对话式Agent**
3. ⭐⭐⭐ **LlamaIndex - 数据连接器**
4. ⭐⭐⭐ **功能对比矩阵**
5. ⭐⭐⭐ **选型决策树**

---

## 实战项目

### 项目1: 框架对比实验

**目标**: 用3个框架实现同一功能，对比优劣。

**任务**: 实现一个文档问答Agent
- Pydantic AI版本
- Autogen版本
- LlamaIndex版本

**对比维度**:
- 代码行数
- 类型安全性
- 性能表现
- 开发体验

---

## 学习资源

- [Pydantic AI文档](https://ai.pydantic.dev/)
- [Autogen文档](https://microsoft.github.io/autogen/)
- [LlamaIndex文档](https://docs.llamaindex.ai/)

---

## 常见误区

1. ❌ "一个框架适用所有场景" → ✅ 根据场景选择
2. ❌ "新框架一定更好" → ✅ 权衡生态和成熟度
3. ❌ "框架越多越好" → ✅ 精通2-3个即可

---

**版本**: v1.0 | **最后更新**: 2026-02-12
