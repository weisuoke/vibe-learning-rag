# 最小可用

## 什么是最小可用？

**最小可用**：掌握 20% 的核心知识，就能理解 80% 的 Milvus 架构原理。

这一节告诉你：**要理解 Milvus 架构，最少需要知道什么？**

---

## 一、3 个必知组件

### 1. Proxy（代理层）

**作用**：请求入口，负责路由和负载均衡

**类比**：
- 前端类比：Nginx 反向代理
- 日常类比：餐厅的服务员（接待客人，分配座位）

**核心功能**：
- 接收客户端请求（插入、查询、删除）
- 验证请求合法性
- 将请求路由到对应的节点
- 返回结果给客户端

---

### 2. QueryNode（查询节点）

**作用**：执行向量检索

**类比**：
- 前端类比：搜索引擎的查询服务器
- 日常类比：图书馆的检索员（帮你找书）

**核心功能**：
- 加载索引到内存
- 执行向量相似度计算
- 返回 Top-K 最相似的结果

---

### 3. DataNode（数据节点）

**作用**：数据持久化

**类比**：
- 前端类比：数据库的写入服务
- 日常类比：图书馆的入库员（整理书籍并上架）

**核心功能**：
- 接收新数据
- 批量写入对象存储（S3/MinIO）
- 保证数据不丢失

---

## 二、基本请求流程

### 写入流程

```
Client → Proxy → DataNode → Object Storage
```

**步骤**：
1. 客户端发送插入请求到 Proxy
2. Proxy 验证请求并路由到 DataNode
3. DataNode 将数据持久化到对象存储
4. 返回成功响应

---

### 查询流程

```
Client → Proxy → QueryNode → Return Results
```

**步骤**：
1. 客户端发送查询请求到 Proxy
2. Proxy 将请求路由到 QueryNode
3. QueryNode 执行向量检索
4. 返回 Top-K 结果给客户端

---

## 三、最小部署方案

### Standalone 模式（单机模式）

**特点**：所有组件运行在一个进程中

**适用场景**：
- 开发测试
- 小规模数据（< 100 万向量）
- 单机资源充足

**优点**：部署简单，资源占用少

---

### Cluster 模式（集群模式）

**特点**：组件分布在多个节点上

**适用场景**：
- 生产环境
- 大规模数据（> 100 万向量）
- 高并发查询

**优点**：高可用、可扩展、高性能

---

## 四、总结

**掌握这些知识点，你就能理解 Milvus 架构的基本原理：**

1. **3 个核心组件**：Proxy（入口）、QueryNode（查询）、DataNode（存储）
2. **2 种请求流程**：写入流程、查询流程
3. **2 种部署模式**：Standalone（单机）、Cluster（集群）

**下一步**：深入学习每个组件的内部实现和优化策略。

---

**下一步学习：** [双重类比](./07_双重类比.md)
