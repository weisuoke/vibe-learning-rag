# 请求体验证 - 学习导航

> FastAPI 基于 Pydantic 的自动验证机制，比 express-validator 更强大

---

## 📚 学习路径

### 第一步：快速理解（5分钟）
1. **01_30字核心.md** - 一句话理解请求体验证
2. **15_一句话总结.md** - 完整总结
3. **02_第一性原理.md** - 为什么需要请求体验证

### 第二步：核心概念（30分钟）
4. **03_核心概念_Pydantic模型基础.md** - BaseModel、Field、类型系统
5. **04_核心概念_验证器与约束.md** - validator、root_validator、自定义验证
6. **05_核心概念_FastAPI集成.md** - 路由参数、响应模型、错误处理

### 第三步：最小可用（10分钟）
7. **06_最小可用.md** - 20%核心知识解决80%问题

### 第四步：类比理解（15分钟）
8. **07_双重类比.md** - 前端开发 + 日常生活类比

### 第五步：避坑指南（10分钟）
9. **08_反直觉点.md** - 3个常见误区

### 第六步：实战代码（60分钟）
10. **09_实战代码_基础验证场景.md** - 简单字段验证
11. **10_实战代码_复杂嵌套验证.md** - 嵌套对象、列表验证
12. **11_实战代码_自定义验证器.md** - 业务规则验证
13. **12_实战代码_错误处理与响应.md** - 验证错误处理

### 第七步：面试准备（10分钟）
14. **13_面试必问.md** - 高频面试问题

### 第八步：深度掌握（30分钟）
15. **14_化骨绵掌.md** - 10个2分钟知识卡片

---

## 🎯 学习目标

完成本知识点后，你将能够：

- [ ] 使用 Pydantic BaseModel 定义请求体模型
- [ ] 使用 Field 添加字段约束和验证规则
- [ ] 编写自定义验证器（validator、root_validator）
- [ ] 在 FastAPI 路由中集成请求体验证
- [ ] 处理验证错误并返回友好的错误消息
- [ ] 验证嵌套对象和复杂数据结构
- [ ] 理解 Pydantic 与 FastAPI 的集成原理

---

## 🔗 与其他知识点的关系

**前置知识：**
- Phase1_04_Pydantic数据验证 - Pydantic 基础
- Phase1_01_类型注解系统 - Python 类型系统
- Phase2_01_路由与依赖注入 - FastAPI 路由基础

**后续学习：**
- Phase2_03_异常处理 - 验证错误的统一处理
- Phase2_06_中间件系统 - 请求预处理
- Phase3_01_SQLAlchemy_ORM基础 - 数据库模型验证

---

## 💡 在 AI Agent 开发中的应用

| 场景 | 应用 |
|------|------|
| **Agent 请求参数** | 验证用户输入的问题、配置参数 |
| **工具调用参数** | 验证 Tool 的输入参数 |
| **RAG 查询参数** | 验证检索参数（top_k、threshold） |
| **流式输出配置** | 验证流式响应的配置参数 |
| **批量处理** | 验证批量请求的数据格式 |

---

## 📖 推荐学习顺序

### 快速上手（1小时）
```
30字核心 → 第一性原理 → 最小可用 → 基础验证场景
```

### 完整学习（3小时）
```
按文件编号顺序：01 → 02 → ... → 15
```

### 面试突击（30分钟）
```
30字核心 → 核心概念（3个文件） → 反直觉点 → 面试必问
```

---

## 🚀 快速开始

如果你只有5分钟，先看这个最小示例：

```python
from fastapi import FastAPI
from pydantic import BaseModel, Field

app = FastAPI()

class Question(BaseModel):
    text: str = Field(..., min_length=1, max_length=500)
    user_id: int = Field(..., gt=0)

@app.post("/ask")
async def ask_question(question: Question):
    # FastAPI 自动验证 question
    return {"answer": f"收到问题: {question.text}"}
```

**这段代码展示了：**
- ✅ 使用 Pydantic BaseModel 定义请求体
- ✅ 使用 Field 添加验证约束
- ✅ FastAPI 自动验证和解析请求数据
- ✅ 验证失败自动返回 422 错误

---

**版本：** v1.0
**最后更新：** 2026-02-11
