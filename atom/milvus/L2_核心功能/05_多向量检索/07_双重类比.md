# åŒé‡ç±»æ¯”

> é€šè¿‡å‰ç«¯å¼€å‘å’Œæ—¥å¸¸ç”Ÿæ´»ç±»æ¯”ç†è§£å¤šå‘é‡æ£€ç´¢

---

## ç±»æ¯”1ï¼šå¤šå­—æ®µå‘é‡ = å¤šç»´åº¦å•†å“å±æ€§

### å‰ç«¯ç±»æ¯”ï¼šå•†å“å¯¹è±¡çš„å¤šä¸ªå±æ€§

```javascript
// å‰ç«¯ï¼šä¸€ä¸ªå•†å“æœ‰å¤šä¸ªå±æ€§
const product = {
  id: 1,
  name: "iPhone 15",
  textDescription: "æœ€æ–°æ¬¾æ™ºèƒ½æ‰‹æœº...",
  imageUrl: "https://...",

  // å¤šä¸ª"ç‰¹å¾å‘é‡"
  textFeatures: [0.1, 0.2, ...],      // æ–‡æœ¬æè¿°çš„ç‰¹å¾
  imageFeatures: [0.3, 0.4, ...],     // å›¾ç‰‡çš„ç‰¹å¾
  priceFeatures: [0.5, 0.6, ...]      // ä»·æ ¼åŒºé—´çš„ç‰¹å¾
}

// æœç´¢æ—¶å¯ä»¥åŒæ—¶åŒ¹é…å¤šä¸ªç‰¹å¾
searchProducts({
  textQuery: "æ™ºèƒ½æ‰‹æœº",
  imageQuery: userUploadedImage,
  priceRange: [5000, 8000]
})
```

**å¯¹åº” Milvusï¼š**
```python
# Milvusï¼šä¸€ä¸ªæ–‡æ¡£æœ‰å¤šä¸ªå‘é‡å­—æ®µ
from pymilvus import CollectionSchema, FieldSchema, DataType

fields = [
    FieldSchema(name="id", dtype=DataType.INT64, is_primary=True),
    FieldSchema(name="name", dtype=DataType.VARCHAR, max_length=200),

    # å¤šä¸ªå‘é‡å­—æ®µï¼ˆç±»ä¼¼å‰ç«¯çš„å¤šä¸ªç‰¹å¾å±æ€§ï¼‰
    FieldSchema(name="text_vector", dtype=DataType.FLOAT_VECTOR, dim=1536),
    FieldSchema(name="image_vector", dtype=DataType.FLOAT_VECTOR, dim=512),
    FieldSchema(name="price_vector", dtype=DataType.FLOAT_VECTOR, dim=128),
]
```

### æ—¥å¸¸ç”Ÿæ´»ç±»æ¯”ï¼šæ‰¾æˆ¿å­çš„å¤šä¸ªç»´åº¦

**åœºæ™¯ï¼š** ä½ åœ¨æ‰¾æˆ¿å­ï¼Œæœ‰å¤šä¸ªè€ƒè™‘ç»´åº¦

```
æˆ¿å­Aï¼š
- åœ°ç†ä½ç½®ï¼šå¸‚ä¸­å¿ƒï¼Œäº¤é€šä¾¿åˆ© â­â­â­â­â­
- ä»·æ ¼ï¼š8000å…ƒ/æœˆ â­â­â­
- è£…ä¿®ï¼šç®€è£… â­â­

æˆ¿å­Bï¼š
- åœ°ç†ä½ç½®ï¼šéƒŠåŒºï¼Œéœ€è¦é€šå‹¤ â­â­
- ä»·æ ¼ï¼š3000å…ƒ/æœˆ â­â­â­â­â­
- è£…ä¿®ï¼šç²¾è£… â­â­â­â­â­

ä½ çš„éœ€æ±‚ï¼š
- åœ°ç†ä½ç½®ï¼šå¸Œæœ›åœ¨å¸‚ä¸­å¿ƒ
- ä»·æ ¼ï¼šå¸Œæœ›ä¾¿å®œ
- è£…ä¿®ï¼šå¸Œæœ›ç²¾è£…
```

**å¤šå‘é‡æ£€ç´¢ = åŒæ—¶è€ƒè™‘å¤šä¸ªç»´åº¦**
- æ¯ä¸ªç»´åº¦éƒ½æœ‰ä¸€ä¸ª"ç›¸ä¼¼åº¦åˆ†æ•°"
- æœ€ç»ˆé€šè¿‡åŠ æƒèåˆå¾—åˆ°æ€»åˆ†
- é€‰æ‹©æ€»åˆ†æœ€é«˜çš„æˆ¿å­

---

## ç±»æ¯”2ï¼šæ··åˆæ£€ç´¢ = å¤šä¸ªæœç´¢å¼•æ“åŒæ—¶æœç´¢

### å‰ç«¯ç±»æ¯”ï¼šèšåˆæœç´¢

```javascript
// å‰ç«¯ï¼šåŒæ—¶è°ƒç”¨å¤šä¸ªæœç´¢API
async function aggregateSearch(query) {
  // å¹¶è¡Œè°ƒç”¨å¤šä¸ªæœç´¢å¼•æ“
  const [googleResults, bingResults, baiduResults] = await Promise.all([
    searchGoogle(query),
    searchBing(query),
    searchBaidu(query)
  ])

  // èåˆç»“æœï¼ˆå»é‡ã€æ’åºï¼‰
  const mergedResults = mergeAndRank([
    googleResults,
    bingResults,
    baiduResults
  ])

  return mergedResults.slice(0, 10)  // è¿”å›Top 10
}
```

**å¯¹åº” Milvusï¼š**
```python
# Milvusï¼šåŒæ—¶æ£€ç´¢å¤šä¸ªå‘é‡å­—æ®µ
from pymilvus import AnnSearchRequest, RRFRanker

# å¹¶è¡Œæ£€ç´¢å¤šä¸ªå‘é‡å­—æ®µ
req1 = AnnSearchRequest(
    data=[text_embedding],
    anns_field="text_vector",
    param={"metric_type": "COSINE"},
    limit=10
)

req2 = AnnSearchRequest(
    data=[image_embedding],
    anns_field="image_vector",
    param={"metric_type": "COSINE"},
    limit=10
)

# èåˆç»“æœ
results = collection.hybrid_search(
    reqs=[req1, req2],
    rerank=RRFRanker(),
    limit=10
)
```

### æ—¥å¸¸ç”Ÿæ´»ç±»æ¯”ï¼šé—®å¤šä¸ªæœ‹å‹æ¨èé¤å…

**åœºæ™¯ï¼š** ä½ æƒ³æ‰¾ä¸€å®¶å¥½é¤å…

```
ä½ é—®äº†3ä¸ªæœ‹å‹ï¼š

æœ‹å‹Aï¼ˆç¾é£Ÿå®¶ï¼‰æ¨èï¼š
1. æµ·åº•æ
2. è¥¿è´èœé¢æ‘
3. å¤–å©†å®¶

æœ‹å‹Bï¼ˆä»·æ ¼æ•æ„Ÿï¼‰æ¨èï¼š
1. å¤–å©†å®¶
2. ç»¿èŒ¶é¤å…
3. æµ·åº•æ

æœ‹å‹Cï¼ˆç¯å¢ƒæ§ï¼‰æ¨èï¼š
1. æµ·åº•æ
2. å¤–å©†å®¶
3. é¼æ³°ä¸°

èåˆç»“æœï¼ˆå‡ºç°æ¬¡æ•°æœ€å¤šçš„ï¼‰ï¼š
1. æµ·åº•æï¼ˆ3æ¬¡ï¼‰â­â­â­
2. å¤–å©†å®¶ï¼ˆ3æ¬¡ï¼‰â­â­â­
3. è¥¿è´èœé¢æ‘ï¼ˆ1æ¬¡ï¼‰â­
```

**æ··åˆæ£€ç´¢ = é—®å¤šä¸ª"ä¸“å®¶"ï¼ˆå‘é‡å­—æ®µï¼‰çš„æ„è§ï¼Œç„¶åç»¼åˆ**

---

## ç±»æ¯”3ï¼šRRFèåˆ = æŠ•ç¥¨æ’åç³»ç»Ÿ

### å‰ç«¯ç±»æ¯”ï¼šå¤šä¸ªæ’åºç®—æ³•çš„èåˆ

```javascript
// å‰ç«¯ï¼šèåˆå¤šä¸ªæ’åºç»“æœ
function rrfFusion(rankings, k = 60) {
  const scores = {}

  // æ¯ä¸ªæ’åºç»“æœéƒ½æŠ•ç¥¨
  rankings.forEach(ranking => {
    ranking.forEach((item, rank) => {
      // RRFå…¬å¼ï¼š1 / (k + rank)
      scores[item.id] = (scores[item.id] || 0) + 1 / (k + rank + 1)
    })
  })

  // æŒ‰åˆ†æ•°æ’åº
  return Object.entries(scores)
    .sort((a, b) => b[1] - a[1])
    .map(([id, score]) => ({ id, score }))
}

// ç¤ºä¾‹
const textRanking = [
  { id: 'doc1', score: 0.9 },
  { id: 'doc2', score: 0.8 },
  { id: 'doc3', score: 0.7 }
]

const imageRanking = [
  { id: 'doc2', score: 0.95 },
  { id: 'doc1', score: 0.85 },
  { id: 'doc4', score: 0.75 }
]

const fusedResults = rrfFusion([textRanking, imageRanking])
// doc2 æ’åæœ€é«˜ï¼ˆåœ¨ä¸¤ä¸ªæ’åºä¸­éƒ½é å‰ï¼‰
```

**å¯¹åº” Milvusï¼š**
```python
# Milvusï¼šRRFèåˆç®—æ³•
from pymilvus import RRFRanker

# è‡ªåŠ¨ä½¿ç”¨RRFèåˆå¤šä¸ªæ£€ç´¢ç»“æœ
results = collection.hybrid_search(
    reqs=[req1, req2],
    rerank=RRFRanker(),  # ä½¿ç”¨RRFç®—æ³•
    limit=10
)
```

### æ—¥å¸¸ç”Ÿæ´»ç±»æ¯”ï¼šå¥¥è¿ä¼šè¯„åˆ†ç³»ç»Ÿ

**åœºæ™¯ï¼š** è·³æ°´æ¯”èµ›ï¼Œå¤šä¸ªè£åˆ¤æ‰“åˆ†

```
é€‰æ‰‹Açš„å¾—åˆ†ï¼š
è£åˆ¤1ï¼š9.5åˆ†ï¼ˆæ’åç¬¬1ï¼‰
è£åˆ¤2ï¼š9.0åˆ†ï¼ˆæ’åç¬¬2ï¼‰
è£åˆ¤3ï¼š9.2åˆ†ï¼ˆæ’åç¬¬1ï¼‰

é€‰æ‰‹Bçš„å¾—åˆ†ï¼š
è£åˆ¤1ï¼š9.0åˆ†ï¼ˆæ’åç¬¬2ï¼‰
è£åˆ¤2ï¼š9.5åˆ†ï¼ˆæ’åç¬¬1ï¼‰
è£åˆ¤3ï¼š8.8åˆ†ï¼ˆæ’åç¬¬3ï¼‰

RRFèåˆï¼ˆä¸çœ‹ç»å¯¹åˆ†æ•°ï¼Œåªçœ‹æ’åï¼‰ï¼š
é€‰æ‰‹Aï¼š1/(60+0) + 1/(60+1) + 1/(60+0) = 0.0333
é€‰æ‰‹Bï¼š1/(60+1) + 1/(60+0) + 1/(60+2) = 0.0325

é€‰æ‰‹Aè·èƒœï¼
```

**RRFçš„ä¼˜åŠ¿ï¼š**
- ä¸ä¾èµ–ç»å¯¹åˆ†æ•°ï¼ˆä¸åŒè£åˆ¤çš„æ‰“åˆ†æ ‡å‡†å¯èƒ½ä¸åŒï¼‰
- åªçœ‹æ’åï¼ˆæ›´å…¬å¹³ï¼‰
- æ’åé å‰çš„é€‰æ‰‹å¾—åˆ†æ›´é«˜

---

## ç±»æ¯”4ï¼šåŠ æƒèåˆ = ä¸“å®¶æ„è§çš„åŠ æƒå¹³å‡

### å‰ç«¯ç±»æ¯”ï¼šåŠ æƒè¯„åˆ†ç³»ç»Ÿ

```javascript
// å‰ç«¯ï¼šä¸åŒç»´åº¦çš„æƒé‡ä¸åŒ
function weightedScore(product) {
  const weights = {
    quality: 0.5,      // è´¨é‡æƒé‡50%
    price: 0.3,        // ä»·æ ¼æƒé‡30%
    service: 0.2       // æœåŠ¡æƒé‡20%
  }

  const scores = {
    quality: product.qualityScore,   // 0-1
    price: product.priceScore,       // 0-1
    service: product.serviceScore    // 0-1
  }

  // åŠ æƒå¹³å‡
  const totalScore =
    scores.quality * weights.quality +
    scores.price * weights.price +
    scores.service * weights.service

  return totalScore
}

// ç¤ºä¾‹
const productA = {
  qualityScore: 0.9,
  priceScore: 0.6,
  serviceScore: 0.8
}

const score = weightedScore(productA)
// = 0.9*0.5 + 0.6*0.3 + 0.8*0.2 = 0.79
```

**å¯¹åº” Milvusï¼š**
```python
# Milvusï¼šåŠ æƒèåˆï¼ˆæ‰‹åŠ¨å®ç°ï¼‰
def weighted_fusion(results_list, weights):
    """åŠ æƒèåˆå¤šä¸ªæ£€ç´¢ç»“æœ"""
    scores = {}

    for i, results in enumerate(results_list):
        weight = weights[i]
        for hit in results[0]:
            doc_id = hit.id
            similarity = hit.distance  # ç›¸ä¼¼åº¦åˆ†æ•°
            scores[doc_id] = scores.get(doc_id, 0) + similarity * weight

    # æŒ‰åˆ†æ•°æ’åº
    sorted_docs = sorted(scores.items(), key=lambda x: x[1], reverse=True)
    return sorted_docs

# ä½¿ç”¨
weights = [0.6, 0.4]  # text_vectoræƒé‡60%ï¼Œimage_vectoræƒé‡40%
final_results = weighted_fusion([text_results, image_results], weights)
```

### æ—¥å¸¸ç”Ÿæ´»ç±»æ¯”ï¼šæ‹›è˜é¢è¯•çš„ç»¼åˆè¯„åˆ†

**åœºæ™¯ï¼š** å…¬å¸æ‹›è˜ï¼Œå¤šä¸ªé¢è¯•å®˜æ‰“åˆ†

```
å€™é€‰äººAï¼š
æŠ€æœ¯é¢è¯•ï¼ˆæƒé‡50%ï¼‰ï¼š90åˆ†
HRé¢è¯•ï¼ˆæƒé‡30%ï¼‰ï¼š80åˆ†
è€æ¿é¢è¯•ï¼ˆæƒé‡20%ï¼‰ï¼š85åˆ†

ç»¼åˆå¾—åˆ† = 90*0.5 + 80*0.3 + 85*0.2 = 86åˆ†

å€™é€‰äººBï¼š
æŠ€æœ¯é¢è¯•ï¼ˆæƒé‡50%ï¼‰ï¼š85åˆ†
HRé¢è¯•ï¼ˆæƒé‡30%ï¼‰ï¼š90åˆ†
è€æ¿é¢è¯•ï¼ˆæƒé‡20%ï¼‰ï¼š90åˆ†

ç»¼åˆå¾—åˆ† = 85*0.5 + 90*0.3 + 90*0.2 = 87.5åˆ†

å€™é€‰äººBè·èƒœï¼
```

**åŠ æƒèåˆ = ä¸åŒç»´åº¦çš„é‡è¦æ€§ä¸åŒ**

---

## ç±»æ¯”5ï¼šå¤šæ¨¡æ€æ£€ç´¢ = å¤šæ„Ÿå®˜è¯†åˆ«

### å‰ç«¯ç±»æ¯”ï¼šå¤šåª’ä½“æœç´¢

```javascript
// å‰ç«¯ï¼šåŒæ—¶æœç´¢æ–‡æœ¬ã€å›¾ç‰‡ã€è§†é¢‘
async function multiModalSearch(query) {
  const textEmbedding = await getTextEmbedding(query.text)
  const imageEmbedding = await getImageEmbedding(query.image)
  const audioEmbedding = await getAudioEmbedding(query.audio)

  // åŒæ—¶æ£€ç´¢å¤šä¸ªæ¨¡æ€
  const results = await searchMultiModal({
    textVector: textEmbedding,
    imageVector: imageEmbedding,
    audioVector: audioEmbedding
  })

  return results
}
```

**å¯¹åº” Milvusï¼š**
```python
# Milvusï¼šå¤šæ¨¡æ€æ£€ç´¢
from pymilvus import AnnSearchRequest, RRFRanker

# æ–‡æœ¬å‘é‡æ£€ç´¢
text_req = AnnSearchRequest(
    data=[text_embedding],
    anns_field="text_vector",
    param={"metric_type": "COSINE"},
    limit=10
)

# å›¾ç‰‡å‘é‡æ£€ç´¢
image_req = AnnSearchRequest(
    data=[image_embedding],
    anns_field="image_vector",
    param={"metric_type": "COSINE"},
    limit=10
)

# èåˆå¤šæ¨¡æ€ç»“æœ
results = collection.hybrid_search(
    reqs=[text_req, image_req],
    rerank=RRFRanker(),
    limit=5
)
```

### æ—¥å¸¸ç”Ÿæ´»ç±»æ¯”ï¼šé€šè¿‡å¤šä¸ªæ„Ÿå®˜è¯†åˆ«æ°´æœ

**åœºæ™¯ï¼š** ä½ åœ¨æ°´æœåº—æŒ‘é€‰æ°´æœ

```
è¯†åˆ«è‹¹æœçš„å¤šä¸ªç»´åº¦ï¼š
- è§†è§‰ï¼šçº¢è‰²ã€åœ†å½¢ ğŸ‘ï¸
- è§¦è§‰ï¼šå…‰æ»‘ã€ç¡¬å® âœ‹
- å—…è§‰ï¼šæ¸…é¦™ ğŸ‘ƒ
- å‘³è§‰ï¼šç”œä¸­å¸¦é…¸ ğŸ‘…

å•ä¸€æ„Ÿå®˜å¯èƒ½ä¸å‡†ç¡®ï¼š
- åªçœ‹é¢œè‰²ï¼šå¯èƒ½æ˜¯å‡è‹¹æœï¼ˆå¡‘æ–™æ¨¡å‹ï¼‰
- åªé—»æ°”å‘³ï¼šå¯èƒ½æ˜¯è‹¹æœé¦™æ°´

å¤šæ„Ÿå®˜ç»¼åˆåˆ¤æ–­ï¼š
- è§†è§‰ + è§¦è§‰ + å—…è§‰ â†’ ç¡®è®¤æ˜¯çœŸè‹¹æœ âœ…
```

**å¤šæ¨¡æ€æ£€ç´¢ = é€šè¿‡å¤šä¸ª"æ„Ÿå®˜"ï¼ˆå‘é‡å­—æ®µï¼‰ç»¼åˆåˆ¤æ–­**

---

## ç±»æ¯”æ€»ç»“è¡¨

| å¤šå‘é‡æ£€ç´¢æ¦‚å¿µ | å‰ç«¯ç±»æ¯” | æ—¥å¸¸ç”Ÿæ´»ç±»æ¯” |
|--------------|----------|--------------|
| **å¤šå­—æ®µå‘é‡** | å•†å“å¯¹è±¡çš„å¤šä¸ªå±æ€§ï¼ˆæ–‡æœ¬ã€å›¾ç‰‡ã€ä»·æ ¼ç‰¹å¾ï¼‰ | æ‰¾æˆ¿å­çš„å¤šä¸ªç»´åº¦ï¼ˆä½ç½®ã€ä»·æ ¼ã€è£…ä¿®ï¼‰ |
| **æ··åˆæ£€ç´¢** | èšåˆæœç´¢ï¼ˆåŒæ—¶è°ƒç”¨Googleã€Bingã€Baiduï¼‰ | é—®å¤šä¸ªæœ‹å‹æ¨èé¤å… |
| **RRFèåˆ** | å¤šä¸ªæ’åºç®—æ³•çš„èåˆï¼ˆåªçœ‹æ’åï¼‰ | å¥¥è¿ä¼šè¯„åˆ†ç³»ç»Ÿï¼ˆå¤šä¸ªè£åˆ¤æ‰“åˆ†ï¼‰ |
| **åŠ æƒèåˆ** | åŠ æƒè¯„åˆ†ç³»ç»Ÿï¼ˆä¸åŒç»´åº¦æƒé‡ä¸åŒï¼‰ | æ‹›è˜é¢è¯•çš„ç»¼åˆè¯„åˆ† |
| **å¤šæ¨¡æ€æ£€ç´¢** | å¤šåª’ä½“æœç´¢ï¼ˆæ–‡æœ¬+å›¾ç‰‡+éŸ³é¢‘ï¼‰ | é€šè¿‡å¤šä¸ªæ„Ÿå®˜è¯†åˆ«æ°´æœ |
| **Collection** | æ•°æ®åº“è¡¨ | å›¾ä¹¦é¦†çš„ä¸€ä¸ªä¹¦æ¶ |
| **å‘é‡å­—æ®µ** | å¯¹è±¡å±æ€§ | ä¹¦çš„"æŒ‡çº¹"ï¼ˆç‹¬ç‰¹æ ‡è¯†ï¼‰ |
| **æ£€ç´¢è¯·æ±‚** | APIè¯·æ±‚ | å‘å›¾ä¹¦ç®¡ç†å‘˜æé—® |
| **èåˆç®—æ³•** | æ•°æ®èšåˆé€»è¾‘ | ç»¼åˆå¤šä¸ªæ„è§åšå†³ç­– |

---

## ä¸ºä»€ä¹ˆè¿™äº›ç±»æ¯”æœ‰æ•ˆï¼Ÿ

### 1. å¤šå­—æ®µå‘é‡ â‰ˆ å¤šç»´åº¦å±æ€§

**å…±åŒç‚¹ï¼š**
- éƒ½æ˜¯æè¿°åŒä¸€ä¸ªå¯¹è±¡çš„ä¸åŒæ–¹é¢
- æ¯ä¸ªç»´åº¦éƒ½æœ‰ç‹¬ç«‹çš„å€¼
- å¯ä»¥å•ç‹¬æŸ¥è¯¢ï¼Œä¹Ÿå¯ä»¥ç»„åˆæŸ¥è¯¢

**å·®å¼‚ï¼š**
- å‰ç«¯å±æ€§æ˜¯æ ‡é‡ï¼ˆæ•°å­—ã€å­—ç¬¦ä¸²ï¼‰
- å‘é‡å­—æ®µæ˜¯é«˜ç»´å‘é‡ï¼ˆæ•°ç»„ï¼‰

---

### 2. æ··åˆæ£€ç´¢ â‰ˆ èšåˆæœç´¢

**å…±åŒç‚¹ï¼š**
- éƒ½æ˜¯å¹¶è¡Œæ‰§è¡Œå¤šä¸ªæŸ¥è¯¢
- éƒ½éœ€è¦èåˆå¤šä¸ªç»“æœ
- éƒ½è¦å»é‡å’Œæ’åº

**å·®å¼‚ï¼š**
- èšåˆæœç´¢æ˜¯è·¨ä¸åŒæ•°æ®æº
- æ··åˆæ£€ç´¢æ˜¯åŒä¸€æ•°æ®æºçš„ä¸åŒå­—æ®µ

---

### 3. RRFèåˆ â‰ˆ æŠ•ç¥¨ç³»ç»Ÿ

**å…±åŒç‚¹ï¼š**
- éƒ½åªçœ‹æ’åï¼Œä¸çœ‹ç»å¯¹åˆ†æ•°
- æ’åé å‰çš„æƒé‡æ›´é«˜
- å…¬å¹³æ€§æ›´å¥½ï¼ˆä¸å—è¯„åˆ†æ ‡å‡†å½±å“ï¼‰

**å·®å¼‚ï¼š**
- RRFæœ‰æ•°å­¦å…¬å¼ï¼ˆ1/(k+rank)ï¼‰
- æŠ•ç¥¨ç³»ç»Ÿå¯èƒ½æ˜¯ç®€å•è®¡æ•°

---

### 4. åŠ æƒèåˆ â‰ˆ åŠ æƒå¹³å‡

**å…±åŒç‚¹ï¼š**
- éƒ½ç»™ä¸åŒç»´åº¦åˆ†é…æƒé‡
- éƒ½æ˜¯çº¿æ€§ç»„åˆ
- æƒé‡å’Œä¸º1

**å·®å¼‚ï¼š**
- åŠ æƒèåˆå¤„ç†çš„æ˜¯ç›¸ä¼¼åº¦åˆ†æ•°
- åŠ æƒå¹³å‡å¤„ç†çš„æ˜¯ä»»æ„æ•°å€¼

---

### 5. å¤šæ¨¡æ€æ£€ç´¢ â‰ˆ å¤šæ„Ÿå®˜è¯†åˆ«

**å…±åŒç‚¹ï¼š**
- éƒ½æ˜¯èåˆå¤šä¸ªä¿¡æ¯æº
- å•ä¸€ä¿¡æ¯æºå¯èƒ½ä¸å‡†ç¡®
- ç»¼åˆåˆ¤æ–­æ›´å¯é 

**å·®å¼‚ï¼š**
- å¤šæ¨¡æ€æ£€ç´¢æ˜¯æ•°å­—å‘é‡
- å¤šæ„Ÿå®˜è¯†åˆ«æ˜¯ç‰©ç†ä¿¡å·

---

## å®é™…åº”ç”¨ä¸­çš„ç±»æ¯”

### åœºæ™¯ï¼šç”µå•†æœç´¢

**ç”¨æˆ·è¾“å…¥ï¼š** "çº¢è‰²è¿è¡£è£™"

```python
# 1. ç”Ÿæˆå¤šä¸ªæŸ¥è¯¢å‘é‡
text_embedding = get_text_embedding("çº¢è‰²è¿è¡£è£™")      # æ–‡æœ¬ç†è§£
image_embedding = get_image_embedding(user_sketch)     # ç”¨æˆ·æ‰‹ç»˜è‰å›¾
color_embedding = get_color_embedding("çº¢è‰²")          # é¢œè‰²ç‰¹å¾

# 2. æ··åˆæ£€ç´¢
text_req = AnnSearchRequest(data=[text_embedding], anns_field="text_vector", limit=10)
image_req = AnnSearchRequest(data=[image_embedding], anns_field="image_vector", limit=10)
color_req = AnnSearchRequest(data=[color_embedding], anns_field="color_vector", limit=10)

# 3. åŠ æƒèåˆï¼ˆæ–‡æœ¬æƒé‡æœ€é«˜ï¼‰
results = collection.hybrid_search(
    reqs=[text_req, image_req, color_req],
    rerank=RRFRanker(),
    limit=20
)
```

**ç±»æ¯”ï¼š**
- æ–‡æœ¬å‘é‡ = å¬ç”¨æˆ·æè¿°
- å›¾ç‰‡å‘é‡ = çœ‹ç”¨æˆ·æ‰‹ç»˜
- é¢œè‰²å‘é‡ = ç¡®è®¤é¢œè‰²åå¥½
- RRFèåˆ = ç»¼åˆä¸‰ä¸ªç»´åº¦æ‰¾åˆ°æœ€åŒ¹é…çš„å•†å“

---

**ç»§ç»­å­¦ä¹ ï¼š** [08_åç›´è§‰ç‚¹.md](./08_åç›´è§‰ç‚¹.md)
