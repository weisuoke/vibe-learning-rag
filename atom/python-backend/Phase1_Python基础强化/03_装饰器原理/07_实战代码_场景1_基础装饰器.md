# å®æˆ˜ä»£ç  - åœºæ™¯1ï¼šåŸºç¡€è£…é¥°å™¨å®ç°

> å®Œæ•´å¯è¿è¡Œçš„åŸºç¡€è£…é¥°å™¨ç¤ºä¾‹ï¼ŒåŒ…å«æ—¥å¿—ã€è®¡æ—¶ã€è®¡æ•°ã€å¼‚å¸¸å¤„ç†

---

## åœºæ™¯æ¦‚è¿°

æœ¬åœºæ™¯å±•ç¤ºæœ€å¸¸ç”¨çš„åŸºç¡€è£…é¥°å™¨æ¨¡å¼ï¼Œè¿™äº›è£…é¥°å™¨åœ¨ AI Agent å¼€å‘ä¸­éšå¤„å¯è§ã€‚

**åŒ…å«å†…å®¹ï¼š**
1. æ—¥å¿—è£…é¥°å™¨ï¼ˆè®°å½•å‡½æ•°è°ƒç”¨ï¼‰
2. è®¡æ—¶è£…é¥°å™¨ï¼ˆæ€§èƒ½ç›‘æ§ï¼‰
3. è®¡æ•°è£…é¥°å™¨ï¼ˆè°ƒç”¨ç»Ÿè®¡ï¼‰
4. å¼‚å¸¸å¤„ç†è£…é¥°å™¨ï¼ˆç»Ÿä¸€é”™è¯¯å¤„ç†ï¼‰

---

## å®Œæ•´ä»£ç ç¤ºä¾‹

```python
"""
åŸºç¡€è£…é¥°å™¨å®ç°ç¤ºä¾‹
æ¼”ç¤ºï¼šæ—¥å¿—ã€è®¡æ—¶ã€è®¡æ•°ã€å¼‚å¸¸å¤„ç†è£…é¥°å™¨
"""

from functools import wraps
from datetime import datetime
import time
from typing import Any, Callable

# ===== 1. æ—¥å¿—è£…é¥°å™¨ =====

def log(func: Callable) -> Callable:
    """
    æ—¥å¿—è£…é¥°å™¨ï¼šè®°å½•å‡½æ•°è°ƒç”¨ä¿¡æ¯

    åŠŸèƒ½ï¼š
    - è®°å½•å‡½æ•°å
    - è®°å½•è°ƒç”¨æ—¶é—´
    - è®°å½•å‚æ•°
    - è®°å½•è¿”å›å€¼
    """
    @wraps(func)
    def wrapper(*args, **kwargs):
        # è®°å½•è°ƒç”¨æ—¶é—´
        timestamp = datetime.now().strftime("%Y-%m-%d %H:%M:%S")

        # è®°å½•å‡½æ•°è°ƒç”¨
        print(f"\n[{timestamp}] è°ƒç”¨å‡½æ•°: {func.__name__}")
        print(f"  å‚æ•°: args={args}, kwargs={kwargs}")

        # æ‰§è¡Œå‡½æ•°
        try:
            result = func(*args, **kwargs)
            print(f"  è¿”å›å€¼: {result}")
            return result
        except Exception as e:
            print(f"  å¼‚å¸¸: {type(e).__name__}: {e}")
            raise

    return wrapper


# ===== 2. è®¡æ—¶è£…é¥°å™¨ =====

def timing(func: Callable) -> Callable:
    """
    è®¡æ—¶è£…é¥°å™¨ï¼šæµ‹é‡å‡½æ•°æ‰§è¡Œæ—¶é—´

    åŠŸèƒ½ï¼š
    - è®°å½•å¼€å§‹æ—¶é—´
    - è®°å½•ç»“æŸæ—¶é—´
    - è®¡ç®—æ‰§è¡Œæ—¶é•¿
    - è¾“å‡ºæ€§èƒ½æŠ¥å‘Š
    """
    @wraps(func)
    def wrapper(*args, **kwargs):
        # è®°å½•å¼€å§‹æ—¶é—´
        start_time = time.time()

        # æ‰§è¡Œå‡½æ•°
        result = func(*args, **kwargs)

        # è®°å½•ç»“æŸæ—¶é—´
        end_time = time.time()
        elapsed = end_time - start_time

        # è¾“å‡ºæ€§èƒ½æŠ¥å‘Š
        print(f"\nâ±ï¸  {func.__name__} æ‰§è¡Œæ—¶é—´: {elapsed:.4f}ç§’")

        return result

    return wrapper


# ===== 3. è®¡æ•°è£…é¥°å™¨ï¼ˆç±»å®ç°ï¼‰=====

class CountCalls:
    """
    è®¡æ•°è£…é¥°å™¨ï¼šç»Ÿè®¡å‡½æ•°è°ƒç”¨æ¬¡æ•°

    åŠŸèƒ½ï¼š
    - è®°å½•è°ƒç”¨æ¬¡æ•°
    - æä¾›é‡ç½®æ–¹æ³•
    - æä¾›ç»Ÿè®¡æŠ¥å‘Š
    """

    def __init__(self, func: Callable):
        wraps(func)(self)
        self.func = func
        self.count = 0
        self.call_history = []

    def __call__(self, *args, **kwargs):
        # å¢åŠ è®¡æ•°
        self.count += 1

        # è®°å½•è°ƒç”¨å†å²
        timestamp = datetime.now().strftime("%Y-%m-%d %H:%M:%S")
        self.call_history.append({
            "count": self.count,
            "timestamp": timestamp,
            "args": args,
            "kwargs": kwargs
        })

        # è¾“å‡ºè°ƒç”¨ä¿¡æ¯
        print(f"\nğŸ“Š [{self.count}] è°ƒç”¨ {self.func.__name__}")

        # æ‰§è¡Œå‡½æ•°
        return self.func(*args, **kwargs)

    def reset(self):
        """é‡ç½®è®¡æ•°å™¨"""
        self.count = 0
        self.call_history = []
        print(f"\nğŸ”„ {self.func.__name__} è®¡æ•°å™¨å·²é‡ç½®")

    def report(self):
        """ç”Ÿæˆç»Ÿè®¡æŠ¥å‘Š"""
        print(f"\nğŸ“ˆ {self.func.__name__} ç»Ÿè®¡æŠ¥å‘Š:")
        print(f"  æ€»è°ƒç”¨æ¬¡æ•°: {self.count}")
        print(f"  è°ƒç”¨å†å²:")
        for record in self.call_history[-5:]:  # åªæ˜¾ç¤ºæœ€è¿‘5æ¬¡
            print(f"    [{record['count']}] {record['timestamp']}")


# ===== 4. å¼‚å¸¸å¤„ç†è£…é¥°å™¨ =====

def handle_errors(default_return: Any = None, log_errors: bool = True):
    """
    å¼‚å¸¸å¤„ç†è£…é¥°å™¨å·¥å‚ï¼šç»Ÿä¸€å¤„ç†å‡½æ•°å¼‚å¸¸

    å‚æ•°:
        default_return: å‘ç”Ÿå¼‚å¸¸æ—¶çš„é»˜è®¤è¿”å›å€¼
        log_errors: æ˜¯å¦è®°å½•é”™è¯¯æ—¥å¿—

    åŠŸèƒ½ï¼š
    - æ•è·æ‰€æœ‰å¼‚å¸¸
    - è®°å½•é”™è¯¯æ—¥å¿—
    - è¿”å›é»˜è®¤å€¼
    - é¿å…ç¨‹åºå´©æºƒ
    """
    def decorator(func: Callable) -> Callable:
        @wraps(func)
        def wrapper(*args, **kwargs):
            try:
                return func(*args, **kwargs)
            except Exception as e:
                if log_errors:
                    timestamp = datetime.now().strftime("%Y-%m-%d %H:%M:%S")
                    print(f"\nâŒ [{timestamp}] {func.__name__} å‘ç”Ÿé”™è¯¯:")
                    print(f"  é”™è¯¯ç±»å‹: {type(e).__name__}")
                    print(f"  é”™è¯¯ä¿¡æ¯: {e}")
                    print(f"  è¿”å›é»˜è®¤å€¼: {default_return}")

                return default_return

        return wrapper
    return decorator


# ===== 5. ç»„åˆè£…é¥°å™¨ç¤ºä¾‹ =====

def retry(max_attempts: int = 3, delay: float = 1.0):
    """
    é‡è¯•è£…é¥°å™¨ï¼šå‡½æ•°å¤±è´¥æ—¶è‡ªåŠ¨é‡è¯•

    å‚æ•°:
        max_attempts: æœ€å¤§é‡è¯•æ¬¡æ•°
        delay: é‡è¯•é—´éš”ï¼ˆç§’ï¼‰

    åŠŸèƒ½ï¼š
    - è‡ªåŠ¨é‡è¯•å¤±è´¥çš„å‡½æ•°
    - å¯é…ç½®é‡è¯•æ¬¡æ•°
    - å¯é…ç½®é‡è¯•é—´éš”
    """
    def decorator(func: Callable) -> Callable:
        @wraps(func)
        def wrapper(*args, **kwargs):
            for attempt in range(1, max_attempts + 1):
                try:
                    print(f"\nğŸ”„ å°è¯• {attempt}/{max_attempts}: {func.__name__}")
                    result = func(*args, **kwargs)
                    print(f"âœ… æˆåŠŸï¼")
                    return result
                except Exception as e:
                    print(f"âŒ å¤±è´¥: {e}")
                    if attempt == max_attempts:
                        print(f"â›” è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°ï¼Œæ”¾å¼ƒ")
                        raise
                    print(f"â³ ç­‰å¾… {delay} ç§’åé‡è¯•...")
                    time.sleep(delay)

        return wrapper
    return decorator


# ===== æµ‹è¯•ç¤ºä¾‹ =====

if __name__ == "__main__":
    print("=" * 60)
    print("åŸºç¡€è£…é¥°å™¨ç¤ºä¾‹")
    print("=" * 60)

    # ===== ç¤ºä¾‹1ï¼šæ—¥å¿—è£…é¥°å™¨ =====
    print("\n" + "=" * 60)
    print("ç¤ºä¾‹1ï¼šæ—¥å¿—è£…é¥°å™¨")
    print("=" * 60)

    @log
    def greet(name: str, greeting: str = "Hello") -> str:
        """é—®å€™å‡½æ•°"""
        return f"{greeting}, {name}!"

    result = greet("Alice")
    result = greet("Bob", greeting="Hi")

    # ===== ç¤ºä¾‹2ï¼šè®¡æ—¶è£…é¥°å™¨ =====
    print("\n" + "=" * 60)
    print("ç¤ºä¾‹2ï¼šè®¡æ—¶è£…é¥°å™¨")
    print("=" * 60)

    @timing
    def slow_function(n: int) -> int:
        """æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ"""
        time.sleep(n * 0.1)
        return n * n

    result = slow_function(5)
    print(f"ç»“æœ: {result}")

    # ===== ç¤ºä¾‹3ï¼šè®¡æ•°è£…é¥°å™¨ =====
    print("\n" + "=" * 60)
    print("ç¤ºä¾‹3ï¼šè®¡æ•°è£…é¥°å™¨")
    print("=" * 60)

    @CountCalls
    def process_data(data: str) -> str:
        """å¤„ç†æ•°æ®"""
        return f"å¤„ç†: {data}"

    process_data("A")
    process_data("B")
    process_data("C")

    # æŸ¥çœ‹ç»Ÿè®¡æŠ¥å‘Š
    process_data.report()

    # é‡ç½®è®¡æ•°å™¨
    process_data.reset()
    process_data("D")

    # ===== ç¤ºä¾‹4ï¼šå¼‚å¸¸å¤„ç†è£…é¥°å™¨ =====
    print("\n" + "=" * 60)
    print("ç¤ºä¾‹4ï¼šå¼‚å¸¸å¤„ç†è£…é¥°å™¨")
    print("=" * 60)

    @handle_errors(default_return=0, log_errors=True)
    def divide(a: int, b: int) -> float:
        """é™¤æ³•è¿ç®—"""
        return a / b

    result = divide(10, 2)
    print(f"10 / 2 = {result}")

    result = divide(10, 0)  # ä¼šè§¦å‘å¼‚å¸¸
    print(f"10 / 0 = {result}")

    # ===== ç¤ºä¾‹5ï¼šé‡è¯•è£…é¥°å™¨ =====
    print("\n" + "=" * 60)
    print("ç¤ºä¾‹5ï¼šé‡è¯•è£…é¥°å™¨")
    print("=" * 60)

    import random

    @retry(max_attempts=5, delay=0.5)
    def unstable_api_call() -> str:
        """æ¨¡æ‹Ÿä¸ç¨³å®šçš„ API è°ƒç”¨ï¼ˆ70% å¤±è´¥ç‡ï¼‰"""
        if random.random() < 0.7:
            raise ConnectionError("ç½‘ç»œè¿æ¥å¤±è´¥")
        return "API è°ƒç”¨æˆåŠŸ"

    try:
        result = unstable_api_call()
        print(f"æœ€ç»ˆç»“æœ: {result}")
    except ConnectionError:
        print("API è°ƒç”¨æœ€ç»ˆå¤±è´¥")

    # ===== ç¤ºä¾‹6ï¼šç»„åˆå¤šä¸ªè£…é¥°å™¨ =====
    print("\n" + "=" * 60)
    print("ç¤ºä¾‹6ï¼šç»„åˆå¤šä¸ªè£…é¥°å™¨")
    print("=" * 60)

    @log
    @timing
    @CountCalls
    def complex_operation(x: int, y: int) -> int:
        """å¤æ‚æ“ä½œ"""
        time.sleep(0.1)
        return x * y + x + y

    result = complex_operation(3, 4)
    result = complex_operation(5, 6)

    # ===== ç¤ºä¾‹7ï¼šå®é™…åº”ç”¨åœºæ™¯ =====
    print("\n" + "=" * 60)
    print("ç¤ºä¾‹7ï¼šAI Agent å‡½æ•°è£…é¥°")
    print("=" * 60)

    @log
    @timing
    @handle_errors(default_return="ç”Ÿæˆå¤±è´¥", log_errors=True)
    def generate_ai_response(prompt: str) -> str:
        """
        æ¨¡æ‹Ÿ AI ç”Ÿæˆå“åº”

        åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œä¼šè°ƒç”¨ OpenAI API
        """
        # æ¨¡æ‹Ÿ API è°ƒç”¨
        time.sleep(0.2)

        # æ¨¡æ‹Ÿå¶å°”å¤±è´¥
        if "error" in prompt.lower():
            raise Exception("API è°ƒç”¨å¤±è´¥")

        return f"AI å›å¤: å…³äº '{prompt}' çš„å›ç­”..."

    # æ­£å¸¸è°ƒç”¨
    response = generate_ai_response("ä»€ä¹ˆæ˜¯è£…é¥°å™¨ï¼Ÿ")
    print(f"\nå“åº”: {response}")

    # è§¦å‘é”™è¯¯
    response = generate_ai_response("error test")
    print(f"\nå“åº”: {response}")

    print("\n" + "=" * 60)
    print("ç¤ºä¾‹å®Œæˆ")
    print("=" * 60)
```

---

## è¿è¡Œè¾“å‡ºç¤ºä¾‹

```
============================================================
åŸºç¡€è£…é¥°å™¨ç¤ºä¾‹
============================================================

============================================================
ç¤ºä¾‹1ï¼šæ—¥å¿—è£…é¥°å™¨
============================================================

[2026-02-11 13:15:30] è°ƒç”¨å‡½æ•°: greet
  å‚æ•°: args=('Alice',), kwargs={}
  è¿”å›å€¼: Hello, Alice!

[2026-02-11 13:15:30] è°ƒç”¨å‡½æ•°: greet
  å‚æ•°: args=('Bob',), kwargs={'greeting': 'Hi'}
  è¿”å›å€¼: Hi, Bob!

============================================================
ç¤ºä¾‹2ï¼šè®¡æ—¶è£…é¥°å™¨
============================================================

â±ï¸  slow_function æ‰§è¡Œæ—¶é—´: 0.5012ç§’
ç»“æœ: 25

============================================================
ç¤ºä¾‹3ï¼šè®¡æ•°è£…é¥°å™¨
============================================================

ğŸ“Š [1] è°ƒç”¨ process_data

ğŸ“Š [2] è°ƒç”¨ process_data

ğŸ“Š [3] è°ƒç”¨ process_data

ğŸ“ˆ process_data ç»Ÿè®¡æŠ¥å‘Š:
  æ€»è°ƒç”¨æ¬¡æ•°: 3
  è°ƒç”¨å†å²:
    [1] 2026-02-11 13:15:31
    [2] 2026-02-11 13:15:31
    [3] 2026-02-11 13:15:31

ğŸ”„ process_data è®¡æ•°å™¨å·²é‡ç½®

ğŸ“Š [1] è°ƒç”¨ process_data

============================================================
ç¤ºä¾‹4ï¼šå¼‚å¸¸å¤„ç†è£…é¥°å™¨
============================================================
10 / 2 = 5.0

âŒ [2026-02-11 13:15:31] divide å‘ç”Ÿé”™è¯¯:
  é”™è¯¯ç±»å‹: ZeroDivisionError
  é”™è¯¯ä¿¡æ¯: division by zero
  è¿”å›é»˜è®¤å€¼: 0
10 / 0 = 0

============================================================
ç¤ºä¾‹5ï¼šé‡è¯•è£…é¥°å™¨
============================================================

ğŸ”„ å°è¯• 1/5: unstable_api_call
âŒ å¤±è´¥: ç½‘ç»œè¿æ¥å¤±è´¥
â³ ç­‰å¾… 0.5 ç§’åé‡è¯•...

ğŸ”„ å°è¯• 2/5: unstable_api_call
âŒ å¤±è´¥: ç½‘ç»œè¿æ¥å¤±è´¥
â³ ç­‰å¾… 0.5 ç§’åé‡è¯•...

ğŸ”„ å°è¯• 3/5: unstable_api_call
âœ… æˆåŠŸï¼
æœ€ç»ˆç»“æœ: API è°ƒç”¨æˆåŠŸ

============================================================
ç¤ºä¾‹6ï¼šç»„åˆå¤šä¸ªè£…é¥°å™¨
============================================================

ğŸ“Š [1] è°ƒç”¨ complex_operation

[2026-02-11 13:15:32] è°ƒç”¨å‡½æ•°: complex_operation
  å‚æ•°: args=(3, 4), kwargs={}
  è¿”å›å€¼: 19

â±ï¸  complex_operation æ‰§è¡Œæ—¶é—´: 0.1005ç§’

ğŸ“Š [2] è°ƒç”¨ complex_operation

[2026-02-11 13:15:32] è°ƒç”¨å‡½æ•°: complex_operation
  å‚æ•°: args=(5, 6), kwargs={}
  è¿”å›å€¼: 41

â±ï¸  complex_operation æ‰§è¡Œæ—¶é—´: 0.1003ç§’

============================================================
ç¤ºä¾‹7ï¼šAI Agent å‡½æ•°è£…é¥°
============================================================

[2026-02-11 13:15:32] è°ƒç”¨å‡½æ•°: generate_ai_response
  å‚æ•°: args=('ä»€ä¹ˆæ˜¯è£…é¥°å™¨ï¼Ÿ',), kwargs={}
  è¿”å›å€¼: AI å›å¤: å…³äº 'ä»€ä¹ˆæ˜¯è£…é¥°å™¨ï¼Ÿ' çš„å›ç­”...

â±ï¸  generate_ai_response æ‰§è¡Œæ—¶é—´: 0.2008ç§’

å“åº”: AI å›å¤: å…³äº 'ä»€ä¹ˆæ˜¯è£…é¥°å™¨ï¼Ÿ' çš„å›ç­”...

[2026-02-11 13:15:33] è°ƒç”¨å‡½æ•°: generate_ai_response
  å‚æ•°: args=('error test',), kwargs={}
  å¼‚å¸¸: Exception: API è°ƒç”¨å¤±è´¥

âŒ [2026-02-11 13:15:33] generate_ai_response å‘ç”Ÿé”™è¯¯:
  é”™è¯¯ç±»å‹: Exception
  é”™è¯¯ä¿¡æ¯: API è°ƒç”¨å¤±è´¥
  è¿”å›é»˜è®¤å€¼: ç”Ÿæˆå¤±è´¥

â±ï¸  generate_ai_response æ‰§è¡Œæ—¶é—´: 0.2005ç§’

å“åº”: ç”Ÿæˆå¤±è´¥

============================================================
ç¤ºä¾‹å®Œæˆ
============================================================
```

---

## å…³é”®çŸ¥è¯†ç‚¹

### 1. ä½¿ç”¨ `@wraps(func)` ä¿ç•™å…ƒä¿¡æ¯

```python
from functools import wraps

# âœ… æ­£ç¡®ï¼šä½¿ç”¨ @wraps
def good_decorator(func):
    @wraps(func)  # ä¿ç•™åŸå‡½æ•°çš„ __name__, __doc__ ç­‰
    def wrapper(*args, **kwargs):
        return func(*args, **kwargs)
    return wrapper

# âŒ é”™è¯¯ï¼šä¸ä½¿ç”¨ @wraps
def bad_decorator(func):
    def wrapper(*args, **kwargs):
        return func(*args, **kwargs)
    return wrapper  # åŸå‡½æ•°ä¿¡æ¯ä¸¢å¤±
```

### 2. ä½¿ç”¨ `*args, **kwargs` æ¥æ”¶ä»»æ„å‚æ•°

```python
def flexible_decorator(func):
    @wraps(func)
    def wrapper(*args, **kwargs):  # æ¥æ”¶ä»»æ„å‚æ•°
        return func(*args, **kwargs)  # ä¼ é€’ç»™åŸå‡½æ•°
    return wrapper

# å¯ä»¥è£…é¥°ä»»ä½•å‡½æ•°
@flexible_decorator
def func1():
    pass

@flexible_decorator
def func2(a, b, c=10):
    pass
```

### 3. ç±»è£…é¥°å™¨ç”¨äºçŠ¶æ€ç®¡ç†

```python
class StatefulDecorator:
    def __init__(self, func):
        wraps(func)(self)
        self.func = func
        self.state = {}  # å­˜å‚¨çŠ¶æ€

    def __call__(self, *args, **kwargs):
        # å¯ä»¥è®¿é—®å’Œä¿®æ”¹ self.state
        return self.func(*args, **kwargs)
```

### 4. è£…é¥°å™¨å·¥å‚ç”¨äºé…ç½®

```python
def configurable_decorator(param1, param2):
    """è£…é¥°å™¨å·¥å‚ï¼šæ ¹æ®å‚æ•°åˆ›å»ºè£…é¥°å™¨"""
    def decorator(func):
        @wraps(func)
        def wrapper(*args, **kwargs):
            # å¯ä»¥è®¿é—® param1, param2
            return func(*args, **kwargs)
        return wrapper
    return decorator

@configurable_decorator(param1="value1", param2="value2")
def my_function():
    pass
```

---

## å®é™…åº”ç”¨åœºæ™¯

### åœºæ™¯1ï¼šAPI ç«¯ç‚¹ç›‘æ§

```python
@log
@timing
@handle_errors(default_return={"error": "Internal Server Error"})
async def api_endpoint(request):
    """API ç«¯ç‚¹"""
    # å¤„ç†è¯·æ±‚
    return {"status": "success"}
```

### åœºæ™¯2ï¼šæ•°æ®åº“æ“ä½œ

```python
@retry(max_attempts=3, delay=1.0)
@timing
@log
def database_query(sql):
    """æ•°æ®åº“æŸ¥è¯¢"""
    # æ‰§è¡Œ SQL
    return results
```

### åœºæ™¯3ï¼šAI æ¨¡å‹è°ƒç”¨

```python
@retry(max_attempts=5, delay=2.0)
@timing
@handle_errors(default_return="ç”Ÿæˆå¤±è´¥")
def call_llm_api(prompt):
    """è°ƒç”¨ LLM API"""
    # è°ƒç”¨ OpenAI API
    return response
```

---

## æ‰©å±•ç»ƒä¹ 

1. **ç»ƒä¹ 1ï¼šå®ç°ä¸€ä¸ªç¼“å­˜è£…é¥°å™¨**
   - ç¼“å­˜å‡½æ•°çš„è¿”å›å€¼
   - æ”¯æŒè®¾ç½®è¿‡æœŸæ—¶é—´
   - æ”¯æŒæ¸…ç©ºç¼“å­˜

2. **ç»ƒä¹ 2ï¼šå®ç°ä¸€ä¸ªé™æµè£…é¥°å™¨**
   - é™åˆ¶å‡½æ•°åœ¨æ—¶é—´çª—å£å†…çš„è°ƒç”¨æ¬¡æ•°
   - è¶…è¿‡é™åˆ¶æ—¶æŠ›å‡ºå¼‚å¸¸
   - æ”¯æŒä¸åŒçš„é™æµç­–ç•¥

3. **ç»ƒä¹ 3ï¼šå®ç°ä¸€ä¸ªå¼‚æ­¥è£…é¥°å™¨**
   - æ”¯æŒå¼‚æ­¥å‡½æ•°
   - è®°å½•å¼‚æ­¥å‡½æ•°çš„æ‰§è¡Œæ—¶é—´
   - å¤„ç†å¼‚æ­¥å¼‚å¸¸

---

## æ€»ç»“

**åŸºç¡€è£…é¥°å™¨çš„æ ¸å¿ƒæ¨¡å¼ï¼š**

1. **æ—¥å¿—è£…é¥°å™¨**ï¼šè®°å½•å‡½æ•°è°ƒç”¨ä¿¡æ¯
2. **è®¡æ—¶è£…é¥°å™¨**ï¼šæµ‹é‡å‡½æ•°æ‰§è¡Œæ—¶é—´
3. **è®¡æ•°è£…é¥°å™¨**ï¼šç»Ÿè®¡å‡½æ•°è°ƒç”¨æ¬¡æ•°
4. **å¼‚å¸¸å¤„ç†è£…é¥°å™¨**ï¼šç»Ÿä¸€å¤„ç†å‡½æ•°å¼‚å¸¸
5. **é‡è¯•è£…é¥°å™¨**ï¼šè‡ªåŠ¨é‡è¯•å¤±è´¥çš„å‡½æ•°

**æœ€ä½³å®è·µï¼š**
- ä½¿ç”¨ `@wraps(func)` ä¿ç•™åŸå‡½æ•°ä¿¡æ¯
- ä½¿ç”¨ `*args, **kwargs` æ¥æ”¶ä»»æ„å‚æ•°
- ç±»è£…é¥°å™¨ç”¨äºéœ€è¦çŠ¶æ€ç®¡ç†çš„åœºæ™¯
- è£…é¥°å™¨å·¥å‚ç”¨äºéœ€è¦é…ç½®çš„åœºæ™¯
- å¤šä¸ªè£…é¥°å™¨å¯ä»¥ç»„åˆä½¿ç”¨

**ä¸‹ä¸€æ­¥ï¼š**
- åœºæ™¯2ï¼šFastAPI è·¯ç”±è£…é¥°å™¨åŸç†
- åœºæ™¯3ï¼šæƒé™ä¸è®¤è¯è£…é¥°å™¨
- åœºæ™¯4ï¼šç¼“å­˜ä¸æ€§èƒ½ä¼˜åŒ–
- åœºæ™¯5ï¼šAI Agent ä¸“ç”¨è£…é¥°å™¨
