# å·¥å…·ç»„åˆæ¨¡å¼

> å±•ç¤º readã€writeã€editã€bash å››ä¸ªå·¥å…·çš„åä½œæ¨¡å¼

---

## æ¨¡å¼ 1ï¼šRead â†’ Edit â†’ Bashï¼ˆä¿®å¤ Bugï¼‰

```typescript
// bug-fixer.ts
import fs from 'fs'
import { execSync } from 'child_process'

async function fixBug() {
  console.log('ğŸ› Fixing bug in calculator.ts\n')

  // 1. Read - æŸ¥çœ‹ä»£ç 
  console.log('ğŸ“– Reading file...')
  const content = fs.readFileSync('src/calculator.ts', 'utf-8')
  console.log(content)

  // 2. Edit - ä¿®å¤ bug
  console.log('\nâœï¸  Fixing bug...')
  const fixed = content.replace('return a - b', 'return a + b')
  fs.writeFileSync('src/calculator.ts', fixed)

  // 3. Bash - è¿è¡Œæµ‹è¯•
  console.log('\nğŸ§ª Running tests...')
  execSync('npm test', { stdio: 'inherit' })

  console.log('\nâœ… Bug fixed!')
}

fixBug()
```

---

## æ¨¡å¼ 2ï¼šRead â†’ Write â†’ Edit â†’ Bashï¼ˆæ–°åŠŸèƒ½ï¼‰

```typescript
// feature-adder.ts
import fs from 'fs'
import { execSync } from 'child_process'

async function addFeature() {
  console.log('âœ¨ Adding new feature\n')

  // 1. Read - äº†è§£ç°æœ‰ç»“æ„
  console.log('ğŸ“– Reading existing code...')
  const indexContent = fs.readFileSync('src/index.ts', 'utf-8')

  // 2. Write - åˆ›å»ºæ–°æ–‡ä»¶
  console.log('\nğŸ“ Creating new feature file...')
  fs.writeFileSync('src/features/payment.ts', `
export class PaymentService {
  async processPayment(amount: number) {
    return { success: true, amount }
  }
}
`)

  // 3. Edit - é›†æˆåˆ°ç°æœ‰ä»£ç 
  console.log('\nâœï¸  Integrating feature...')
  const updated = indexContent.replace(
    "import { app } from './app'",
    "import { app } from './app'\nimport { PaymentService } from './features/payment'"
  )
  fs.writeFileSync('src/index.ts', updated)

  // 4. Bash - æµ‹è¯•
  console.log('\nğŸ§ª Running tests...')
  execSync('npm test', { stdio: 'inherit' })

  console.log('\nâœ… Feature added!')
}

addFeature()
```

---

## æ¨¡å¼ 3ï¼šBash â†’ Read â†’ Edit â†’ Bashï¼ˆè°ƒè¯•å¾ªç¯ï¼‰

```typescript
// debug-loop.ts
import fs from 'fs'
import { execSync } from 'child_process'

async function debugLoop() {
  console.log('ğŸ” Starting debug loop\n')

  let attempts = 0
  const maxAttempts = 5

  while (attempts < maxAttempts) {
    attempts++
    console.log(`\nğŸ”„ Attempt ${attempts}/${maxAttempts}`)

    try {
      // 1. Bash - è¿è¡Œæµ‹è¯•
      console.log('ğŸ§ª Running tests...')
      execSync('npm test', { stdio: 'inherit' })

      console.log('\nâœ… All tests passed!')
      break
    } catch (error) {
      // 2. Read - æŸ¥çœ‹é”™è¯¯æ—¥å¿—
      console.log('\nğŸ“– Reading error logs...')
      const logs = execSync('npm test 2>&1', { encoding: 'utf-8' })
      console.log(logs)

      // 3. Edit - ä¿®å¤é—®é¢˜
      console.log('\nâœï¸  Attempting fix...')
      const content = fs.readFileSync('src/app.ts', 'utf-8')
      // ç®€åŒ–ç¤ºä¾‹ï¼šå®é™…éœ€è¦æ™ºèƒ½åˆ†æé”™è¯¯
      const fixed = content.replace(/console\.log/g, '// console.log')
      fs.writeFileSync('src/app.ts', fixed)
    }
  }

  if (attempts === maxAttempts) {
    console.log('\nâŒ Max attempts reached')
  }
}

debugLoop()
```

---

## æ¨¡å¼ 4ï¼šæ‰¹é‡æ–‡ä»¶å¤„ç†

```typescript
// batch-processor.ts
import fs from 'fs'
import { execSync } from 'child_process'
import path from 'path'

async function batchProcess() {
  console.log('ğŸ“¦ Batch processing files\n')

  // 1. Bash - æŸ¥æ‰¾æ‰€æœ‰ TS æ–‡ä»¶
  const files = execSync('find src -name "*.ts"', { encoding: 'utf-8' })
    .split('\n')
    .filter(f => f)

  console.log(`Found ${files.length} files\n`)

  for (const file of files) {
    console.log(`Processing: ${file}`)

    // 2. Read - è¯»å–æ–‡ä»¶
    const content = fs.readFileSync(file, 'utf-8')

    // 3. Edit - ä¿®æ”¹å†…å®¹
    const updated = content
      .replace(/var /g, 'const ')
      .replace(/console\.log/g, '// console.log')

    // 4. Write - ä¿å­˜æ›´æ”¹
    if (updated !== content) {
      fs.writeFileSync(file, updated)
      console.log(`  âœ“ Updated`)
    } else {
      console.log(`  - No changes`)
    }
  }

  // 5. Bash - æ ¼å¼åŒ–æ‰€æœ‰æ–‡ä»¶
  console.log('\nâœ¨ Formatting files...')
  execSync('npm run format', { stdio: 'inherit' })

  console.log('\nâœ… Batch processing completed!')
}

batchProcess()
```

---

## æ¨¡å¼ 5ï¼šä»£ç ç”Ÿæˆæµæ°´çº¿

```typescript
// code-generator.ts
import fs from 'fs'
import { execSync } from 'child_process'

async function generateCode() {
  console.log('ğŸ¨ Generating code from template\n')

  // 1. Read - è¯»å–æ¨¡æ¿
  console.log('ğŸ“– Reading template...')
  const template = fs.readFileSync('templates/component.tsx', 'utf-8')

  // 2. Write - ç”Ÿæˆä»£ç 
  console.log('\nğŸ“ Generating component...')
  const code = template
    .replace(/{{ComponentName}}/g, 'UserProfile')
    .replace(/{{props}}/g, '{ userId: string }')

  fs.writeFileSync('src/components/UserProfile.tsx', code)

  // 3. Bash - ç”Ÿæˆæµ‹è¯•æ–‡ä»¶
  console.log('\nğŸ§ª Generating test file...')
  execSync('npm run generate:test src/components/UserProfile.tsx')

  // 4. Edit - æ·»åŠ å¯¼å‡º
  console.log('\nâœï¸  Adding export...')
  const indexContent = fs.readFileSync('src/components/index.ts', 'utf-8')
  const updated = indexContent + "\nexport { UserProfile } from './UserProfile'"
  fs.writeFileSync('src/components/index.ts', updated)

  // 5. Bash - è¿è¡Œ linter
  console.log('\nğŸ” Running linter...')
  execSync('npm run lint -- --fix', { stdio: 'inherit' })

  console.log('\nâœ… Code generated!')
}

generateCode()
```

---

## æœ€ä½³å®è·µæ€»ç»“

### 1. å·¥å…·é€‰æ‹©åŸåˆ™

- **Read**: éœ€è¦äº†è§£ç°æœ‰å†…å®¹
- **Write**: åˆ›å»ºæ–°æ–‡ä»¶æˆ–å®Œå…¨é‡å†™
- **Edit**: ä¿®æ”¹ç°æœ‰æ–‡ä»¶çš„ç‰¹å®šéƒ¨åˆ†
- **Bash**: æ‰§è¡Œå‘½ä»¤ã€è¿è¡Œæµ‹è¯•ã€æ„å»ºé¡¹ç›®

### 2. å¸¸è§ç»„åˆæ¨¡å¼

| ä»»åŠ¡ | å·¥å…·ç»„åˆ | è¯´æ˜ |
|------|---------|------|
| ä¿®å¤ Bug | Read â†’ Edit â†’ Bash | æŸ¥çœ‹ â†’ ä¿®å¤ â†’ éªŒè¯ |
| æ–°åŠŸèƒ½ | Read â†’ Write â†’ Edit â†’ Bash | äº†è§£ â†’ åˆ›å»º â†’ é›†æˆ â†’ æµ‹è¯• |
| é‡æ„ | Read â†’ Edit â†’ Bash | åˆ†æ â†’ ä¿®æ”¹ â†’ éªŒè¯ |
| è°ƒè¯• | Bash â†’ Read â†’ Edit â†’ Bash | è¿è¡Œ â†’ åˆ†æ â†’ ä¿®å¤ â†’ éªŒè¯ |
| æ‰¹é‡å¤„ç† | Bash â†’ Read â†’ Edit â†’ Bash | æŸ¥æ‰¾ â†’ è¯»å– â†’ ä¿®æ”¹ â†’ æ ¼å¼åŒ– |

### 3. é”™è¯¯å¤„ç†

```typescript
try {
  // å·¥å…·ç»„åˆ
  const content = fs.readFileSync(file, 'utf-8')
  const updated = content.replace(old, new)
  fs.writeFileSync(file, updated)
  execSync('npm test')
} catch (error) {
  console.error('Error:', error.message)
  // å›æ»šæˆ–é‡è¯•
}
```

---

**ç‰ˆæœ¬ï¼š** v1.0
**æœ€åæ›´æ–°ï¼š** 2026-02-19
**ç»´æŠ¤è€…ï¼š** Claude Code
