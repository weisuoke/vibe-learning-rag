# Context Files 与项目配置 - 学习概览

> Pi Agent 的配置系统完全指南：从基础概念到实战应用

---

## 📚 知识点概述

**Context Files** 是 Pi Agent 的配置系统，通过三个核心文件让 AI 理解你的项目：
- **AGENTS.md** - 项目知识库（规范、流程、约定）
- **settings.json** - 运行配置（模型、UI、资源）
- **SYSTEM.md** - AI 行为定制（风格、准则、约束）

**学习目标：**
- 理解 Context Files 的设计原理和加载机制
- 掌握三个配置文件的使用方法
- 学会团队协作和多项目管理
- 能够定制 AI 行为和管理敏感信息

---

## 🗺️ 学习路径

### 路径 1：快速上手（30 分钟）

适合：想快速开始使用的开发者

```
1. 30字核心 (2分钟)
   ↓
2. 最小可用 (10分钟)
   ↓
3. 实战代码_01_团队协作配置 (15分钟)
   ↓
4. 开始使用！
```

**学习成果：** 能够为项目创建基本的 AGENTS.md 和 settings.json

---

### 路径 2：系统学习（2 小时）

适合：想全面掌握 Context Files 的开发者

```
1. 30字核心 (2分钟)
   ↓
2. 第一性原理 (15分钟)
   ↓
3. 核心概念（三个文件详解）(60分钟)
   - AGENTS.md 文件详解
   - settings.json 配置详解
   - SYSTEM.md 系统提示词
   ↓
4. 双重类比 (10分钟)
   ↓
5. 反直觉点 (10分钟)
   ↓
6. 化骨绵掌（10张知识卡片）(20分钟)
   ↓
7. 一句话总结 (3分钟)
```

**学习成果：** 深入理解 Context Files 的设计原理和使用方法

---

### 路径 3：实战应用（1.5 小时）

适合：已掌握基础，需要实战案例的开发者

```
1. 最小可用 (10分钟)
   ↓
2. 实战代码（四个场景）(80分钟)
   - 团队协作配置 (20分钟)
   - 多项目切换配置 (20分钟)
   - 自定义Agent行为 (20分钟)
   - 敏感信息管理 (20分钟)
   ↓
3. 面试必问 (10分钟)
```

**学习成果：** 能够应对各种实际场景，解决实际问题

---

## 📖 文档结构

### 基础维度（8 个文件）

| 文件 | 内容 | 时长 | 难度 |
|------|------|------|------|
| [01_30字核心](./01_30字核心.md) | 一句话理解 Context Files | 2分钟 | ⭐ |
| [02_第一性原理](./02_第一性原理.md) | 底层设计逻辑和推理链条 | 15分钟 | ⭐⭐⭐ |
| [04_最小可用](./04_最小可用.md) | 20%核心知识解决80%问题 | 10分钟 | ⭐⭐ |
| [05_双重类比](./05_双重类比.md) | TypeScript/Node.js + 日常生活类比 | 10分钟 | ⭐⭐ |
| [06_反直觉点](./06_反直觉点.md) | 3个常见误区和避坑指南 | 10分钟 | ⭐⭐⭐ |
| [08_面试必问](./08_面试必问.md) | 高频面试题及出彩回答 | 10分钟 | ⭐⭐ |
| [09_化骨绵掌](./09_化骨绵掌.md) | 10张知识卡片速查 | 20分钟 | ⭐⭐ |
| [10_一句话总结](./10_一句话总结.md) | 核心要点回顾 | 3分钟 | ⭐ |

### 核心概念（3 个文件，深度解析）

| 文件 | 内容 | 时长 | 难度 |
|------|------|------|------|
| [03_核心概念_01_AGENTS.md文件详解](./03_核心概念_01_AGENTS.md文件详解.md) | 加载机制、内容结构、渐进式披露 | 25分钟 | ⭐⭐⭐ |
| [03_核心概念_02_settings.json配置详解](./03_核心概念_02_settings.json配置详解.md) | 配置选项、合并规则、最佳实践 | 20分钟 | ⭐⭐⭐ |
| [03_核心概念_03_SYSTEM.md系统提示词](./03_核心概念_03_SYSTEM.md系统提示词.md) | 替换vs追加、使用场景、内容设计 | 15分钟 | ⭐⭐⭐ |

### 实战代码（4 个场景，完整方案）

| 文件 | 内容 | 时长 | 难度 |
|------|------|------|------|
| [07_实战代码_01_团队协作配置](./07_实战代码_01_团队协作配置.md) | Git管理、Onboarding流程、团队规范 | 20分钟 | ⭐⭐⭐ |
| [07_实战代码_02_多项目切换配置](./07_实战代码_02_多项目切换配置.md) | 多项目管理、模型选择、成本优化 | 20分钟 | ⭐⭐⭐ |
| [07_实战代码_03_自定义Agent行为](./07_实战代码_03_自定义Agent行为.md) | 工作风格、代码规范、自动化流程 | 20分钟 | ⭐⭐⭐⭐ |
| [07_实战代码_04_敏感信息管理](./07_实战代码_04_敏感信息管理.md) | 环境变量、API密钥、.gitignore | 20分钟 | ⭐⭐⭐ |

---

## 🎯 按需求选择

### 我想快速开始使用

**推荐路径：**
1. [30字核心](./01_30字核心.md) - 理解是什么
2. [最小可用](./04_最小可用.md) - 学会基本用法
3. [团队协作配置](./07_实战代码_01_团队协作配置.md) - 看完整示例

**时间：** 30 分钟

---

### 我想深入理解原理

**推荐路径：**
1. [30字核心](./01_30字核心.md) - 快速了解
2. [第一性原理](./02_第一性原理.md) - 理解设计逻辑
3. [核心概念三部曲](./03_核心概念_01_AGENTS.md文件详解.md) - 深入学习
4. [反直觉点](./06_反直觉点.md) - 避免误区

**时间：** 1.5 小时

---

### 我想解决实际问题

**按场景选择：**
- **团队协作** → [团队协作配置](./07_实战代码_01_团队协作配置.md)
- **多项目管理** → [多项目切换配置](./07_实战代码_02_多项目切换配置.md)
- **定制AI行为** → [自定义Agent行为](./07_实战代码_03_自定义Agent行为.md)
- **安全管理** → [敏感信息管理](./07_实战代码_04_敏感信息管理.md)

**时间：** 每个场景 20 分钟

---

### 我想快速查阅

**推荐：**
- [化骨绵掌](./09_化骨绵掌.md) - 10张知识卡片速查
- [面试必问](./08_面试必问.md) - 高频问题速查
- [一句话总结](./10_一句话总结.md) - 核心要点回顾

**时间：** 10 分钟

---

## 🔑 核心知识点

### 三个文件的职责

```
AGENTS.md
├─ 项目知识（What）
├─ 技术栈、目录结构
├─ 开发规范、常用命令
└─ 累加式加载（所有层级都生效）

settings.json
├─ 运行配置（How）
├─ 模型、UI、性能
├─ 资源路径、Shell配置
└─ 覆盖式合并（项目覆盖全局）

SYSTEM.md / APPEND_SYSTEM.md
├─ AI行为（Who）
├─ 工作风格、代码偏好
├─ 安全约束、禁止操作
└─ 替换 vs 追加
```

### 配置层级

```
全局配置（个人偏好）
~/.pi/agent/
├── AGENTS.md
├── settings.json
└── APPEND_SYSTEM.md

↓ 继承和覆盖

项目配置（项目特定）
/project/
├── AGENTS.md
└── .pi/
    ├── settings.json
    └── APPEND_SYSTEM.md

↓ 最终生效

完整的AI上下文
```

---

## ⚠️ 常见误区

1. **AGENTS.md 是覆盖，不是累加** ❌
   - 实际：所有层级的 AGENTS.md 都会被合并（累加）

2. **settings.json 完全覆盖** ❌
   - 实际：对象深度合并，数组完全替换

3. **SYSTEM.md 是追加** ❌
   - 实际：SYSTEM.md 完全替换，APPEND_SYSTEM.md 才是追加

详见：[反直觉点](./06_反直觉点.md)

---

## 💡 最佳实践

### 团队协作
- ✅ AGENTS.md 提交到 Git（团队共享）
- ✅ .pi/settings.json 加入 .gitignore（个人配置）
- ✅ 提供 .env.example 模板
- ✅ 使用渐进式披露模式（mono-repo）

### 多项目管理
- ✅ 全局配置个人偏好
- ✅ 项目配置项目特定
- ✅ 根据重要性选择模型（成本优化）
- ✅ 使用脚本快速切换项目

### 安全管理
- ✅ 使用 .env 文件管理敏感信息
- ✅ 配置完整的 .gitignore
- ✅ 使用 git-secrets 自动检查
- ✅ 不要在配置文件中硬编码密钥

---

## 📊 学习检查清单

### 基础知识
- [ ] 理解 Context Files 的三个核心文件
- [ ] 知道 AGENTS.md 的累加机制
- [ ] 知道 settings.json 的合并规则
- [ ] 理解 SYSTEM.md vs APPEND_SYSTEM.md

### 实战能力
- [ ] 能为项目创建 AGENTS.md
- [ ] 能配置 .pi/settings.json
- [ ] 能管理多个项目的配置
- [ ] 能定制 AI 的工作风格

### 高级技巧
- [ ] 掌握渐进式披露模式
- [ ] 能优化成本（模型选择）
- [ ] 能管理敏感信息
- [ ] 能解决团队协作问题

---

## 🚀 下一步

### 完成学习后
1. **实践** - 为你的项目创建 Context Files
2. **分享** - 与团队分享配置经验
3. **优化** - 根据实际使用情况调整配置
4. **进阶** - 学习 Phase 2 的高级功能（Skills、Extensions）

### 相关资源
- **官方文档**: https://github.com/badlogic/pi-mono
- **Settings 文档**: https://github.com/badlogic/pi-mono/blob/main/packages/coding-agent/docs/settings.md
- **示例配置**: https://github.com/badlogic/pi-mono/blob/main/AGENTS.md
- **社区最佳实践**: Twitter @badlogicgames

---

## 📞 需要帮助？

- **基础问题** → 阅读 [最小可用](./04_最小可用.md)
- **概念理解** → 阅读 [第一性原理](./02_第一性原理.md)
- **实战问题** → 查看对应的实战代码文档
- **快速查阅** → 使用 [化骨绵掌](./09_化骨绵掌.md)

---

**版本**: v1.0
**最后更新**: 2026-02-18
**维护者**: Claude Code

**记住**: Context Files 是 Pi Agent 的"项目大脑"，配置得当能显著提升开发效率！
