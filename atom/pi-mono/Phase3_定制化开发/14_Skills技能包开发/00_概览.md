# Skills 技能包开发 - 概览

## 文档导航

本文档是 Pi-mono Skills 技能包开发的完整学习指南，涵盖从基础概念到高级实战的全部内容。

### 学习路径

```
入门 → 理解 → 实践 → 精通
  ↓      ↓      ↓      ↓
30字核心 → 第一性原理 → 实战代码 → 化骨绵掌
  ↓      ↓      ↓      ↓
最小可用 → 核心概念 → 测试发布 → 面试必问
  ↓      ↓      ↓      ↓
双重类比 → 反直觉点 → 高级组合 → 一句话总结
```

### 文档结构

**Phase 1: 快速入门（7 个维度）**
- 01_30字核心 - 核心概念速览
- 04_最小可用 - 快速上手
- 05_双重类比 - 理解本质
- 06_反直觉点 - 避免误区
- 08_面试必问 - 核心知识点
- 09_化骨绵掌 - 深层洞察
- 10_一句话总结 - 精华提炼

**Phase 2: 深入理解（4 个维度）**
- 02_第一性原理 - 设计思想
- 03_核心概念_01 - Skills 标准与格式
- 03_核心概念_02 - 调用与加载机制
- 03_核心概念_03 - 发布与复用策略

**Phase 3: 实战开发（3 个维度）**
- 07_实战代码_01 - 基础技能开发
- 07_实战代码_02 - 高级技能与组合
- 07_实战代码_03 - 测试发布与集成

---

## 核心内容总览

### 1. 30字核心

**SKILL.md 标准格式 + 文件系统加载 + 命令式调用，实现 AI Agent 能力的模块化封装与复用。**

**关键特性：**
- SKILL.md 标准格式（开放标准）
- 文件系统加载（零配置）
- 命令式调用（`/skill:name`）
- 模块化封装（能力复用）

**2025-2026 趋势：**
- Skills 成为 AI 软件开发的新单元
- SKILL.md 成为事实标准
- 技能市场生态形成
- 模块化 Agent 架构

---

### 2. 第一性原理

**核心问题：** AI Agent 能力的模块化、复用、协作。

**设计选择：**
1. **格式：** Markdown + YAML frontmatter
   - 理由：人类可读 + 机器可解析 + 开发者熟悉

2. **存储：** 文件系统
   - 理由：零配置 + 版本控制友好 + 团队协作友好

3. **加载：** 启动时加载
   - 理由：简单 + 性能 + 一致性

4. **执行：** 文本展开
   - 理由：符合本质 + 利用 LLM 优势

**核心洞察：**
- 极简主义的力量
- 约束即自由
- 工具适应人
- 提示词是一等公民

---

### 3. 核心概念

#### 3.1 Skills 标准与 SKILL.md 格式

**Agent Skills 标准演进：**
- 2023: 萌芽期（各自为政）
- 2024: 标准化尝试（Pi-mono 创新）
- 2025: 开放标准形成（Anthropic 推动）
- 2026: 生态系统繁荣（300+ 技能）

**SKILL.md 格式：**
```markdown
---
name: skill-name
description: Brief description
disable-model-invocation: false
---

[Markdown 正文 - 技能逻辑]
```

**验证规则：**
- name: 小写字母、数字、连字符，最多 64 字符
- description: 必需，最多 1024 字符
- 目录名必须与 name 匹配

#### 3.2 技能调用与加载机制

**加载流程：**
```
启动 → 扫描 → 解析 → 验证 → 注册 → System Prompt
```

**调用机制：**
```
/skill:name args
    ↓
解析命令
    ↓
查找技能
    ↓
读取文件
    ↓
展开为 XML 块
    ↓
注入 LLM 上下文
```

**关键实现：**
- 启动时一次性加载（skills.ts:146-230）
- 文本展开而非函数调用（agent-session.ts:883-907）
- System Prompt 集成（system-prompt.ts:290-316）
- Resource Loader 架构（resource-loader.ts）

#### 3.3 技能发布与复用策略

**发布方式：**
1. GitHub 仓库（推荐）
2. npm 包
3. 团队仓库
4. 技能市场

**版本管理：**
- Git tags + 语义化版本
- CHANGELOG.md
- 向后兼容策略

**技能组合模式：**
1. Sequential（顺序执行）
2. Parallel（并行执行）
3. Conditional（条件执行）
4. Iterative（迭代执行）

**技能市场：**
- Vercel Agent Skills（100+）
- Anthropic Skills Hub（50+）
- GitHub Skills Registry（300+）
- VoltAgent Awesome（300+）

---

### 4. 最小可用

**创建技能的最小步骤：**

```bash
# 1. 创建目录
mkdir -p ~/.pi/agent/skills/my-skill

# 2. 创建 SKILL.md
cat > ~/.pi/agent/skills/my-skill/SKILL.md << 'EOF'
---
name: my-skill
description: My custom skill
---

You are an expert assistant.
[技能逻辑]
EOF

# 3. 使用技能
pi
/skill:my-skill
```

**核心要素：**
- 文件命名：SKILL.md（大小写敏感）
- 目录名与 name 匹配
- YAML frontmatter（name + description）
- Markdown 正文（技能逻辑）

---

### 5. 双重类比

#### TypeScript/Node.js 类比

| 概念 | TypeScript/Node.js | Skills |
|------|-------------------|--------|
| 封装单元 | npm 包 | SKILL.md |
| 加载方式 | import/require | 文件系统扫描 |
| 调用方式 | 函数调用 | /skill:name |
| 分发方式 | npm registry | Git/GitHub |

#### 日常生活类比

| 概念 | 日常生活 | Skills |
|------|----------|--------|
| 功能模块 | 手机 App | 技能 |
| 使用说明 | 菜谱 | SKILL.md |
| 查找方式 | 图书馆 | 技能目录 |
| 专家咨询 | 请教专家 | 技能调用 |
| 流程组合 | 流水线 | 技能组合 |

---

### 6. 反直觉点

**反直觉点 1：** Skills 不是代码，是提示词
- 不是函数调用，是文本展开
- 不是代码执行，是 LLM 理解

**反直觉点 2：** 加载是启动时一次性的
- 不是动态加载，是启动时全量加载
- 修改技能需要重启 Agent

**反直觉点 3：** 调用是文本展开
- 不是函数调用，是字符串拼接
- 参数是自由文本，没有类型检查

**反直觉点 4：** 组合是提示词嵌套
- 不是函数组合，是 LLM 理解执行
- 依赖 LLM 的推理能力

**反直觉点 5：** 没有版本管理
- 只有文件替换，没有内置版本系统
- 需要手动使用 Git 管理版本

---

### 7. 实战代码

#### 7.1 基础技能开发

**场景 1：创建简单技能**
```markdown
---
name: code-review
description: Review code for quality and security
---

You are an expert code reviewer...
```

**场景 2：添加参数支持**
```markdown
When the user specifies "security":
- Focus on OWASP Top 10
When the user specifies "performance":
- Focus on optimization
```

**场景 3：使用 Prompt Templates**
```markdown
Use the security-checklist template...
```

**场景 4：本地测试**
```typescript
// 单元测试
const tester = new SkillTester();
tester.testSkill(codeReviewTests);

// 集成测试
./tests/integration-test.sh
```

#### 7.2 高级技能与组合

**场景 1：技能组合**
```markdown
Step 1: Use /skill:explore
Step 2: Use /skill:plan
Step 3: Use /skill:implement
```

**场景 2：条件逻辑**
```markdown
IF TypeScript frontend:
  Use /skill:frontend-review
IF Python backend:
  Use /skill:backend-review
```

**场景 3：异步操作和错误处理**
```markdown
IF deployment fails:
  - Initiate rollback
  - Restore previous version
```

**场景 4：Extension 集成**
```typescript
context.registerTool({
  name: 'analyze_git_diff',
  handler: async (input) => { ... }
});
```

#### 7.3 测试发布与集成

**场景 1：单元测试**
```typescript
class SkillTester {
  async testSkill(test: SkillTest): Promise<TestResult>
}
```

**场景 2：集成测试**
```bash
#!/bin/bash
run_test "Skill Loading" "echo '/skills' | pi"
```

**场景 3：发布到 GitHub**
```bash
git tag v1.0.0
gh release create v1.0.0
```

**场景 4：CI/CD 集成**
```yaml
# .github/workflows/test.yml
on: [push, pull_request]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - run: npm run test:skills
```

---

### 8. 面试必问

**Q1: 什么是 Skills？与 Prompt Templates 的区别？**
- Skills 封装完整能力，Templates 提供文本片段
- Skills 使用 SKILL.md，Templates 使用任意 .md
- Skills 符合开放标准，Templates 是内部标准

**Q2: Skills 的加载机制？**
- 启动时递归扫描技能目录
- 解析 YAML frontmatter 和验证
- 注册到内存中的技能列表
- 格式化为 System Prompt

**Q3: Skills 的调用机制？**
- 文本展开而非函数调用
- 读取 SKILL.md 内容
- 展开为 XML 块
- 注入到 LLM 上下文

**Q4: 如何实现技能组合？**
- 在父技能中调用子技能
- 使用明确的步骤和等待指令
- 依赖 LLM 理解和执行

**Q5: Skills 的验证规则？**
- name: 小写、数字、连字符，最多 64 字符
- description: 必需，最多 1024 字符
- 目录名必须与 name 匹配

**Q6: Skills 与 Agent Skills 标准的关系？**
- Pi-mono 完全符合 Anthropic 推动的开放标准
- SKILL.md 格式、目录结构、元数据规范
- 跨工具兼容（Vercel、Google、OpenAI）

**Q7: 如何调试和测试 Skills？**
- 查看展开后的文本
- 单元测试（SkillTester）
- 集成测试（integration-test.sh）
- 验证清单（format, content, functionality）

---

### 9. 化骨绵掌

**洞察 1：Skills 不是功能，是上下文**
- 不是执行任务，是引导 LLM 思考
- 定义"如何思考"而非"做什么"

**洞察 2：技能组合不是流程编排，是认知链**
- 不是机械步骤，是思考演进
- 构建 LLM 的认知链

**洞察 3：技能的价值不在于代码，在于知识**
- 编码专家思维，而非自动化操作
- 将隐性知识显性化

**洞察 4：技能的边界是 LLM 的能力边界**
- 擅长：自然语言理解、创意生成、模式识别
- 不擅长：精确计算、确定性逻辑、大规模数据

**洞察 5：技能的演进是知识的积累**
- 技能是活的知识库
- 随着经验增长而改进

**洞察 6：技能的复用不是复制，是适配**
- 理解意图后适配到场景
- 持续迭代改进

**洞察 7：技能的组织是知识的架构**
- 反映团队的认知模型
- 构建知识的层次结构

---

### 10. 一句话总结

**Skills 是 AI Agent 能力的标准化封装单元，通过 SKILL.md 文件 + 文件系统加载 + 命令式调用，实现能力的模块化、复用和组合，就像 npm 包之于 Node.js。**

---

## 学习建议

### 初学者路径（2-4 小时）

**第 1 步：快速入门（30 分钟）**
1. 阅读 01_30字核心
2. 阅读 10_一句话总结
3. 实践 04_最小可用

**第 2 步：理解本质（1 小时）**
1. 阅读 02_第一性原理
2. 阅读 05_双重类比
3. 阅读 06_反直觉点

**第 3 步：核心概念（1 小时）**
1. 阅读 03_核心概念_01（标准与格式）
2. 阅读 03_核心概念_02（调用与加载）
3. 阅读 03_核心概念_03（发布与复用）

**第 4 步：实战练习（1-2 小时）**
1. 阅读 07_实战代码_01（基础开发）
2. 动手创建自己的技能
3. 本地测试和验证

### 进阶路径（4-8 小时）

**第 5 步：高级特性（2 小时）**
1. 阅读 07_实战代码_02（高级组合）
2. 实践技能组合
3. 实践条件逻辑

**第 6 步：测试发布（2 小时）**
1. 阅读 07_实战代码_03（测试发布）
2. 编写单元测试
3. 发布到 GitHub

**第 7 步：深度理解（2-4 小时）**
1. 阅读 08_面试必问
2. 阅读 09_化骨绵掌
3. 阅读源码（skills.ts, agent-session.ts）

### 精通路径（持续学习）

**实践项目：**
1. 创建个人技能库（5-10 个技能）
2. 发布到 GitHub 并获得 stars
3. 贡献到社区技能库

**深入研究：**
1. 研究 Pi-mono 源码实现
2. 研究 2025-2026 行业趋势
3. 参与 Agent Skills 标准讨论

**知识分享：**
1. 编写技能开发教程
2. 分享最佳实践
3. 帮助他人解决问题

---

## 快速参考

### 常用命令

```bash
# 创建技能
mkdir -p ~/.pi/agent/skills/my-skill
cat > ~/.pi/agent/skills/my-skill/SKILL.md << 'EOF'
---
name: my-skill
description: Description
---
Logic here...
EOF

# 使用技能
/skill:my-skill

# 查看技能列表
/skills

# 测试技能
npm run test:skills

# 发布技能
git tag v1.0.0
git push origin v1.0.0
gh release create v1.0.0
```

### 文件结构

```
~/.pi/agent/skills/          # 全局技能
./.pi/skills/                # 项目技能
skills/
└── skill-name/
    └── SKILL.md
```

### SKILL.md 模板

```markdown
---
name: skill-name
description: Brief description (< 1024 chars)
disable-model-invocation: false
---

You are [role] with [expertise].

## Process
1. Step 1
2. Step 2

## Output Format
[Format specification]

## Example
[Concrete example]
```

### 验证清单

- [ ] 文件名为 SKILL.md
- [ ] 目录名与 name 匹配
- [ ] name 符合规范（小写、数字、连字符）
- [ ] description 存在且 < 1024 字符
- [ ] YAML frontmatter 格式正确
- [ ] 技能逻辑清晰明确

---

## 相关资源

### 官方资源

- [anthropics/skills](https://github.com/anthropics/skills) - 官方技能仓库
- [Agent Skills 标准](https://agentskills.io/) - 开放标准文档
- [Pi-mono 源码](https://github.com/anthropics/claude-code) - 实现参考

### 社区资源

- [vercel-labs/agent-skills](https://github.com/vercel-labs/agent-skills) - Vercel 技能库
- [VoltAgent/awesome-agent-skills](https://github.com/VoltAgent/awesome-agent-skills) - 300+ 技能
- [obra/superpowers](https://github.com/obra/superpowers) - 可组合技能框架

### 行业文章

- [Skills are the New Unit](https://www.accessnewswire.com/newsroom/en/computers-technology-and-internet/skills-are-the-new-unit-of-ai-software-development-1138920)
- [Anthropic Makes Agent Skills an Open Standard](https://medium.com/lab7ai-insights/anthropic-makes-agent-skills-an-open-standard-for-modular-ai-agent-capabilities-781c697b4d3b)
- [Vercel Releases Agent Skills](https://www.marktechpost.com/2026/01/18/vercel-releases-agent-skills)
- [Building Modular Agentic AI Systems](https://mayursurani.medium.com/building-modular-agentic-ai-systems)

---

## 下一步

### 继续学习

- **Phase 2: 核心架构理解** - 深入学习 Pi-mono 架构
- **Phase 3: 定制化开发** - 学习其他定制化功能
- **Phase 4: 高级主题** - 探索高级特性和优化

### 实践项目

1. **个人技能库** - 创建 5-10 个常用技能
2. **团队技能库** - 为团队创建共享技能
3. **开源贡献** - 贡献到社区技能库

### 社区参与

1. **GitHub Discussions** - 参与讨论和提问
2. **技能分享** - 分享你的技能到社区
3. **最佳实践** - 总结和分享经验

---

## 总结

**Skills 技能包开发的核心价值：**

1. **模块化** - 能力封装，降低复杂度
2. **复用性** - 一次编写，多次使用
3. **标准化** - 开放标准，跨工具兼容
4. **易分发** - Git/文件系统轻松分享
5. **可组合** - 技能组合成复杂工作流

**2025-2026 行业趋势：**

1. Skills 成为 AI 软件开发的新单元
2. SKILL.md 成为事实标准
3. 技能市场生态形成
4. 模块化 Agent 架构成为主流

**学习成果：**

完成本文档学习后，你将能够：
- ✅ 理解 Skills 技能包的本质和价值
- ✅ 创建和发布自己的技能
- ✅ 使用技能组合构建复杂工作流
- ✅ 测试和维护技能质量
- ✅ 参与 Skills 生态系统

---

**版本：** v1.0
**最后更新：** 2026-02-20
**维护者：** Claude Code
**文档完成度：** 15/15 文件，100% 完成
