# 面试必问

## 问题1："请解释RAG架构的核心组件"

**普通回答（❌ 不出彩）：**
"RAG架构包括检索和生成两部分，先检索相关文档，再用LLM生成答案。"

**出彩回答（✅ 推荐）：**

> **RAG架构是一个分层的系统设计，包含14个核心组件，分为4层：**
>
> 1. **基础层（6个组件）**：负责数据流转
>    - 数据源→摄取预处理→分块→嵌入→向量存储→查询处理
>    - 这层解决"如何将文档转换为可检索的向量"
>
> 2. **检索优化层（3个组件）**：提升检索质量
>    - 混合检索（Dense+Sparse）提升召回率20-30%
>    - 重排序（Cross-Encoder）提升精确度15-30%
>    - 上下文管理解决Lost in the Middle问题
>
> 3. **生成层（2个组件）**：生成高质量答案
>    - Prompt工程决定生成质量
>    - 生成器（LLM）综合上下文生成答案
>
> 4. **高级模式层（3个组件）**：处理复杂场景
>    - Agentic RAG支持多跳推理和工具使用
>    - GraphRAG通过知识图谱增强结构化理解
>    - 评估监控持续保证质量
>
> **关键洞察：** RAG不是简单的"检索+生成"，而是完整的系统工程。不同场景需要不同的组件组合：基础场景5个组件就够，生产级需要8-10个，复杂推理需要全部14个。
>
> **在实际项目中：** 我会从MVP开始（5个组件），测量基线效果，然后根据实际需求逐步添加混合检索、重排序等优化组件，而不是一开始就实现全部14个组件。

**为什么这个回答出彩？**
1. ✅ 展示了系统性思维（分层架构）
2. ✅ 提供了具体数据（提升百分比）
3. ✅ 说明了实际应用策略（渐进式优化）
4. ✅ 体现了工程经验（MVP思维）

---

## 问题2："RAG系统如何优化检索质量？"

**普通回答（❌ 不出彩）：**
"可以使用更好的嵌入模型，或者增加检索的文档数量。"

**出彩回答（✅ 推荐）：**

> **检索质量优化有三个层次：**
>
> **层次1：检索策略优化**
> - **混合检索**：结合Dense（语义）和Sparse（关键词）检索
>   - Dense适合概念性查询，Sparse适合专有名词
>   - 使用RRF（Reciprocal Rank Fusion）融合结果
>   - 效果：召回率提升20-30%
>
> **层次2：结果精排**
> - **重排序**：使用Cross-Encoder对候选结果精确打分
>   - Bi-Encoder（向量检索）快但粗糙
>   - Cross-Encoder（重排序）慢但精确
>   - 策略：先用Bi-Encoder检索10-20个候选，再用Cross-Encoder精排Top-3
>   - 效果：精确度提升15-30%
>
> **层次3：上下文优化**
> - **Lost in the Middle问题**：LLM对中间部分的信息利用率低
>   - 解决：最相关文档放开头和结尾，次相关放中间
>   - Token管理：预留20-30%给生成，避免超出Context Window
>   - 效果：信息利用率提升10-15%
>
> **实际数据对比：**
> ```
> 基础Dense检索：60%准确率
> + 混合检索：75%准确率（+15%）
> + 重排序：85%准确率（+10%）
> + 上下文优化：90%准确率（+5%）
> ```
>
> **关键权衡：** 每层优化都有成本。混合检索增加计算量，重排序增加延迟，上下文优化增加复杂度。需要根据场景选择合适的优化组合，而不是盲目叠加所有优化。

**为什么这个回答出彩？**
1. ✅ 分层次说明（从粗到精）
2. ✅ 提供具体数据和对比
3. ✅ 说明技术原理和权衡
4. ✅ 展示实战经验

---

## 快速回答模板

**架构设计类问题：**
1. 说明分层结构
2. 解释每层职责
3. 举实际例子
4. 说明权衡考虑

**技术实现类问题：**
1. 说明核心原理
2. 对比不同方案
3. 提供具体数据
4. 说明适用场景

**优化策略类问题：**
1. 识别瓶颈
2. 提出多层次方案
3. 量化效果提升
4. 说明成本权衡
